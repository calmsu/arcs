/**
 * ARCS
 * 0.9.7
 * Generated on Sun May 27 20:14:27 EDT 2012 with 43e65b3
 *
 * Copyright 2012, Michigan State University Board of Trustees
 */

var JSON;JSON||(JSON={}),function(){function f(a){return a<10?"0"+a:a}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return typeof b=="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g=gap,h,i=b[a];i&&typeof i=="object"&&typeof i.toJSON=="function"&&(i=i.toJSON(a)),typeof rep=="function"&&(i=rep.call(b,a,i));switch(typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";gap+=indent,h=[];if(Object.prototype.toString.apply(i)==="[object Array]"){f=i.length;for(c=0;c<f;c+=1)h[c]=str(c,i)||"null";return e=h.length===0?"[]":gap?"[\n"+gap+h.join(",\n"+gap)+"\n"+g+"]":"["+h.join(",")+"]",gap=g,e}if(rep&&typeof rep=="object"){f=rep.length;for(c=0;c<f;c+=1)typeof rep[c]=="string"&&(d=rep[c],e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e))}else for(d in i)Object.prototype.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e));return e=h.length===0?"{}":gap?"{\n"+gap+h.join(",\n"+gap)+"\n"+g+"}":"{"+h.join(",")+"}",gap=g,e}}"use strict",typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(a){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;typeof JSON.stringify!="function"&&(JSON.stringify=function(a,b,c){var d;gap="",indent="";if(typeof c=="number")for(d=0;d<c;d+=1)indent+=" ";else typeof c=="string"&&(indent=c);rep=b;if(!b||typeof b=="function"||typeof b=="object"&&typeof b.length=="number")return str("",{"":a});throw new Error("JSON.stringify")}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&typeof e=="object")for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),d!==undefined?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}();(function(a,b){function c(a){return K.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1}function d(a){if(!cp[a]){var b=H.body,c=K("<"+a+">").appendTo(b),d=c.css("display");c.remove();if(d==="none"||d===""){cq||(cq=H.createElement("iframe"),cq.frameBorder=cq.width=cq.height=0),b.appendChild(cq);if(!cr||!cq.createElement)cr=(cq.contentWindow||cq.contentDocument).document,cr.write((H.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>"),cr.close();c=cr.createElement(a),cr.body.appendChild(c),d=K.css(c,"display"),b.removeChild(cq)}cp[a]=d}return cp[a]}function e(a,b){var c={};return K.each(cv.concat.apply([],cv.slice(0,b)),function(){c[this]=a}),c}function f(){cw=b}function g(){return setTimeout(f,0),cw=K.now()}function h(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function i(){try{return new a.XMLHttpRequest}catch(b){}}function j(a,c){a.dataFilter&&(c=a.dataFilter(c,a.dataType));var d=a.dataTypes,e={},f,g,h=d.length,i,j=d[0],k,l,m,n,o;for(f=1;f<h;f++){if(f===1)for(g in a.converters)typeof g=="string"&&(e[g.toLowerCase()]=a.converters[g]);k=j,j=d[f];if(j==="*")j=k;else if(k!=="*"&&k!==j){l=k+" "+j,m=e[l]||e["* "+j];if(!m){o=b;for(n in e){i=n.split(" ");if(i[0]===k||i[0]==="*"){o=e[i[1]+" "+j];if(o){n=e[n],n===!0?m=o:o===!0&&(m=n);break}}}}!m&&!o&&K.error("No conversion from "+l.replace(" "," to ")),m!==!0&&(c=m?m(c):o(n(c)))}}return c}function k(a,c,d){var e=a.contents,f=a.dataTypes,g=a.responseFields,h,i,j,k;for(i in g)i in d&&(c[g[i]]=d[i]);while(f[0]==="*")f.shift(),h===b&&(h=a.mimeType||c.getResponseHeader("content-type"));if(h)for(i in e)if(e[i]&&e[i].test(h)){f.unshift(i);break}if(f[0]in d)j=f[0];else{for(i in d){if(!f[0]||a.converters[i+" "+f[0]]){j=i;break}k||(k=i)}j=j||k}if(j)return j!==f[0]&&f.unshift(j),d[j]}function l(a,b,c,d){if(K.isArray(b))K.each(b,function(b,e){c||bR.test(a)?d(a,e):l(a+"["+(typeof e=="object"||K.isArray(e)?b:"")+"]",e,c,d)});else if(!c&&b!=null&&typeof b=="object")for(var e in b)l(a+"["+e+"]",b[e],c,d);else d(a,b)}function m(a,c){var d,e,f=K.ajaxSettings.flatOptions||{};for(d in c)c[d]!==b&&((f[d]?a:e||(e={}))[d]=c[d]);e&&K.extend(!0,a,e)}function n(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;var h=a[f],i=0,j=h?h.length:0,k=a===ce,l;for(;i<j&&(k||!l);i++)l=h[i](c,d,e),typeof l=="string"&&(!k||g[l]?l=b:(c.dataTypes.unshift(l),l=n(a,c,d,e,l,g)));return(k||!l)&&!g["*"]&&(l=n(a,c,d,e,"*",g)),l}function o(a){return function(b,c){typeof b!="string"&&(c=b,b="*");if(K.isFunction(c)){var d=b.toLowerCase().split(ca),e=0,f=d.length,g,h,i;for(;e<f;e++)g=d[e],i=/^\+/.test(g),i&&(g=g.substr(1)||"*"),h=a[g]=a[g]||[],h[i?"unshift":"push"](c)}}}function p(a,b,c){var d=b==="width"?a.offsetWidth:a.offsetHeight,e=b==="width"?bL:bM,f=0,g=e.length;if(d>0){if(c!=="border")for(;f<g;f++)c||(d-=parseFloat(K.css(a,"padding"+e[f]))||0),c==="margin"?d+=parseFloat(K.css(a,c+e[f]))||0:d-=parseFloat(K.css(a,"border"+e[f]+"Width"))||0;return d+"px"}d=bN(a,b,b);if(d<0||d==null)d=a.style[b]||0;d=parseFloat(d)||0;if(c)for(;f<g;f++)d+=parseFloat(K.css(a,"padding"+e[f]))||0,c!=="padding"&&(d+=parseFloat(K.css(a,"border"+e[f]+"Width"))||0),c==="margin"&&(d+=parseFloat(K.css(a,c+e[f]))||0);return d+"px"}function q(a,b){b.src?K.ajax({url:b.src,async:!1,dataType:"script"}):K.globalEval((b.text||b.textContent||b.innerHTML||"").replace(bB,"/*$0*/")),b.parentNode&&b.parentNode.removeChild(b)}function r(a){var b=H.createElement("div");return bD.appendChild(b),b.innerHTML=a.outerHTML,b.firstChild}function s(a){var b=(a.nodeName||"").toLowerCase();b==="input"?t(a):b!=="script"&&typeof a.getElementsByTagName!="undefined"&&K.grep(a.getElementsByTagName("input"),t)}function t(a){if(a.type==="checkbox"||a.type==="radio")a.defaultChecked=a.checked}function u(a){return typeof a.getElementsByTagName!="undefined"?a.getElementsByTagName("*"):typeof a.querySelectorAll!="undefined"?a.querySelectorAll("*"):[]}function v(a,b){var c;if(b.nodeType===1){b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase();if(c==="object")b.outerHTML=a.outerHTML;else if(c!=="input"||a.type!=="checkbox"&&a.type!=="radio"){if(c==="option")b.selected=a.defaultSelected;else if(c==="input"||c==="textarea")b.defaultValue=a.defaultValue}else a.checked&&(b.defaultChecked=b.checked=a.checked),b.value!==a.value&&(b.value=a.value);b.removeAttribute(K.expando)}}function w(a,b){if(b.nodeType===1&&!!K.hasData(a)){var c,d,e,f=K._data(a),g=K._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;d<e;d++)K.event.add(b,c+(h[c][d].namespace?".":"")+h[c][d].namespace,h[c][d],h[c][d].data)}g.data&&(g.data=K.extend({},g.data))}}function x(a,b){return K.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function y(a){var b=bp.split("|"),c=a.createDocumentFragment();if(c.createElement)while(b.length)c.createElement(b.pop());return c}function z(a,b,c){b=b||0;if(K.isFunction(b))return K.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c});if(b.nodeType)return K.grep(a,function(a,d){return a===b===c});if(typeof b=="string"){var d=K.grep(a,function(a){return a.nodeType===1});if(bl.test(b))return K.filter(b,d,!c);b=K.filter(b,d)}return K.grep(a,function(a,d){return K.inArray(a,b)>=0===c})}function A(a){return!a||!a.parentNode||a.parentNode.nodeType===11}function B(){return!0}function C(){return!1}function D(a,b,c){var d=b+"defer",e=b+"queue",f=b+"mark",g=K._data(a,d);g&&(c==="queue"||!K._data(a,e))&&(c==="mark"||!K._data(a,f))&&setTimeout(function(){!K._data(a,e)&&!K._data(a,f)&&(K.removeData(a,d,!0),g.fire())},0)}function E(a){for(var b in a){if(b==="data"&&K.isEmptyObject(a[b]))continue;if(b!=="toJSON")return!1}return!0}function F(a,c,d){if(d===b&&a.nodeType===1){var e="data-"+c.replace(O,"-$1").toLowerCase();d=a.getAttribute(e);if(typeof d=="string"){try{d=d==="true"?!0:d==="false"?!1:d==="null"?null:K.isNumeric(d)?parseFloat(d):N.test(d)?K.parseJSON(d):d}catch(f){}K.data(a,c,d)}else d=b}return d}function G(a){var b=L[a]={},c,d;a=a.split(/\s+/);for(c=0,d=a.length;c<d;c++)b[a[c]]=!0;return b}var H=a.document,I=a.navigator,J=a.location,K=function(){function c(){if(!d.isReady){try{H.documentElement.doScroll("left")}catch(a){setTimeout(c,1);return}d.ready()}}var d=function(a,b){return new d.fn.init(a,b,g)},e=a.jQuery,f=a.$,g,h=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,i=/\S/,j=/^\s+/,k=/\s+$/,l=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,m=/^[\],:{}\s]*$/,n=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,o=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,p=/(?:^|:|,)(?:\s*\[)+/g,q=/(webkit)[ \/]([\w.]+)/,r=/(opera)(?:.*version)?[ \/]([\w.]+)/,s=/(msie) ([\w.]+)/,t=/(mozilla)(?:.*? rv:([\w.]+))?/,u=/-([a-z]|[0-9])/ig,v=/^-ms-/,w=function(a,b){return(b+"").toUpperCase()},x=I.userAgent,y,z,A,B=Object.prototype.toString,C=Object.prototype.hasOwnProperty,D=Array.prototype.push,E=Array.prototype.slice,F=String.prototype.trim,G=Array.prototype.indexOf,J={};return d.fn=d.prototype={constructor:d,init:function(a,c,e){var f,g,i,j;if(!a)return this;if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if(a==="body"&&!c&&H.body)return this.context=H,this[0]=H.body,this.selector=a,this.length=1,this;if(typeof a=="string"){a.charAt(0)!=="<"||a.charAt(a.length-1)!==">"||a.length<3?f=h.exec(a):f=[null,a,null];if(f&&(f[1]||!c)){if(f[1])return c=c instanceof d?c[0]:c,j=c?c.ownerDocument||c:H,i=l.exec(a),i?d.isPlainObject(c)?(a=[H.createElement(i[1])],d.fn.attr.call(a,c,!0)):a=[j.createElement(i[1])]:(i=d.buildFragment([f[1]],[j]),a=(i.cacheable?d.clone(i.fragment):i.fragment).childNodes),d.merge(this,a);g=H.getElementById(f[2]);if(g&&g.parentNode){if(g.id!==f[2])return e.find(a);this.length=1,this[0]=g}return this.context=H,this.selector=a,this}return!c||c.jquery?(c||e).find(a):this.constructor(c).find(a)}return d.isFunction(a)?e.ready(a):(a.selector!==b&&(this.selector=a.selector,this.context=a.context),d.makeArray(a,this))},selector:"",jquery:"1.7.1",length:0,size:function(){return this.length},toArray:function(){return E.call(this,0)},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a,b,c){var e=this.constructor();return d.isArray(a)?D.apply(e,a):d.merge(e,a),e.prevObject=this,e.context=this.context,b==="find"?e.selector=this.selector+(this.selector?" ":"")+c:b&&(e.selector=this.selector+"."+b+"("+c+")"),e},each:function(a,b){return d.each(this,a,b)},ready:function(a){return d.bindReady(),z.add(a),this},eq:function(a){return a=+a,a===-1?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(E.apply(this,arguments),"slice",E.call(arguments).join(","))},map:function(a){return this.pushStack(d.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:D,sort:[].sort,splice:[].splice},d.fn.init.prototype=d.fn,d.extend=d.fn.extend=function(){var a,c,e,f,g,h,i=arguments[0]||{},j=1,k=arguments.length,l=!1;typeof i=="boolean"&&(l=i,i=arguments[1]||{},j=2),typeof i!="object"&&!d.isFunction(i)&&(i={}),k===j&&(i=this,--j);for(;j<k;j++)if((a=arguments[j])!=null)for(c in a){e=i[c],f=a[c];if(i===f)continue;l&&f&&(d.isPlainObject(f)||(g=d.isArray(f)))?(g?(g=!1,h=e&&d.isArray(e)?e:[]):h=e&&d.isPlainObject(e)?e:{},i[c]=d.extend(l,h,f)):f!==b&&(i[c]=f)}return i},d.extend({noConflict:function(b){return a.$===d&&(a.$=f),b&&a.jQuery===d&&(a.jQuery=e),d},isReady:!1,readyWait:1,holdReady:function(a){a?d.readyWait++:d.ready(!0)},ready:function(a){if(a===!0&&!--d.readyWait||a!==!0&&!d.isReady){if(!H.body)return setTimeout(d.ready,1);d.isReady=!0;if(a!==!0&&--d.readyWait>0)return;z.fireWith(H,[d]),d.fn.trigger&&d(H).trigger("ready").off("ready")}},bindReady:function(){if(!z){z=d.Callbacks("once memory");if(H.readyState==="complete")return setTimeout(d.ready,1);if(H.addEventListener)H.addEventListener("DOMContentLoaded",A,!1),a.addEventListener("load",d.ready,!1);else if(H.attachEvent){H.attachEvent("onreadystatechange",A),a.attachEvent("onload",d.ready);var b=!1;try{b=a.frameElement==null}catch(e){}H.documentElement.doScroll&&b&&c()}}},isFunction:function(a){return d.type(a)==="function"},isArray:Array.isArray||function(a){return d.type(a)==="array"},isWindow:function(a){return a&&typeof a=="object"&&"setInterval"in a},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return a==null?String(a):J[B.call(a)]||"object"},isPlainObject:function(a){if(!a||d.type(a)!=="object"||a.nodeType||d.isWindow(a))return!1;try{if(a.constructor&&!C.call(a,"constructor")&&!C.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}var e;for(e in a);return e===b||C.call(a,e)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw new Error(a)},parseJSON:function(b){if(typeof b!="string"||!b)return null;b=d.trim(b);if(a.JSON&&a.JSON.parse)return a.JSON.parse(b);if(m.test(b.replace(n,"@").replace(o,"]").replace(p,"")))return(new Function("return "+b))();d.error("Invalid JSON: "+b)},parseXML:function(c){var e,f;try{a.DOMParser?(f=new DOMParser,e=f.parseFromString(c,"text/xml")):(e=new ActiveXObject("Microsoft.XMLDOM"),e.async="false",e.loadXML(c))}catch(g){e=b}return(!e||!e.documentElement||e.getElementsByTagName("parsererror").length)&&d.error("Invalid XML: "+c),e},noop:function(){},globalEval:function(b){b&&i.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(v,"ms-").replace(u,w)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,e){var f,g=0,h=a.length,i=h===b||d.isFunction(a);if(e){if(i){for(f in a)if(c.apply(a[f],e)===!1)break}else for(;g<h;)if(c.apply(a[g++],e)===!1)break}else if(i){for(f in a)if(c.call(a[f],f,a[f])===!1)break}else for(;g<h;)if(c.call(a[g],g,a[g++])===!1)break;return a},trim:F?function(a){return a==null?"":F.call(a)}:function(a){return a==null?"":(a+"").replace(j,"").replace(k,"")},makeArray:function(a,b){var c=b||[];if(a!=null){var e=d.type(a);a.length==null||e==="string"||e==="function"||e==="regexp"||d.isWindow(a)?D.call(c,a):d.merge(c,a)}return c},inArray:function(a,b,c){var d;if(b){if(G)return G.call(b,a,c);d=b.length,c=c?c<0?Math.max(0,d+c):c:0;for(;c<d;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var d=a.length,e=0;if(typeof c.length=="number")for(var f=c.length;e<f;e++)a[d++]=c[e];else while(c[e]!==b)a[d++]=c[e++];return a.length=d,a},grep:function(a,b,c){var d=[],e;c=!!c;for(var f=0,g=a.length;f<g;f++)e=!!b(a[f],f),c!==e&&d.push(a[f]);return d},map:function(a,c,e){var f,g,h=[],i=0,j=a.length,k=a instanceof d||j!==b&&typeof j=="number"&&(j>0&&a[0]&&a[j-1]||j===0||d.isArray(a));if(k)for(;i<j;i++)f=c(a[i],i,e),f!=null&&(h[h.length]=f);else for(g in a)f=c(a[g],g,e),f!=null&&(h[h.length]=f);return h.concat.apply([],h)},guid:1,proxy:function(a,c){if(typeof c=="string"){var e=a[c];c=a,a=e}if(!d.isFunction(a))return b;var f=E.call(arguments,2),g=function(){return a.apply(c,f.concat(E.call(arguments)))};return g.guid=a.guid=a.guid||g.guid||d.guid++,g},access:function(a,c,e,f,g,h){var i=a.length;if(typeof c=="object"){for(var j in c)d.access(a,j,c[j],f,g,e);return a}if(e!==b){f=!h&&f&&d.isFunction(e);for(var k=0;k<i;k++)g(a[k],c,f?e.call(a[k],k,g(a[k],c)):e,h);return a}return i?g(a[0],c):b},now:function(){return(new Date).getTime()},uaMatch:function(a){a=a.toLowerCase();var b=q.exec(a)||r.exec(a)||s.exec(a)||a.indexOf("compatible")<0&&t.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},sub:function(){function a(b,c){return new a.fn.init(b,c)}d.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function(c,e){return e&&e instanceof d&&!(e instanceof a)&&(e=a(e)),d.fn.init.call(this,c,e,b)},a.fn.init.prototype=a.fn;var b=a(H);return a},browser:{}}),d.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){J["[object "+b+"]"]=b.toLowerCase()}),y=d.uaMatch(x),y.browser&&(d.browser[y.browser]=!0,d.browser.version=y.version),d.browser.webkit&&(d.browser.safari=!0),i.test("Â ")&&(j=/^[\s\xA0]+/,k=/[\s\xA0]+$/),g=d(H),H.addEventListener?A=function(){H.removeEventListener("DOMContentLoaded",A,!1),d.ready()}:H.attachEvent&&(A=function(){H.readyState==="complete"&&(H.detachEvent("onreadystatechange",A),d.ready())}),d}(),L={};K.Callbacks=function(a){a=a?L[a]||G(a):{};var c=[],d=[],e,f,g,h,i,j=function(b){var d,e,f,g,h;for(d=0,e=b.length;d<e;d++)f=b[d],g=K.type(f),g==="array"?j(f):g==="function"&&(!a.unique||!l.has(f))&&c.push(f)},k=function(b,j){j=j||[],e=!a.memory||[b,j],f=!0,i=g||0,g=0,h=c.length;for(;c&&i<h;i++)if(c[i].apply(b,j)===!1&&a.stopOnFalse){e=!0;break}f=!1,c&&(a.once?e===!0?l.disable():c=[]:d&&d.length&&(e=d.shift(),l.fireWith(e[0],e[1])))},l={add:function(){if(c){var a=c.length;j(arguments),f?h=c.length:e&&e!==!0&&(g=a,k(e[0],e[1]))}return this},remove:function(){if(c){var b=arguments,d=0,e=b.length;for(;d<e;d++)for(var g=0;g<c.length;g++)if(b[d]===c[g]){f&&g<=h&&(h--,g<=i&&i--),c.splice(g--,1);if(a.unique)break}}return this},has:function(a){if(c){var b=0,d=c.length;for(;b<d;b++)if(a===c[b])return!0}return!1},empty:function(){return c=[],this},disable:function(){return c=d=e=b,this},disabled:function(){return!c},lock:function(){return d=b,(!e||e===!0)&&l.disable(),this},locked:function(){return!d},fireWith:function(b,c){return d&&(f?a.once||d.push([b,c]):(!a.once||!e)&&k(b,c)),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!e}};return l};var M=[].slice;K.extend({Deferred:function(a){var b=K.Callbacks("once memory"),c=K.Callbacks("once memory"),d=K.Callbacks("memory"),e="pending",f={resolve:b,reject:c,notify:d},g={done:b.add,fail:c.add,progress:d.add,state:function(){return e},isResolved:b.fired,isRejected:c.fired,then:function(a,b,c){return h.done(a).fail(b).progress(c),this},always:function(){return h.done.apply(h,arguments).fail.apply(h,arguments),this},pipe:function(a,b,c){return K.Deferred(function(d){K.each({done:[a,"resolve"],fail:[b,"reject"],progress:[c,"notify"]},function(a,b){var c=b[0],e=b[1],f;K.isFunction(c)?h[a](function(){f=c.apply(this,arguments),f&&K.isFunction(f.promise)?f.promise().then(d.resolve,d.reject,d.notify):d[e+"With"](this===h?d:this,[f])}):h[a](d[e])})}).promise()},promise:function(a){if(a==null)a=g;else for(var b in g)a[b]=g[b];return a}},h=g.promise({}),i;for(i in f)h[i]=f[i].fire,h[i+"With"]=f[i].fireWith;return h.done(function(){e="resolved"},c.disable,d.lock).fail(function(){e="rejected"},b.disable,d.lock),a&&a.call(h,h),h},when:function(a){function b(a){return function(b){g[a]=arguments.length>1?M.call(arguments,0):b,j.notifyWith(k,g)}}function c(a){return function(b){d[a]=arguments.length>1?M.call(arguments,0):b,--h||j.resolveWith(j,d)}}var d=M.call(arguments,0),e=0,f=d.length,g=Array(f),h=f,i=f,j=f<=1&&a&&K.isFunction(a.promise)?a:K.Deferred(),k=j.promise();if(f>1){for(;e<f;e++)d[e]&&d[e].promise&&K.isFunction(d[e].promise)?d[e].promise().then(c(e),j.reject,b(e)):--h;h||j.resolveWith(j,d)}else j!==a&&j.resolveWith(j,f?[a]:[]);return k}}),K.support=function(){var b,c,d,e,f,g,h,i,j,k,l,m,n,o=H.createElement("div"),p=H.documentElement;o.setAttribute("className","t"),o.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",c=o.getElementsByTagName("*"),d=o.getElementsByTagName("a")[0];if(!c||!c.length||!d)return{};e=H.createElement("select"),f=e.appendChild(H.createElement("option")),g=o.getElementsByTagName("input")[0],b={leadingWhitespace:o.firstChild.nodeType===3,tbody:!o.getElementsByTagName("tbody").length,htmlSerialize:!!o.getElementsByTagName("link").length,style:/top/.test(d.getAttribute("style")),hrefNormalized:d.getAttribute("href")==="/a",opacity:/^0.55/.test(d.style.opacity),cssFloat:!!d.style.cssFloat,checkOn:g.value==="on",optSelected:f.selected,getSetAttribute:o.className!=="t",enctype:!!H.createElement("form").enctype,html5Clone:H.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0},g.checked=!0,b.noCloneChecked=g.cloneNode(!0).checked,e.disabled=!0,b.optDisabled=!f.disabled;try{delete o.test}catch(q){b.deleteExpando=!1}!o.addEventListener&&o.attachEvent&&o.fireEvent&&(o.attachEvent("onclick",function(){b.noCloneEvent=!1}),o.cloneNode(!0).fireEvent("onclick")),g=H.createElement("input"),g.value="t",g.setAttribute("type","radio"),b.radioValue=g.value==="t",g.setAttribute("checked","checked"),o.appendChild(g),i=H.createDocumentFragment(),i.appendChild(o.lastChild),b.checkClone=i.cloneNode(!0).cloneNode(!0).lastChild.checked,b.appendChecked=g.checked,i.removeChild(g),i.appendChild(o),o.innerHTML="",a.getComputedStyle&&(h=H.createElement("div"),h.style.width="0",h.style.marginRight="0",o.style.width="2px",o.appendChild(h),b.reliableMarginRight=(parseInt((a.getComputedStyle(h,null)||{marginRight:0}).marginRight,10)||0)===0);if(o.attachEvent)for(m in{submit:1,change:1,focusin:1})l="on"+m,n=l in o,n||(o.setAttribute(l,"return;"),n=typeof o[l]=="function"),b[m+"Bubbles"]=n;return i.removeChild(o),i=e=f=h=o=g=null,K(function(){var a,c,d,e,f,g,h,i,k,l,m,p=H.getElementsByTagName("body")[0];!p||(h=1,i="position:absolute;top:0;left:0;width:1px;height:1px;margin:0;",k="visibility:hidden;border:0;",l="style='"+i+"border:5px solid #000;padding:0;'",m="<div "+l+"><div></div></div>"+"<table "+l+" cellpadding='0' cellspacing='0'>"+"<tr><td></td></tr></table>",a=H.createElement("div"),a.style.cssText=k+"width:0;height:0;position:static;top:0;margin-top:"+h+"px",p.insertBefore(a,p.firstChild),o=H.createElement("div"),a.appendChild(o),o.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>",j=o.getElementsByTagName("td"),n=j[0].offsetHeight===0,j[0].style.display="",j[1].style.display="none",b.reliableHiddenOffsets=n&&j[0].offsetHeight===0,o.innerHTML="",o.style.width=o.style.paddingLeft="1px",K.boxModel=b.boxModel=o.offsetWidth===2,typeof o.style.zoom!="undefined"&&(o.style.display="inline",o.style.zoom=1,b.inlineBlockNeedsLayout=o.offsetWidth===2,o.style.display="",o.innerHTML="<div style='width:4px;'></div>",b.shrinkWrapBlocks=o.offsetWidth!==2),o.style.cssText=i+k,o.innerHTML=m,c=o.firstChild,d=c.firstChild,f=c.nextSibling.firstChild.firstChild,g={doesNotAddBorder:d.offsetTop!==5,doesAddBorderForTableAndCells:f.offsetTop===5},d.style.position="fixed",d.style.top="20px",g.fixedPosition=d.offsetTop===20||d.offsetTop===15,d.style.position=d.style.top="",c.style.overflow="hidden",c.style.position="relative",g.subtractsBorderForOverflowNotVisible=d.offsetTop===-5,g.doesNotIncludeMarginInBodyOffset=p.offsetTop!==h,p.removeChild(a),o=a=null,K.extend(b,g))}),b}();var N=/^(?:\{.*\}|\[.*\])$/,O=/([A-Z])/g;K.extend({cache:{},uuid:0,expando:"jQuery"+(K.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){return a=a.nodeType?K.cache[a[K.expando]]:a[K.expando],!!a&&!E(a)},data:function(a,c,d,e){if(!!K.acceptData(a)){var f,g,h,i=K.expando,j=typeof c=="string",k=a.nodeType,l=k?K.cache:a,m=k?a[i]:a[i]&&i,n=c==="events";if((!m||!l[m]||!n&&!e&&!l[m].data)&&j&&d===b)return;m||(k?a[i]=m=++K.uuid:m=i),l[m]||(l[m]={},k||(l[m].toJSON=K.noop));if(typeof c=="object"||typeof c=="function")e?l[m]=K.extend(l[m],c):l[m].data=K.extend(l[m].data,c);return f=g=l[m],e||(g.data||(g.data={}),g=g.data),d!==b&&(g[K.camelCase(c)]=d),n&&!g[c]?f.events:(j?(h=g[c],h==null&&(h=g[K.camelCase(c)])):h=g,h)}},removeData:function(a,b,c){if(!!K.acceptData(a)){var d,e,f,g=K.expando,h=a.nodeType,i=h?K.cache:a,j=h?a[g]:g;if(!i[j])return;if(b){d=c?i[j]:i[j].data;if(d){K.isArray(b)||(b in d?b=[b]:(b=K.camelCase(b),b in d?b=[b]:b=b.split(" ")));for(e=0,f=b.length;e<f;e++)delete d[b[e]];if(!(c?E:K.isEmptyObject)(d))return}}if(!c){delete i[j].data;if(!E(i[j]))return}K.support.deleteExpando||!i.setInterval?delete i[j]:i[j]=null,h&&(K.support.deleteExpando?delete a[g]:a.removeAttribute?a.removeAttribute(g):a[g]=null)}},_data:function(a,b,c){return K.data(a,b,c,!0)},acceptData:function(a){if(a.nodeName){var b=K.noData[a.nodeName.toLowerCase()];if(b)return b!==!0&&a.getAttribute("classid")===b}return!0}}),K.fn.extend({data:function(a,c){var d,e,f,g=null;if(typeof a=="undefined"){if(this.length){g=K.data(this[0]);if(this[0].nodeType===1&&!K._data(this[0],"parsedAttrs")){e=this[0].attributes;for(var h=0,i=e.length;h<i;h++)f=e[h].name,f.indexOf("data-")===0&&(f=K.camelCase(f.substring(5)),F(this[0],f,g[f]));K._data(this[0],"parsedAttrs",!0)}}return g}return typeof a=="object"?this.each(function(){K.data(this,a)}):(d=a.split("."),d[1]=d[1]?"."+d[1]:"",c===b?(g=this.triggerHandler("getData"+d[1]+"!",[d[0]]),g===b&&this.length&&(g=K.data(this[0],a),g=F(this[0],a,g)),g===b&&d[1]?this.data(d[0]):g):this.each(function(){var b=K(this),e=[d[0],c];b.triggerHandler("setData"+d[1]+"!",e),K.data(this,a,c),b.triggerHandler("changeData"+d[1]+"!",e)}))},removeData:function(a){return this.each(function(){K.removeData(this,a)})}}),K.extend({_mark:function(a,b){a&&(b=(b||"fx")+"mark",K._data(a,b,(K._data(a,b)||0)+1))},_unmark:function(a,b,c){a!==!0&&(c=b,b=a,a=!1);if(b){c=c||"fx";var d=c+"mark",e=a?0:(K._data(b,d)||1)-1;e?K._data(b,d,e):(K.removeData(b,d,!0),D(b,c,"mark"))}},queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=K._data(a,b),c&&(!d||K.isArray(c)?d=K._data(a,b,K.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||"fx";var c=K.queue(a,b),d=c.shift(),e={};d==="inprogress"&&(d=c.shift()),d&&(b==="fx"&&c.unshift("inprogress"),K._data(a,b+".run",e),d.call(a,function(){K.dequeue(a,b)},e)),c.length||(K.removeData(a,b+"queue "+b+".run",!0),D(a,b,"queue"))}}),K.fn.extend({queue:function(a,c){return typeof a!="string"&&(c=a,a="fx"),c===b?K.queue(this[0],a):this.each(function(){var b=K.queue(this,a,c);a==="fx"&&b[0]!=="inprogress"&&K.dequeue(this,a)})},dequeue:function(a){return this.each(function(){K.dequeue(this,a)})},delay:function(a,b){return a=K.fx?K.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){function d(){--h||e.resolveWith(f,[f])}typeof a!="string"&&(c=a,a=b),a=a||"fx";var e=K.Deferred(),f=this,g=f.length,h=1,i=a+"defer",j=a+"queue",k=a+"mark",l;while(g--)if(l=K.data(f[g],i,b,!0)||(K.data(f[g],j,b,!0)||K.data(f[g],k,b,!0))&&K.data(f[g],i,K.Callbacks("once memory"),!0))h++,l.add(d);return d(),e.promise()}});var P=/[\n\t\r]/g,Q=/\s+/,R=/\r/g,S=/^(?:button|input)$/i,T=/^(?:button|input|object|select|textarea)$/i,U=/^a(?:rea)?$/i,V=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,W=K.support.getSetAttribute,X,Y,Z;K.fn.extend({attr:function(a,b){return K.access(this,a,b,!0,K.attr)},removeAttr:function(a){return this.each(function(){K.removeAttr(this,a)})},prop:function(a,b){return K.access(this,a,b,!0,K.prop)},removeProp:function(a){return a=K.propFix[a]||a,this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,f,g,h;if(K.isFunction(a))return this.each(function(b){K(this).addClass(a.call(this,b,this.className))});if(a&&typeof a=="string"){b=a.split(Q);for(c=0,d=this.length;c<d;c++){e=this[c];if(e.nodeType===1)if(!e.className&&b.length===1)e.className=a;else{f=" "+e.className+" ";for(g=0,h=b.length;g<h;g++)~f.indexOf(" "+b[g]+" ")||(f+=b[g]+" ");e.className=K.trim(f)}}}return this},removeClass:function(a){var c,d,e,f,g,h,i;if(K.isFunction(a))return this.each(function(b){K(this).removeClass(a.call(this,b,this.className))});if(a&&typeof a=="string"||a===b){c=(a||"").split(Q);for(d=0,e=this.length;d<e;d++){f=this[d];if(f.nodeType===1&&f.className)if(a){g=(" "+f.className+" ").replace(P," ");for(h=0,i=c.length;h<i;h++)g=g.replace(" "+c[h]+" "," ");f.className=K.trim(g)}else f.className=""}}return this},toggleClass:function(a,b){var c=typeof a,d=typeof b=="boolean";return K.isFunction(a)?this.each(function(c){K(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if(c==="string"){var e,f=0,g=K(this),h=b,i=a.split(Q);while(e=i[f++])h=d?h:!g.hasClass(e),g[h?"addClass":"removeClass"](e)}else if(c==="undefined"||c==="boolean")this.className&&K._data(this,"__className__",this.className),this.className=this.className||a===!1?"":K._data(this,"__className__")||""})},hasClass:function(a){var b=" "+a+" ",c=0,d=this.length;for(;c<d;c++)if(this[c].nodeType===1&&(" "+this[c].className+" ").replace(P," ").indexOf(b)>-1)return!0;return!1},val:function(a){var c,d,e,f=this[0];if(!!arguments.length)return e=K.isFunction(a),this.each(function(d){var f=K(this),g;if(this.nodeType===1){e?g=a.call(this,d,f.val()):g=a,g==null?g="":typeof g=="number"?g+="":K.isArray(g)&&(g=K.map(g,function(a){return a==null?"":a+""})),c=K.valHooks[this.nodeName.toLowerCase()]||K.valHooks[this.type];if(!c||!("set"in c)||c.set(this,g,"value")===b)this.value=g}});if(f)return c=K.valHooks[f.nodeName.toLowerCase()]||K.valHooks[f.type],c&&"get"in c&&(d=c.get(f,"value"))!==b?d:(d=f.value,typeof d=="string"?d.replace(R,""):d==null?"":d)}}),K.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d,e,f=a.selectedIndex,g=[],h=a.options,i=a.type==="select-one";if(f<0)return null;c=i?f:0,d=i?f+1:h.length;for(;c<d;c++){e=h[c];if(e.selected&&(K.support.optDisabled?!e.disabled:e.getAttribute("disabled")===null)&&(!e.parentNode.disabled||!K.nodeName(e.parentNode,"optgroup"))){b=K(e).val();if(i)return b;g.push(b)}}return i&&!g.length&&h.length?K(h[f]).val():g},set:function(a,b){var c=K.makeArray(b);return K(a).find("option").each(function(){this.selected=K.inArray(K(this).val(),c)>=0}),c.length||(a.selectedIndex=-1),c}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(a,c,d,e){var f,g,h,i=a.nodeType;if(!!a&&i!==3&&i!==8&&i!==2){if(e&&c in K.attrFn)return K(a)[c](d);if(typeof a.getAttribute=="undefined")return K.prop(a,c,d);h=i!==1||!K.isXMLDoc(a),h&&(c=c.toLowerCase(),g=K.attrHooks[c]||(V.test(c)?Y:X));if(d!==b){if(d===null){K.removeAttr(a,c);return}return g&&"set"in g&&h&&(f=g.set(a,d,c))!==b?f:(a.setAttribute(c,""+d),d)}return g&&"get"in g&&h&&(f=g.get(a,c))!==null?f:(f=a.getAttribute(c),f===null?b:f)}},removeAttr:function(a,b){var c,d,e,f,g=0;if(b&&a.nodeType===1){d=b.toLowerCase().split(Q),f=d.length;for(;g<f;g++)e=d[g],e&&(c=K.propFix[e]||e,K.attr(a,e,""),a.removeAttribute(W?e:c),V.test(e)&&c in a&&(a[c]=!1))}},attrHooks:{type:{set:function(a,b){if(S.test(a.nodeName)&&a.parentNode)K.error("type property can't be changed");else if(!K.support.radioValue&&b==="radio"&&K.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}},value:{get:function(a,b){return X&&K.nodeName(a,"button")?X.get(a,b):b in a?a.value:null},set:function(a,b,c){if(X&&K.nodeName(a,"button"))return X.set(a,b,c);a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,f,g,h=a.nodeType;if(!!a&&h!==3&&h!==8&&h!==2)return g=h!==1||!K.isXMLDoc(a),g&&(c=K.propFix[c]||c,f=K.propHooks[c]),d!==b?f&&"set"in f&&(e=f.set(a,d,c))!==b?e:a[c]=d:f&&"get"in f&&(e=f.get(a,c))!==null?e:a[c]},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):T.test(a.nodeName)||U.test(a.nodeName)&&a.href?0:b}}}}),K.attrHooks.tabindex=K.propHooks.tabIndex,Y={get:function(a,c){var d,e=K.prop(a,c);return e===!0||typeof e!="boolean"&&(d=a.getAttributeNode(c))&&d.nodeValue!==!1?c.toLowerCase():b},set:function(a,b,c){var d;return b===!1?K.removeAttr(a,c):(d=K.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase())),c}},W||(Z={name:!0,id:!0},X=K.valHooks.button={get:function(a,c){var d;return d=a.getAttributeNode(c),d&&(Z[c]?d.nodeValue!=="":d.specified)?d.nodeValue:b},set:function(a,b,c){var d=a.getAttributeNode(c);return d||(d=H.createAttribute(c),a.setAttributeNode(d)),d.nodeValue=b+""}},K.attrHooks.tabindex.set=X.set,K.each(["width","height"],function(a,b){K.attrHooks[b]=K.extend(K.attrHooks[b],{set:function(a,c){if(c==="")return a.setAttribute(b,"auto"),c}})}),K.attrHooks.contenteditable={get:X.get,set:function(a,b,c){b===""&&(b="false"),X.set(a,b,c)}}),K.support.hrefNormalized||K.each(["href","src","width","height"],function(a,c){K.attrHooks[c]=K.extend(K.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return d===null?b:d}})}),K.support.style||(K.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=""+b}}),K.support.optSelected||(K.propHooks.selected=K.extend(K.propHooks.selected,{get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}})),K.support.enctype||(K.propFix.enctype="encoding"),K.support.checkOn||K.each(["radio","checkbox"],function(){K.valHooks[this]={get:function(a){return a.getAttribute("value")===null?"on":a.value}}}),K.each(["radio","checkbox"],function(){K.valHooks[this]=K.extend(K.valHooks[this],{set:function(a,b){if(K.isArray(b))return a.checked=K.inArray(K(a).val(),b)>=0}})});var $=/^(?:textarea|input|select)$/i,_=/^([^\.]*)?(?:\.(.+))?$/,ba=/\bhover(\.\S+)?\b/,bb=/^key/,bc=/^(?:mouse|contextmenu)|click/,bd=/^(?:focusinfocus|focusoutblur)$/,be=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,bf=function(a){var b=be.exec(a);return b&&(b[1]=(b[1]||"").toLowerCase(),b[3]=b[3]&&new RegExp("(?:^|\\s)"+b[3]+"(?:\\s|$)")),b},bg=function(a,b){var c=a.attributes||{};return(!b[1]||a.nodeName.toLowerCase()===b[1])&&(!b[2]||(c.id||{}).value===b[2])&&(!b[3]||b[3].test((c["class"]||{}).value))},bh=function(a){return K.event.special.hover?a:a.replace(ba,"mouseenter$1 mouseleave$1")};K.event={add:function(a,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r;if(!(a.nodeType===3||a.nodeType===8||!c||!d||!(g=K._data(a)))){d.handler&&(o=d,d=o.handler),d.guid||(d.guid=K.guid++),i=g.events,i||(g.events=i={}),h=g.handle,h||(g.handle=h=function(a){return typeof K=="undefined"||!!a&&K.event.triggered===a.type?b:K.event.dispatch.apply(h.elem,arguments)},h.elem=a),c=K.trim(bh(c)).split(" ");for(j=0;j<c.length;j++){k=_.exec(c[j])||[],l=k[1],m=(k[2]||"").split(".").sort(),r=K.event.special[l]||{},l=
(f?r.delegateType:r.bindType)||l,r=K.event.special[l]||{},n=K.extend({type:l,origType:k[1],data:e,handler:d,guid:d.guid,selector:f,quick:bf(f),namespace:m.join(".")},o),q=i[l];if(!q){q=i[l]=[],q.delegateCount=0;if(!r.setup||r.setup.call(a,e,m,h)===!1)a.addEventListener?a.addEventListener(l,h,!1):a.attachEvent&&a.attachEvent("on"+l,h)}r.add&&(r.add.call(a,n),n.handler.guid||(n.handler.guid=d.guid)),f?q.splice(q.delegateCount++,0,n):q.push(n),K.event.global[l]=!0}a=null}},global:{},remove:function(a,b,c,d,e){var f=K.hasData(a)&&K._data(a),g,h,i,j,k,l,m,n,o,p,q,r;if(!!f&&!!(n=f.events)){b=K.trim(bh(b||"")).split(" ");for(g=0;g<b.length;g++){h=_.exec(b[g])||[],i=j=h[1],k=h[2];if(!i){for(i in n)K.event.remove(a,i+b[g],c,d,!0);continue}o=K.event.special[i]||{},i=(d?o.delegateType:o.bindType)||i,q=n[i]||[],l=q.length,k=k?new RegExp("(^|\\.)"+k.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(m=0;m<q.length;m++)r=q[m],(e||j===r.origType)&&(!c||c.guid===r.guid)&&(!k||k.test(r.namespace))&&(!d||d===r.selector||d==="**"&&r.selector)&&(q.splice(m--,1),r.selector&&q.delegateCount--,o.remove&&o.remove.call(a,r));q.length===0&&l!==q.length&&((!o.teardown||o.teardown.call(a,k)===!1)&&K.removeEvent(a,i,f.handle),delete n[i])}K.isEmptyObject(n)&&(p=f.handle,p&&(p.elem=null),K.removeData(a,["events","handle"],!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,f){if(!e||e.nodeType!==3&&e.nodeType!==8){var g=c.type||c,h=[],i,j,k,l,m,n,o,p,q,r;if(bd.test(g+K.event.triggered))return;g.indexOf("!")>=0&&(g=g.slice(0,-1),j=!0),g.indexOf(".")>=0&&(h=g.split("."),g=h.shift(),h.sort());if((!e||K.event.customEvent[g])&&!K.event.global[g])return;c=typeof c=="object"?c[K.expando]?c:new K.Event(g,c):new K.Event(g),c.type=g,c.isTrigger=!0,c.exclusive=j,c.namespace=h.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,n=g.indexOf(":")<0?"on"+g:"";if(!e){i=K.cache;for(k in i)i[k].events&&i[k].events[g]&&K.event.trigger(c,d,i[k].handle.elem,!0);return}c.result=b,c.target||(c.target=e),d=d!=null?K.makeArray(d):[],d.unshift(c),o=K.event.special[g]||{};if(o.trigger&&o.trigger.apply(e,d)===!1)return;q=[[e,o.bindType||g]];if(!f&&!o.noBubble&&!K.isWindow(e)){r=o.delegateType||g,l=bd.test(r+g)?e:e.parentNode,m=null;for(;l;l=l.parentNode)q.push([l,r]),m=l;m&&m===e.ownerDocument&&q.push([m.defaultView||m.parentWindow||a,r])}for(k=0;k<q.length&&!c.isPropagationStopped();k++)l=q[k][0],c.type=q[k][1],p=(K._data(l,"events")||{})[c.type]&&K._data(l,"handle"),p&&p.apply(l,d),p=n&&l[n],p&&K.acceptData(l)&&p.apply(l,d)===!1&&c.preventDefault();return c.type=g,!f&&!c.isDefaultPrevented()&&(!o._default||o._default.apply(e.ownerDocument,d)===!1)&&(g!=="click"||!K.nodeName(e,"a"))&&K.acceptData(e)&&n&&e[g]&&(g!=="focus"&&g!=="blur"||c.target.offsetWidth!==0)&&!K.isWindow(e)&&(m=e[n],m&&(e[n]=null),K.event.triggered=g,e[g](),K.event.triggered=b,m&&(e[n]=m)),c.result}},dispatch:function(c){c=K.event.fix(c||a.event);var d=(K._data(this,"events")||{})[c.type]||[],e=d.delegateCount,f=[].slice.call(arguments,0),g=!c.exclusive&&!c.namespace,h=[],i,j,k,l,m,n,o,p,q,r,s;f[0]=c,c.delegateTarget=this;if(e&&!c.target.disabled&&(!c.button||c.type!=="click")){l=K(this),l.context=this.ownerDocument||this;for(k=c.target;k!=this;k=k.parentNode||this){n={},p=[],l[0]=k;for(i=0;i<e;i++)q=d[i],r=q.selector,n[r]===b&&(n[r]=q.quick?bg(k,q.quick):l.is(r)),n[r]&&p.push(q);p.length&&h.push({elem:k,matches:p})}}d.length>e&&h.push({elem:this,matches:d.slice(e)});for(i=0;i<h.length&&!c.isPropagationStopped();i++){o=h[i],c.currentTarget=o.elem;for(j=0;j<o.matches.length&&!c.isImmediatePropagationStopped();j++){q=o.matches[j];if(g||!c.namespace&&!q.namespace||c.namespace_re&&c.namespace_re.test(q.namespace))c.data=q.data,c.handleObj=q,m=((K.event.special[q.origType]||{}).handle||q.handler).apply(o.elem,f),m!==b&&(c.result=m,m===!1&&(c.preventDefault(),c.stopPropagation()))}}return c.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return a.which==null&&(a.which=b.charCode!=null?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,c){var d,e,f,g=c.button,h=c.fromElement;return a.pageX==null&&c.clientX!=null&&(d=a.target.ownerDocument||H,e=d.documentElement,f=d.body,a.pageX=c.clientX+(e&&e.scrollLeft||f&&f.scrollLeft||0)-(e&&e.clientLeft||f&&f.clientLeft||0),a.pageY=c.clientY+(e&&e.scrollTop||f&&f.scrollTop||0)-(e&&e.clientTop||f&&f.clientTop||0)),!a.relatedTarget&&h&&(a.relatedTarget=h===a.target?c.toElement:h),!a.which&&g!==b&&(a.which=g&1?1:g&2?3:g&4?2:0),a}},fix:function(a){if(a[K.expando])return a;var c,d,e=a,f=K.event.fixHooks[a.type]||{},g=f.props?this.props.concat(f.props):this.props;a=K.Event(e);for(c=g.length;c;)d=g[--c],a[d]=e[d];return a.target||(a.target=e.srcElement||H),a.target.nodeType===3&&(a.target=a.target.parentNode),a.metaKey===b&&(a.metaKey=a.ctrlKey),f.filter?f.filter(a,e):a},special:{ready:{setup:K.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){K.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){var e=K.extend(new K.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?K.event.trigger(e,null,b):K.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},K.event.handle=K.event.dispatch,K.removeEvent=H.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)},K.Event=function(a,b){if(!(this instanceof K.Event))return new K.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?B:C):this.type=a,b&&K.extend(this,b),this.timeStamp=a&&a.timeStamp||K.now(),this[K.expando]=!0},K.Event.prototype={preventDefault:function(){this.isDefaultPrevented=B;var a=this.originalEvent;!a||(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=B;var a=this.originalEvent;!a||(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=B,this.stopPropagation()},isDefaultPrevented:C,isPropagationStopped:C,isImmediatePropagationStopped:C},K.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){K.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c=this,d=a.relatedTarget,e=a.handleObj,f=e.selector,g;if(!d||d!==c&&!K.contains(c,d))a.type=e.origType,g=e.handler.apply(this,arguments),a.type=b;return g}}}),K.support.submitBubbles||(K.event.special.submit={setup:function(){if(K.nodeName(this,"form"))return!1;K.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=K.nodeName(c,"input")||K.nodeName(c,"button")?c.form:b;d&&!d._submit_attached&&(K.event.add(d,"submit._submit",function(a){this.parentNode&&!a.isTrigger&&K.event.simulate("submit",this.parentNode,a,!0)}),d._submit_attached=!0)})},teardown:function(){if(K.nodeName(this,"form"))return!1;K.event.remove(this,"._submit")}}),K.support.changeBubbles||(K.event.special.change={setup:function(){if($.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")K.event.add(this,"propertychange._change",function(a){a.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),K.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1,K.event.simulate("change",this,a,!0))});return!1}K.event.add(this,"beforeactivate._change",function(a){var b=a.target;$.test(b.nodeName)&&!b._change_attached&&(K.event.add(b,"change._change",function(a){this.parentNode&&!a.isSimulated&&!a.isTrigger&&K.event.simulate("change",this.parentNode,a,!0)}),b._change_attached=!0)})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||b.type!=="radio"&&b.type!=="checkbox")return a.handleObj.handler.apply(this,arguments)},teardown:function(){return K.event.remove(this,"._change"),$.test(this.nodeName)}}),K.support.focusinBubbles||K.each({focus:"focusin",blur:"focusout"},function(a,b){var c=0,d=function(a){K.event.simulate(b,a.target,K.event.fix(a),!0)};K.event.special[b]={setup:function(){c++===0&&H.addEventListener(a,d,!0)},teardown:function(){--c===0&&H.removeEventListener(a,d,!0)}}}),K.fn.extend({on:function(a,c,d,e,f){var g,h;if(typeof a=="object"){typeof c!="string"&&(d=c,c=b);for(h in a)this.on(h,c,d,a[h],f);return this}d==null&&e==null?(e=c,d=c=b):e==null&&(typeof c=="string"?(e=d,d=b):(e=d,d=c,c=b));if(e===!1)e=C;else if(!e)return this;return f===1&&(g=e,e=function(a){return K().off(a),g.apply(this,arguments)},e.guid=g.guid||(g.guid=K.guid++)),this.each(function(){K.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on.call(this,a,b,c,d,1)},off:function(a,c,d){if(a&&a.preventDefault&&a.handleObj){var e=a.handleObj;return K(a.delegateTarget).off(e.namespace?e.type+"."+e.namespace:e.type,e.selector,e.handler),this}if(typeof a=="object"){for(var f in a)this.off(f,c,a[f]);return this}if(c===!1||typeof c=="function")d=c,c=b;return d===!1&&(d=C),this.each(function(){K.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){return K(this.context).on(a,this.selector,b,c),this},die:function(a,b){return K(this.context).off(a,this.selector||"**",b),this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return arguments.length==1?this.off(a,"**"):this.off(b,a,c)},trigger:function(a,b){return this.each(function(){K.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return K.event.trigger(a,b,this[0],!0)},toggle:function(a){var b=arguments,c=a.guid||K.guid++,d=0,e=function(c){var e=(K._data(this,"lastToggle"+a.guid)||0)%d;return K._data(this,"lastToggle"+a.guid,e+1),c.preventDefault(),b[e].apply(this,arguments)||!1};e.guid=c;while(d<b.length)b[d++].guid=c;return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),K.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){K.fn[b]=function(a,c){return c==null&&(c=a,a=null),arguments.length>0?this.on(b,null,a,c):this.trigger(b)},K.attrFn&&(K.attrFn[b]=!0),bb.test(b)&&(K.event.fixHooks[b]=K.event.keyHooks),bc.test(b)&&(K.event.fixHooks[b]=K.event.mouseHooks)}),function(){function a(a,b,c,d,f,g){for(var h=0,i=d.length;h<i;h++){var j=d[h];if(j){var k=!1;j=j[a];while(j){if(j[e]===c){k=d[j.sizset];break}if(j.nodeType===1){g||(j[e]=c,j.sizset=h);if(typeof b!="string"){if(j===b){k=!0;break}}else if(m.filter(b,[j]).length>0){k=j;break}}j=j[a]}d[h]=k}}}function c(a,b,c,d,f,g){for(var h=0,i=d.length;h<i;h++){var j=d[h];if(j){var k=!1;j=j[a];while(j){if(j[e]===c){k=d[j.sizset];break}j.nodeType===1&&!g&&(j[e]=c,j.sizset=h);if(j.nodeName.toLowerCase()===b){k=j;break}j=j[a]}d[h]=k}}}var d=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,e="sizcache"+(Math.random()+"").replace(".",""),f=0,g=Object.prototype.toString,h=!1,i=!0,j=/\\/g,k=/\r\n/g,l=/\W/;[0,0].sort(function(){return i=!1,0});var m=function(a,b,c,e){c=c||[],b=b||H;var f=b;if(b.nodeType!==1&&b.nodeType!==9)return[];if(!a||typeof a!="string")return c;var h,i,j,k,l,n,q,r,t=!0,u=m.isXML(b),v=[],x=a;do{d.exec(""),h=d.exec(x);if(h){x=h[3],v.push(h[1]);if(h[2]){k=h[3];break}}}while(h);if(v.length>1&&p.exec(a))if(v.length===2&&o.relative[v[0]])i=w(v[0]+v[1],b,e);else{i=o.relative[v[0]]?[b]:m(v.shift(),b);while(v.length)a=v.shift(),o.relative[a]&&(a+=v.shift()),i=w(a,i,e)}else{!e&&v.length>1&&b.nodeType===9&&!u&&o.match.ID.test(v[0])&&!o.match.ID.test(v[v.length-1])&&(l=m.find(v.shift(),b,u),b=l.expr?m.filter(l.expr,l.set)[0]:l.set[0]);if(b){l=e?{expr:v.pop(),set:s(e)}:m.find(v.pop(),v.length!==1||v[0]!=="~"&&v[0]!=="+"||!b.parentNode?b:b.parentNode,u),i=l.expr?m.filter(l.expr,l.set):l.set,v.length>0?j=s(i):t=!1;while(v.length)n=v.pop(),q=n,o.relative[n]?q=v.pop():n="",q==null&&(q=b),o.relative[n](j,q,u)}else j=v=[]}j||(j=i),j||m.error(n||a);if(g.call(j)==="[object Array]")if(!t)c.push.apply(c,j);else if(b&&b.nodeType===1)for(r=0;j[r]!=null;r++)j[r]&&(j[r]===!0||j[r].nodeType===1&&m.contains(b,j[r]))&&c.push(i[r]);else for(r=0;j[r]!=null;r++)j[r]&&j[r].nodeType===1&&c.push(i[r]);else s(j,c);return k&&(m(k,f,c,e),m.uniqueSort(c)),c};m.uniqueSort=function(a){if(u){h=i,a.sort(u);if(h)for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1)}return a},m.matches=function(a,b){return m(a,null,null,b)},m.matchesSelector=function(a,b){return m(b,null,null,[a]).length>0},m.find=function(a,b,c){var d,e,f,g,h,i;if(!a)return[];for(e=0,f=o.order.length;e<f;e++){h=o.order[e];if(g=o.leftMatch[h].exec(a)){i=g[1],g.splice(1,1);if(i.substr(i.length-1)!=="\\"){g[1]=(g[1]||"").replace(j,""),d=o.find[h](g,b,c);if(d!=null){a=a.replace(o.match[h],"");break}}}}return d||(d=typeof b.getElementsByTagName!="undefined"?b.getElementsByTagName("*"):[]),{set:d,expr:a}},m.filter=function(a,c,d,e){var f,g,h,i,j,k,l,n,p,q=a,r=[],s=c,t=c&&c[0]&&m.isXML(c[0]);while(a&&c.length){for(h in o.filter)if((f=o.leftMatch[h].exec(a))!=null&&f[2]){k=o.filter[h],l=f[1],g=!1,f.splice(1,1);if(l.substr(l.length-1)==="\\")continue;s===r&&(r=[]);if(o.preFilter[h]){f=o.preFilter[h](f,s,d,r,e,t);if(!f)g=i=!0;else if(f===!0)continue}if(f)for(n=0;(j=s[n])!=null;n++)j&&(i=k(j,f,n,s),p=e^i,d&&i!=null?p?g=!0:s[n]=!1:p&&(r.push(j),g=!0));if(i!==b){d||(s=r),a=a.replace(o.match[h],"");if(!g)return[];break}}if(a===q){if(g!=null)break;m.error(a)}q=a}return s},m.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)};var n=m.getText=function(a){var b,c,d=a.nodeType,e="";if(d){if(d===1||d===9){if(typeof a.textContent=="string")return a.textContent;if(typeof a.innerText=="string")return a.innerText.replace(k,"");for(a=a.firstChild;a;a=a.nextSibling)e+=n(a)}else if(d===3||d===4)return a.nodeValue}else for(b=0;c=a[b];b++)c.nodeType!==8&&(e+=n(c));return e},o=m.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c=typeof b=="string",d=c&&!l.test(b),e=c&&!d;d&&(b=b.toLowerCase());for(var f=0,g=a.length,h;f<g;f++)if(h=a[f]){while((h=h.previousSibling)&&h.nodeType!==1);a[f]=e||h&&h.nodeName.toLowerCase()===b?h||!1:h===b}e&&m.filter(b,a,!0)},">":function(a,b){var c,d=typeof b=="string",e=0,f=a.length;if(d&&!l.test(b)){b=b.toLowerCase();for(;e<f;e++){c=a[e];if(c){var g=c.parentNode;a[e]=g.nodeName.toLowerCase()===b?g:!1}}}else{for(;e<f;e++)c=a[e],c&&(a[e]=d?c.parentNode:c.parentNode===b);d&&m.filter(b,a,!0)}},"":function(b,d,e){var g,h=f++,i=a;typeof d=="string"&&!l.test(d)&&(d=d.toLowerCase(),g=d,i=c),i("parentNode",d,h,b,g,e)},"~":function(b,d,e){var g,h=f++,i=a;typeof d=="string"&&!l.test(d)&&(d=d.toLowerCase(),g=d,i=c),i("previousSibling",d,h,b,g,e)}},find:{ID:function(a,b,c){if(typeof b.getElementById!="undefined"&&!c){var d=b.getElementById(a[1]);return d&&d.parentNode?[d]:[]}},NAME:function(a,b){if(typeof b.getElementsByName!="undefined"){var c=[],d=b.getElementsByName(a[1]);for(var e=0,f=d.length;e<f;e++)d[e].getAttribute("name")===a[1]&&c.push(d[e]);return c.length===0?null:c}},TAG:function(a,b){if(typeof b.getElementsByTagName!="undefined")return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(j,"")+" ";if(f)return a;for(var g=0,h;(h=b[g])!=null;g++)h&&(e^(h.className&&(" "+h.className+" ").replace(/[\t\n\r]/g," ").indexOf(a)>=0)?c||d.push(h):c&&(b[g]=!1));return!1},ID:function(a){return a[1].replace(j,"")},TAG:function(a,b){return a[1].replace(j,"").toLowerCase()},CHILD:function(a){if(a[1]==="nth"){a[2]||m.error(a[0]),a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0,a[3]=b[3]-0}else a[2]&&m.error(a[0]);return a[0]=f++,a},ATTR:function(a,b,c,d,e,f){var g=a[1]=a[1].replace(j,"");return!f&&o.attrMap[g]&&(a[1]=o.attrMap[g]),a[4]=(a[4]||a[5]||"").replace(j,""),a[2]==="~="&&(a[4]=" "+a[4]+" "),a},PSEUDO:function(a,b,c,e,f){if(a[1]==="not"){if(!((d.exec(a[3])||"").length>1||/^\w/.test(a[3]))){var g=m.filter(a[3],b,c,!0^f);return c||e.push.apply(e,g),!1}a[3]=m(a[3],null,null,b)}else if(o.match.POS.test(a[0])||o.match.CHILD.test(a[0]))return!0;return a},POS:function(a){return a.unshift(!0),a}},filters:{enabled:function(a){return a.disabled===!1&&a.type!=="hidden"},disabled:function(a){return a.disabled===!0},checked:function(a){return a.checked===!0},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,c){return!!m(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),c=a.type;return a.nodeName.toLowerCase()==="input"&&"text"===c&&(b===c||b===null)},radio:function(a){return a.nodeName.toLowerCase()==="input"&&"radio"===a.type},checkbox:function(a){return a.nodeName.toLowerCase()==="input"&&"checkbox"===a.type},file:function(a){return a.nodeName.toLowerCase()==="input"&&"file"===a.type},password:function(a){return a.nodeName.toLowerCase()==="input"&&"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"submit"===a.type},image:function(a){return a.nodeName.toLowerCase()==="input"&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&"button"===a.type||b==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return b===0},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=o.filters[e];if(f)return f(a,c,b,d);if(e==="contains")return(a.textContent||a.innerText||n([a])||"").indexOf(b[3])>=0;if(e==="not"){var g=b[3];for(var h=0,i=g.length;h<i;h++)if(g[h]===a)return!1;return!0}m.error(e)},CHILD:function(a,b){var c,d,f,g,h,i,j,k=b[1],l=a;switch(k){case"only":case"first":while(l=l.previousSibling)if(l.nodeType===1)return!1;if(k==="first")return!0;l=a;case"last":while(l=l.nextSibling)if(l.nodeType===1)return!1;return!0;case"nth":c=b[2],d=b[3];if(c===1&&d===0)return!0;f=b[0],g=a.parentNode;if(g&&(g[e]!==f||!a.nodeIndex)){i=0;for(l=g.firstChild;l;l=l.nextSibling)l.nodeType===1&&(l.nodeIndex=++i);g[e]=f}return j=a.nodeIndex-d,c===0?j===0:j%c===0&&j/c>=0}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b},TAG:function(a,b){return b==="*"&&a.nodeType===1||!!a.nodeName&&a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],d=m.attr?m.attr(a,c):o.attrHandle[c]?o.attrHandle[c](a):a[c]!=null?a[c]:a.getAttribute(c),e=d+"",f=b[2],g=b[4];return d==null?f==="!=":!f&&m.attr?d!=null:f==="="?e===g:f==="*="?e.indexOf(g)>=0:f==="~="?(" "+e+" ").indexOf(g)>=0:g?f==="!="?e!==g:f==="^="?e.indexOf(g)===0:f==="$="?e.substr(e.length-g.length)===g:f==="|="?e===g||e.substr(0,g.length+1)===g+"-":!1:e&&d!==!1},POS:function(a,b,c,d){var e=b[2],f=o.setFilters[e];if(f)return f(a,c,b,d)}}},p=o.match.POS,q=function(a,b){return"\\"+(b-0+1)};for(var r in o.match)o.match[r]=new RegExp(o.match[r].source+/(?![^\[]*\])(?![^\(]*\))/.source),o.leftMatch[r]=new RegExp(/(^(?:.|\r|\n)*?)/.source+o.match[r].source.replace(/\\(\d+)/g,q));var s=function(a,b){return a=Array.prototype.slice.call(a,0),b?(b.push.apply(b,a),b):a};try{Array.prototype.slice.call(H.documentElement.childNodes,0)[0].nodeType}catch(t){s=function(a,b){var c=0,d=b||[];if(g.call(a)==="[object Array]")Array.prototype.push.apply(d,a);else if(typeof a.length=="number")for(var e=a.length;c<e;c++)d.push(a[c]);else for(;a[c];c++)d.push(a[c]);return d}}var u,v;H.documentElement.compareDocumentPosition?u=function(a,b){return a===b?(h=!0,0):!a.compareDocumentPosition||!b.compareDocumentPosition?a.compareDocumentPosition?-1:1:a.compareDocumentPosition(b)&4?-1:1}:(u=function(a,b){if(a===b)return h=!0,0;if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],f=[],g=a.parentNode,i=b.parentNode,j=g;if(g===i)return v(a,b);if(!g)return-1;if(!i)return 1;while(j)e.unshift(j),j=j.parentNode;j=i;while(j)f.unshift(j),j=j.parentNode;c=e.length,d=f.length;for(var k=0;k<c&&k<d;k++)if(e[k]!==f[k])return v(e[k],f[k]);return k===c?v(a,f[k],-1):v(e[k],b,1)},v=function(a,b,c){if(a===b)return c;var d=a.nextSibling;while(d){if(d===b)return-1;d=d.nextSibling}return 1}),function(){var a=H.createElement("div"),c="script"+(new Date).getTime(),d=H.documentElement;a.innerHTML="<a name='"+c+"'/>",d.insertBefore(a,d.firstChild),H.getElementById(c)&&(o.find.ID=function(a,c,d){if(typeof c.getElementById!="undefined"&&!d){var e=c.getElementById(a[1]);return e?e.id===a[1]||typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id").nodeValue===a[1]?[e]:b:[]}},o.filter.ID=function(a,b){var c=typeof a.getAttributeNode!="undefined"&&a.getAttributeNode("id");return a.nodeType===1&&c&&c.nodeValue===b}),d.removeChild(a),d=a=null}(),function(){var a=H.createElement("div");a.appendChild(H.createComment("")),a.getElementsByTagName("*").length>0&&(o.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if(a[1]==="*"){var d=[];for(var e=0;c[e];e++)c[e].nodeType===1&&d.push(c[e]);c=d}return c}),a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!="undefined"&&a.firstChild.getAttribute("href")!=="#"&&(o.attrHandle.href=function(a){return a.getAttribute("href",2)}),a=null}(),H.querySelectorAll&&function(){var a=m,b=H.createElement("div"),c="__sizzle__";b.innerHTML="<p class='TEST'></p>";if(!b.querySelectorAll||b.querySelectorAll(".TEST").length!==0){m=function(b,d,e,f){d=d||H;if(!f&&!m.isXML(d)){var g=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(g&&(d.nodeType===1||d.nodeType===9)){if(g[1])return s(d.getElementsByTagName(b),e);if(g[2]&&o.find.CLASS&&d.getElementsByClassName)return s(d.getElementsByClassName(g[2]),e)}if(d.nodeType===9){if(b==="body"&&d.body)return s([d.body],e);if(g&&g[3]){var h=d.getElementById(g[3]);if(!h||!h.parentNode)return s([],e);if(h.id===g[3])return s([h],e)}try{return s(d.querySelectorAll(b),e)}catch(i){}}else if(d.nodeType===1&&d.nodeName.toLowerCase()!=="object"){var j=d,k=d.getAttribute("id"),l=k||c,n=d.parentNode,p=/^\s*[+~]/.test(b);k?l=l.replace(/'/g,"\\$&"):d.setAttribute("id",l),p&&n&&(d=d.parentNode);try{if(!p||n)return s(d.querySelectorAll("[id='"+l+"'] "+b),e)}catch(q){}finally{k||j.removeAttribute("id")}}}return a(b,d,e,f)};for(var d in a)m[d]=a[d];b=null}}(),function(){var a=H.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var c=!b.call(H.createElement("div"),"div"),d=!1;try{b.call(H.documentElement,"[test!='']:sizzle")}catch(e){d=!0}m.matchesSelector=function(a,e){e=e.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!m.isXML(a))try{if(d||!o.match.PSEUDO.test(e)&&!/!=/.test(e)){var f=b.call(a,e);if(f||!c||a.document&&a.document.nodeType!==11)return f}}catch(g){}return m(e,null,null,[a]).length>0}}}(),function(){var a=H.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";if(!!a.getElementsByClassName&&a.getElementsByClassName("e").length!==0){a.lastChild.className="e";if(a.getElementsByClassName("e").length===1)return;o.order.splice(1,0,"CLASS"),o.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!="undefined"&&!c)return b.getElementsByClassName(a[1])},a=null}}(),H.documentElement.contains?m.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:H.documentElement.compareDocumentPosition?m.contains=function(a,b){return!!(a.compareDocumentPosition(b)&16)}:m.contains=function(){return!1},m.isXML=function(a){var b=(a?a.ownerDocument||a:0).documentElement;return b?b.nodeName!=="HTML":!1};var w=function(a,b,c){var d,e=[],f="",g=b.nodeType?[b]:b;while(d=o.match.PSEUDO.exec(a))f+=d[0],a=a.replace(o.match.PSEUDO,"");a=o.relative[a]?a+"*":a;for(var h=0,i=g.length;h<i;h++)m(a,g[h],e,c);return m.filter(f,e)};m.attr=K.attr,m.selectors.attrMap={},K.find=m,K.expr=m.selectors,K.expr[":"]=K.expr.filters,K.unique=m.uniqueSort,K.text=m.getText,K.isXMLDoc=m.isXML,K.contains=m.contains}();var bi=/Until$/,bj=/^(?:parents|prevUntil|prevAll)/,bk=/,/,bl=/^.[^:#\[\.,]*$/,bm=Array.prototype.slice,bn=K.expr.match.POS,bo={children:!0,contents:!0,next:!0,prev:!0};K.fn.extend({find:function(a){var b=this,c,d;if(typeof a!="string")return K(a).filter(function(){for(c=0,d=b.length;c<d;c++)if(K.contains(b[c],this))return!0});var e=this.pushStack("","find",a),f,g,h;for(c=0,d=this.length;c<d;c++){f=e.length,K.find(a,this[c],e);if(c>0)for(g=f;g<e.length;g++)for(h=0;h<f;h++)if(e[h]===e[g]){e.splice(g--,1);break}}return e},has:function(a){var b=K(a);return this.filter(function(){for(var a=0,c=b.length;a<c;a++)if(K.contains(this,b[a]))return!0})},not:function(a){return this.pushStack(z(this,a,!1),"not",a)},filter:function(a){return this.pushStack(z(this,a,!0),"filter",a)},is:function(a){return!!a&&(typeof a=="string"?bn.test(a)?K(a,this.context).index(this[0])>=0:K.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var c=[],d,e,f=this[0];if(K.isArray(a)){var g=1;while(f&&f.ownerDocument&&f!==b){for(d=0;d<a.length;d++)K(f).is(a[d])&&c.push({selector:a[d],elem:f,level:g});f=f.parentNode,g++}return c}var h=bn.test(a)||typeof a!="string"?K(a,b||this.context):0;for(d=0,e=this.length;d<e;d++){f=this[d];while(f){if(h?h.index(f)>-1:K.find.matchesSelector(f,a)){c.push(f);break}f=f.parentNode;if(!f||!f.ownerDocument||f===b||f.nodeType===11)break}}return c=c.length>1?K.unique(c):c,this.pushStack(c,"closest",a)},index:function(a){return a?typeof a=="string"?K.inArray(this[0],K(a)):K.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(a,b){var c=typeof a=="string"?K(a,b):K.makeArray(a&&a.nodeType?[a]:a),d=K.merge(this.get(),c);return this.pushStack(A(c[0])||A(d[0])?d:K.unique(d))},andSelf:function(){return this.add(this.prevObject)}}),K.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return K.dir(a,"parentNode")},parentsUntil:function(a,b,c){return K.dir(a,"parentNode",c)},next:function(a){return K.nth(a,2,"nextSibling")},prev:function(a){return K.nth(a,2,"previousSibling")},nextAll:function(a){return K.dir(a,"nextSibling")},prevAll:function(a){return K.dir(a,"previousSibling")},nextUntil:function(a,b,c){return K.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return K.dir(a,"previousSibling",c)},siblings:function(a){return K.sibling(a.parentNode.firstChild,a)},children:function(a){return K.sibling(a.firstChild)},contents:function(a){return K.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:K.makeArray(a.childNodes)}},function(a,b){K.fn[a]=function(c,d){var e=K.map(this,b,c);return bi.test(a)||(d=c),d&&typeof d=="string"&&(e=K.filter(d,e)),e=this.length>1&&!bo[a]?K.unique(e):e,(this.length>1||bk.test(d))&&bj.test(a)&&(e=e.reverse()),this.pushStack(e,a,bm.call(arguments).join(","))}}),K.extend({filter:function(a,b,c){return c&&(a=":not("+a+")"),b.length===1?K.find.matchesSelector(b[0],a)?[b[0]]:[]:K.find.matches(a,b)},dir:function(a,c,d){var e=[],f=a[c];while(f&&f.nodeType!==9&&(d===b||f.nodeType!==1||!K(f).is(d)))f.nodeType===1&&e.push(f),f=f[c];return e},nth:function(a,b,c,d){b=b||1;var e=0;for(;a;a=a[c])if(a.nodeType===1&&++e===b)break;return a},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling)a.nodeType===1&&a!==b&&c.push(a);return c}});var bp="abbr|article|aside|audio|canvas|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",bq=/ jQuery\d+="(?:\d+|null)"/g,br=/^\s+/,bs=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,bt=/<([\w:]+)/,bu=/<tbody/i,bv=/<|&#?\w+;/,bw=/<(?:script|style)/i,bx=/<(?:script|object|embed|option|style)/i,by=new RegExp("<(?:"+bp+")","i"),bz=/checked\s*(?:[^=]|=\s*.checked.)/i,bA=/\/(java|ecma)script/i,bB=/^\s*<!(?:\[CDATA\[|\-\-)/,bC={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},bD=y(H);bC.optgroup=bC.option,bC.tbody=bC.tfoot=bC.colgroup=bC.caption=bC.thead,bC.th=bC.td,K.support.htmlSerialize||(bC._default=[1,"div<div>","</div>"]),K.fn.extend({text:function(a){return K.isFunction(a)?this.each(function(b){var c=K(this);c.text(a.call(this,b,c.text()))}):typeof a!="object"&&a!==b?this.empty().append((this[0]&&this[0].ownerDocument||H).createTextNode(a)):K.text(this)},wrapAll:function(a){if(K.isFunction(a))return this.each(function(b){K(this).wrapAll(a.call(this,b))});if(this[0]){var b=K(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&a.firstChild.nodeType===1)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return K.isFunction(a)?this.each(function(b){K(this).wrapInner(a.call(this,b))}):this.each(function(){var b=K(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=K.isFunction(a);return this.each(function(c){K(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){K.nodeName(this,"body")||K(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=K.clean(arguments);return a.push.apply(a,this.toArray()),this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=this.pushStack(this,"after",arguments);return a.push.apply(a,K.clean(arguments)),a}},remove:function(a,b){for(var c=0,d;(d=this[c])!=null;c++)if(!a||K.filter(a,[d]).length)!b&&d.nodeType===1&&(K.cleanData(d.getElementsByTagName("*")),K.cleanData([d])),d.parentNode&&d.parentNode.removeChild(d);return this},empty:function(){for(var a=0,b;(b=this[a])!=null;a++){b.nodeType===1&&K.cleanData(b.getElementsByTagName("*"));while(b.firstChild)b.removeChild(b.firstChild)}return this},clone:function(a,b){return a=a==null?!1:a,b=b==null?a:b,this.map(function(){return K.clone(this,a,b)})},html:function(a){if(a===b)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(bq,""):null;if(typeof a=="string"&&!bw.test(a)&&(K.support.leadingWhitespace||!br.test(a))&&!bC[(bt.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(bs,"<$1></$2>");try{for(var c=0,d=this.length;c<d;c++)this
[c].nodeType===1&&(K.cleanData(this[c].getElementsByTagName("*")),this[c].innerHTML=a)}catch(e){this.empty().append(a)}}else K.isFunction(a)?this.each(function(b){var c=K(this);c.html(a.call(this,b,c.html()))}):this.empty().append(a);return this},replaceWith:function(a){return this[0]&&this[0].parentNode?K.isFunction(a)?this.each(function(b){var c=K(this),d=c.html();c.replaceWith(a.call(this,b,d))}):(typeof a!="string"&&(a=K(a).detach()),this.each(function(){var b=this.nextSibling,c=this.parentNode;K(this).remove(),b?K(b).before(a):K(c).append(a)})):this.length?this.pushStack(K(K.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){var e,f,g,h,i=a[0],j=[];if(!K.support.checkClone&&arguments.length===3&&typeof i=="string"&&bz.test(i))return this.each(function(){K(this).domManip(a,c,d,!0)});if(K.isFunction(i))return this.each(function(e){var f=K(this);a[0]=i.call(this,e,c?f.html():b),f.domManip(a,c,d)});if(this[0]){h=i&&i.parentNode,K.support.parentNode&&h&&h.nodeType===11&&h.childNodes.length===this.length?e={fragment:h}:e=K.buildFragment(a,this,j),g=e.fragment,g.childNodes.length===1?f=g=g.firstChild:f=g.firstChild;if(f){c=c&&K.nodeName(f,"tr");for(var k=0,l=this.length,m=l-1;k<l;k++)d.call(c?x(this[k],f):this[k],e.cacheable||l>1&&k<m?K.clone(g,!0,!0):g)}j.length&&K.each(j,q)}return this}}),K.buildFragment=function(a,b,c){var d,e,f,g,h=a[0];return b&&b[0]&&(g=b[0].ownerDocument||b[0]),g.createDocumentFragment||(g=H),a.length===1&&typeof h=="string"&&h.length<512&&g===H&&h.charAt(0)==="<"&&!bx.test(h)&&(K.support.checkClone||!bz.test(h))&&(K.support.html5Clone||!by.test(h))&&(e=!0,f=K.fragments[h],f&&f!==1&&(d=f)),d||(d=g.createDocumentFragment(),K.clean(a,g,d,c)),e&&(K.fragments[h]=f?d:1),{fragment:d,cacheable:e}},K.fragments={},K.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){K.fn[a]=function(c){var d=[],e=K(c),f=this.length===1&&this[0].parentNode;if(f&&f.nodeType===11&&f.childNodes.length===1&&e.length===1)return e[b](this[0]),this;for(var g=0,h=e.length;g<h;g++){var i=(g>0?this.clone(!0):this).get();K(e[g])[b](i),d=d.concat(i)}return this.pushStack(d,a,e.selector)}}),K.extend({clone:function(a,b,c){var d,e,f,g=K.support.html5Clone||!by.test("<"+a.nodeName)?a.cloneNode(!0):r(a);if((!K.support.noCloneEvent||!K.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!K.isXMLDoc(a)){v(a,g),d=u(a),e=u(g);for(f=0;d[f];++f)e[f]&&v(d[f],e[f])}if(b){w(a,g);if(c){d=u(a),e=u(g);for(f=0;d[f];++f)w(d[f],e[f])}}return d=e=null,g},clean:function(a,b,c,d){var e;b=b||H,typeof b.createElement=="undefined"&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||H);var f=[],g;for(var h=0,i;(i=a[h])!=null;h++){typeof i=="number"&&(i+="");if(!i)continue;if(typeof i=="string")if(!bv.test(i))i=b.createTextNode(i);else{i=i.replace(bs,"<$1></$2>");var j=(bt.exec(i)||["",""])[1].toLowerCase(),k=bC[j]||bC._default,l=k[0],m=b.createElement("div");b===H?bD.appendChild(m):y(b).appendChild(m),m.innerHTML=k[1]+i+k[2];while(l--)m=m.lastChild;if(!K.support.tbody){var n=bu.test(i),o=j==="table"&&!n?m.firstChild&&m.firstChild.childNodes:k[1]==="<table>"&&!n?m.childNodes:[];for(g=o.length-1;g>=0;--g)K.nodeName(o[g],"tbody")&&!o[g].childNodes.length&&o[g].parentNode.removeChild(o[g])}!K.support.leadingWhitespace&&br.test(i)&&m.insertBefore(b.createTextNode(br.exec(i)[0]),m.firstChild),i=m.childNodes}var p;if(!K.support.appendChecked)if(i[0]&&typeof (p=i.length)=="number")for(g=0;g<p;g++)s(i[g]);else s(i);i.nodeType?f.push(i):f=K.merge(f,i)}if(c){e=function(a){return!a.type||bA.test(a.type)};for(h=0;f[h];h++)if(d&&K.nodeName(f[h],"script")&&(!f[h].type||f[h].type.toLowerCase()==="text/javascript"))d.push(f[h].parentNode?f[h].parentNode.removeChild(f[h]):f[h]);else{if(f[h].nodeType===1){var q=K.grep(f[h].getElementsByTagName("script"),e);f.splice.apply(f,[h+1,0].concat(q))}c.appendChild(f[h])}}return f},cleanData:function(a){var b,c,d=K.cache,e=K.event.special,f=K.support.deleteExpando;for(var g=0,h;(h=a[g])!=null;g++){if(h.nodeName&&K.noData[h.nodeName.toLowerCase()])continue;c=h[K.expando];if(c){b=d[c];if(b&&b.events){for(var i in b.events)e[i]?K.event.remove(h,i):K.removeEvent(h,i,b.handle);b.handle&&(b.handle.elem=null)}f?delete h[K.expando]:h.removeAttribute&&h.removeAttribute(K.expando),delete d[c]}}}});var bE=/alpha\([^)]*\)/i,bF=/opacity=([^)]*)/,bG=/([A-Z]|^ms)/g,bH=/^-?\d+(?:px)?$/i,bI=/^-?\d/,bJ=/^([\-+])=([\-+.\de]+)/,bK={position:"absolute",visibility:"hidden",display:"block"},bL=["Left","Right"],bM=["Top","Bottom"],bN,bO,bP;K.fn.css=function(a,c){return arguments.length===2&&c===b?this:K.access(this,a,c,!0,function(a,c,d){return d!==b?K.style(a,c,d):K.css(a,c)})},K.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=bN(a,"opacity","opacity");return c===""?"1":c}return a.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":K.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(!!a&&a.nodeType!==3&&a.nodeType!==8&&!!a.style){var f,g,h=K.camelCase(c),i=a.style,j=K.cssHooks[h];c=K.cssProps[h]||h;if(d===b)return j&&"get"in j&&(f=j.get(a,!1,e))!==b?f:i[c];g=typeof d,g==="string"&&(f=bJ.exec(d))&&(d=+(f[1]+1)*+f[2]+parseFloat(K.css(a,c)),g="number");if(d==null||g==="number"&&isNaN(d))return;g==="number"&&!K.cssNumber[h]&&(d+="px");if(!j||!("set"in j)||(d=j.set(a,d))!==b)try{i[c]=d}catch(k){}}},css:function(a,c,d){var e,f;c=K.camelCase(c),f=K.cssHooks[c],c=K.cssProps[c]||c,c==="cssFloat"&&(c="float");if(f&&"get"in f&&(e=f.get(a,!0,d))!==b)return e;if(bN)return bN(a,c)},swap:function(a,b,c){var d={};for(var e in b)d[e]=a.style[e],a.style[e]=b[e];c.call(a);for(e in b)a.style[e]=d[e]}}),K.curCSS=K.css,K.each(["height","width"],function(a,b){K.cssHooks[b]={get:function(a,c,d){var e;if(c)return a.offsetWidth!==0?p(a,b,d):(K.swap(a,bK,function(){e=p(a,b,d)}),e)},set:function(a,b){if(!bH.test(b))return b;b=parseFloat(b);if(b>=0)return b+"px"}}}),K.support.opacity||(K.cssHooks.opacity={get:function(a,b){return bF.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=K.isNumeric(b)?"alpha(opacity="+b*100+")":"",f=d&&d.filter||c.filter||"";c.zoom=1;if(b>=1&&K.trim(f.replace(bE,""))===""){c.removeAttribute("filter");if(d&&!d.filter)return}c.filter=bE.test(f)?f.replace(bE,e):f+" "+e}}),K(function(){K.support.reliableMarginRight||(K.cssHooks.marginRight={get:function(a,b){var c;return K.swap(a,{display:"inline-block"},function(){b?c=bN(a,"margin-right","marginRight"):c=a.style.marginRight}),c}})}),H.defaultView&&H.defaultView.getComputedStyle&&(bO=function(a,b){var c,d,e;return b=b.replace(bG,"-$1").toLowerCase(),(d=a.ownerDocument.defaultView)&&(e=d.getComputedStyle(a,null))&&(c=e.getPropertyValue(b),c===""&&!K.contains(a.ownerDocument.documentElement,a)&&(c=K.style(a,b))),c}),H.documentElement.currentStyle&&(bP=function(a,b){var c,d,e,f=a.currentStyle&&a.currentStyle[b],g=a.style;return f===null&&g&&(e=g[b])&&(f=e),!bH.test(f)&&bI.test(f)&&(c=g.left,d=a.runtimeStyle&&a.runtimeStyle.left,d&&(a.runtimeStyle.left=a.currentStyle.left),g.left=b==="fontSize"?"1em":f||0,f=g.pixelLeft+"px",g.left=c,d&&(a.runtimeStyle.left=d)),f===""?"auto":f}),bN=bO||bP,K.expr&&K.expr.filters&&(K.expr.filters.hidden=function(a){var b=a.offsetWidth,c=a.offsetHeight;return b===0&&c===0||!K.support.reliableHiddenOffsets&&(a.style&&a.style.display||K.css(a,"display"))==="none"},K.expr.filters.visible=function(a){return!K.expr.filters.hidden(a)});var bQ=/%20/g,bR=/\[\]$/,bS=/\r?\n/g,bT=/#.*$/,bU=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,bV=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,bW=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,bX=/^(?:GET|HEAD)$/,bY=/^\/\//,bZ=/\?/,b$=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,b_=/^(?:select|textarea)/i,ca=/\s+/,cb=/([?&])_=[^&]*/,cc=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,cd=K.fn.load,ce={},cf={},cg,ch,ci=["*/"]+["*"];try{cg=J.href}catch(cj){cg=H.createElement("a"),cg.href="",cg=cg.href}ch=cc.exec(cg.toLowerCase())||[],K.fn.extend({load:function(a,c,d){if(typeof a!="string"&&cd)return cd.apply(this,arguments);if(!this.length)return this;var e=a.indexOf(" ");if(e>=0){var f=a.slice(e,a.length);a=a.slice(0,e)}var g="GET";c&&(K.isFunction(c)?(d=c,c=b):typeof c=="object"&&(c=K.param(c,K.ajaxSettings.traditional),g="POST"));var h=this;return K.ajax({url:a,type:g,dataType:"html",data:c,complete:function(a,b,c){c=a.responseText,a.isResolved()&&(a.done(function(a){c=a}),h.html(f?K("<div>").append(c.replace(b$,"")).find(f):c)),d&&h.each(d,[c,b,a])}}),this},serialize:function(){return K.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?K.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||b_.test(this.nodeName)||bV.test(this.type))}).map(function(a,b){var c=K(this).val();return c==null?null:K.isArray(c)?K.map(c,function(a,c){return{name:b.name,value:a.replace(bS,"\r\n")}}):{name:b.name,value:c.replace(bS,"\r\n")}}).get()}}),K.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){K.fn[b]=function(a){return this.on(b,a)}}),K.each(["get","post"],function(a,c){K[c]=function(a,d,e,f){return K.isFunction(d)&&(f=f||e,e=d,d=b),K.ajax({type:c,url:a,data:d,success:e,dataType:f})}}),K.extend({getScript:function(a,c){return K.get(a,b,c,"script")},getJSON:function(a,b,c){return K.get(a,b,c,"json")},ajaxSetup:function(a,b){return b?m(a,K.ajaxSettings):(b=a,a=K.ajaxSettings),m(a,b),a},ajaxSettings:{url:cg,isLocal:bW.test(ch[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":ci},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":K.parseJSON,"text xml":K.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:o(ce),ajaxTransport:o(cf),ajax:function(a,c){function d(a,c,d,n){if(v!==2){v=2,t&&clearTimeout(t),s=b,q=n||"",y.readyState=a>0?4:0;var o,p,r,u=c,x=d?k(e,y,d):b,z,A;if(a>=200&&a<300||a===304){if(e.ifModified){if(z=y.getResponseHeader("Last-Modified"))K.lastModified[m]=z;if(A=y.getResponseHeader("Etag"))K.etag[m]=A}if(a===304)u="notmodified",o=!0;else try{p=j(e,x),u="success",o=!0}catch(B){u="parsererror",r=B}}else{r=u;if(!u||a)u="error",a<0&&(a=0)}y.status=a,y.statusText=""+(c||u),o?h.resolveWith(f,[p,u,y]):h.rejectWith(f,[y,u,r]),y.statusCode(l),l=b,w&&g.trigger("ajax"+(o?"Success":"Error"),[y,e,o?p:r]),i.fireWith(f,[y,u]),w&&(g.trigger("ajaxComplete",[y,e]),--K.active||K.event.trigger("ajaxStop"))}}typeof a=="object"&&(c=a,a=b),c=c||{};var e=K.ajaxSetup({},c),f=e.context||e,g=f!==e&&(f.nodeType||f instanceof K)?K(f):K.event,h=K.Deferred(),i=K.Callbacks("once memory"),l=e.statusCode||{},m,o={},p={},q,r,s,t,u,v=0,w,x,y={readyState:0,setRequestHeader:function(a,b){if(!v){var c=a.toLowerCase();a=p[c]=p[c]||a,o[a]=b}return this},getAllResponseHeaders:function(){return v===2?q:null},getResponseHeader:function(a){var c;if(v===2){if(!r){r={};while(c=bU.exec(q))r[c[1].toLowerCase()]=c[2]}c=r[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){return v||(e.mimeType=a),this},abort:function(a){return a=a||"abort",s&&s.abort(a),d(0,a),this}};h.promise(y),y.success=y.done,y.error=y.fail,y.complete=i.add,y.statusCode=function(a){if(a){var b;if(v<2)for(b in a)l[b]=[l[b],a[b]];else b=a[y.status],y.then(b,b)}return this},e.url=((a||e.url)+"").replace(bT,"").replace(bY,ch[1]+"//"),e.dataTypes=K.trim(e.dataType||"*").toLowerCase().split(ca),e.crossDomain==null&&(u=cc.exec(e.url.toLowerCase()),e.crossDomain=!(!u||u[1]==ch[1]&&u[2]==ch[2]&&(u[3]||(u[1]==="http:"?80:443))==(ch[3]||(ch[1]==="http:"?80:443)))),e.data&&e.processData&&typeof e.data!="string"&&(e.data=K.param(e.data,e.traditional)),n(ce,e,c,y);if(v===2)return!1;w=e.global,e.type=e.type.toUpperCase(),e.hasContent=!bX.test(e.type),w&&K.active++===0&&K.event.trigger("ajaxStart");if(!e.hasContent){e.data&&(e.url+=(bZ.test(e.url)?"&":"?")+e.data,delete e.data),m=e.url;if(e.cache===!1){var z=K.now(),A=e.url.replace(cb,"$1_="+z);e.url=A+(A===e.url?(bZ.test(e.url)?"&":"?")+"_="+z:"")}}(e.data&&e.hasContent&&e.contentType!==!1||c.contentType)&&y.setRequestHeader("Content-Type",e.contentType),e.ifModified&&(m=m||e.url,K.lastModified[m]&&y.setRequestHeader("If-Modified-Since",K.lastModified[m]),K.etag[m]&&y.setRequestHeader("If-None-Match",K.etag[m])),y.setRequestHeader("Accept",e.dataTypes[0]&&e.accepts[e.dataTypes[0]]?e.accepts[e.dataTypes[0]]+(e.dataTypes[0]!=="*"?", "+ci+"; q=0.01":""):e.accepts["*"]);for(x in e.headers)y.setRequestHeader(x,e.headers[x]);if(!e.beforeSend||e.beforeSend.call(f,y,e)!==!1&&v!==2){for(x in{success:1,error:1,complete:1})y[x](e[x]);s=n(cf,e,c,y);if(!s)d(-1,"No Transport");else{y.readyState=1,w&&g.trigger("ajaxSend",[y,e]),e.async&&e.timeout>0&&(t=setTimeout(function(){y.abort("timeout")},e.timeout));try{v=1,s.send(o,d)}catch(B){if(!(v<2))throw B;d(-1,B)}}return y}return y.abort(),!1},param:function(a,c){var d=[],e=function(a,b){b=K.isFunction(b)?b():b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};c===b&&(c=K.ajaxSettings.traditional);if(K.isArray(a)||a.jquery&&!K.isPlainObject(a))K.each(a,function(){e(this.name,this.value)});else for(var f in a)l(f,a[f],c,e);return d.join("&").replace(bQ,"+")}}),K.extend({active:0,lastModified:{},etag:{}});var ck=K.now(),cl=/(\=)\?(&|$)|\?\?/i;K.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return K.expando+"_"+ck++}}),K.ajaxPrefilter("json jsonp",function(b,c,d){var e=b.contentType==="application/x-www-form-urlencoded"&&typeof b.data=="string";if(b.dataTypes[0]==="jsonp"||b.jsonp!==!1&&(cl.test(b.url)||e&&cl.test(b.data))){var f,g=b.jsonpCallback=K.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h=a[g],i=b.url,j=b.data,k="$1"+g+"$2";return b.jsonp!==!1&&(i=i.replace(cl,k),b.url===i&&(e&&(j=j.replace(cl,k)),b.data===j&&(i+=(/\?/.test(i)?"&":"?")+b.jsonp+"="+g))),b.url=i,b.data=j,a[g]=function(a){f=[a]},d.always(function(){a[g]=h,f&&K.isFunction(h)&&a[g](f[0])}),b.converters["script json"]=function(){return f||K.error(g+" was not called"),f[0]},b.dataTypes[0]="json","script"}}),K.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){return K.globalEval(a),a}}}),K.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),K.ajaxTransport("script",function(a){if(a.crossDomain){var c,d=H.head||H.getElementsByTagName("head")[0]||H.documentElement;return{send:function(e,f){c=H.createElement("script"),c.async="async",a.scriptCharset&&(c.charset=a.scriptCharset),c.src=a.url,c.onload=c.onreadystatechange=function(a,e){if(e||!c.readyState||/loaded|complete/.test(c.readyState))c.onload=c.onreadystatechange=null,d&&c.parentNode&&d.removeChild(c),c=b,e||f(200,"success")},d.insertBefore(c,d.firstChild)},abort:function(){c&&c.onload(0,1)}}}});var cm=a.ActiveXObject?function(){for(var a in co)co[a](0,1)}:!1,cn=0,co;K.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&i()||h()}:i,function(a){K.extend(K.support,{ajax:!!a,cors:!!a&&"withCredentials"in a})}(K.ajaxSettings.xhr()),K.support.ajax&&K.ajaxTransport(function(c){if(!c.crossDomain||K.support.cors){var d;return{send:function(e,f){var g=c.xhr(),h,i;c.username?g.open(c.type,c.url,c.async,c.username,c.password):g.open(c.type,c.url,c.async);if(c.xhrFields)for(i in c.xhrFields)g[i]=c.xhrFields[i];c.mimeType&&g.overrideMimeType&&g.overrideMimeType(c.mimeType),!c.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(i in e)g.setRequestHeader(i,e[i])}catch(j){}g.send(c.hasContent&&c.data||null),d=function(a,e){var i,j,k,l,m;try{if(d&&(e||g.readyState===4)){d=b,h&&(g.onreadystatechange=K.noop,cm&&delete co[h]);if(e)g.readyState!==4&&g.abort();else{i=g.status,k=g.getAllResponseHeaders(),l={},m=g.responseXML,m&&m.documentElement&&(l.xml=m),l.text=g.responseText;try{j=g.statusText}catch(n){j=""}!i&&c.isLocal&&!c.crossDomain?i=l.text?200:404:i===1223&&(i=204)}}}catch(o){e||f(-1,o)}l&&f(i,j,l,k)},!c.async||g.readyState===4?d():(h=++cn,cm&&(co||(co={},K(a).unload(cm)),co[h]=d),g.onreadystatechange=d)},abort:function(){d&&d(0,1)}}}});var cp={},cq,cr,cs=/^(?:toggle|show|hide)$/,ct=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,cu,cv=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],cw;K.fn.extend({show:function(a,b,c){var f,g;if(a||a===0)return this.animate(e("show",3),a,b,c);for(var h=0,i=this.length;h<i;h++)f=this[h],f.style&&(g=f.style.display,!K._data(f,"olddisplay")&&g==="none"&&(g=f.style.display=""),g===""&&K.css(f,"display")==="none"&&K._data(f,"olddisplay",d(f.nodeName)));for(h=0;h<i;h++){f=this[h];if(f.style){g=f.style.display;if(g===""||g==="none")f.style.display=K._data(f,"olddisplay")||""}}return this},hide:function(a,b,c){if(a||a===0)return this.animate(e("hide",3),a,b,c);var d,f,g=0,h=this.length;for(;g<h;g++)d=this[g],d.style&&(f=K.css(d,"display"),f!=="none"&&!K._data(d,"olddisplay")&&K._data(d,"olddisplay",f));for(g=0;g<h;g++)this[g].style&&(this[g].style.display="none");return this},_toggle:K.fn.toggle,toggle:function(a,b,c){var d=typeof a=="boolean";return K.isFunction(a)&&K.isFunction(b)?this._toggle.apply(this,arguments):a==null||d?this.each(function(){var b=d?a:K(this).is(":hidden");K(this)[b?"show":"hide"]()}):this.animate(e("toggle",3),a,b,c),this},fadeTo:function(a,b,c,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,e){function f(){g.queue===!1&&K._mark(this);var b=K.extend({},g),c=this.nodeType===1,e=c&&K(this).is(":hidden"),f,h,i,j,k,l,m,n,o;b.animatedProperties={};for(i in a){f=K.camelCase(i),i!==f&&(a[f]=a[i],delete a[i]),h=a[f],K.isArray(h)?(b.animatedProperties[f]=h[1],h=a[f]=h[0]):b.animatedProperties[f]=b.specialEasing&&b.specialEasing[f]||b.easing||"swing";if(h==="hide"&&e||h==="show"&&!e)return b.complete.call(this);c&&(f==="height"||f==="width")&&(b.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],K.css(this,"display")==="inline"&&K.css(this,"float")==="none"&&(!K.support.inlineBlockNeedsLayout||d(this.nodeName)==="inline"?this.style.display="inline-block":this.style.zoom=1))}b.overflow!=null&&(this.style.overflow="hidden");for(i in a)j=new K.fx(this,b,i),h=a[i],cs.test(h)?(o=K._data(this,"toggle"+i)||(h==="toggle"?e?"show":"hide":0),o?(K._data(this,"toggle"+i,o==="show"?"hide":"show"),j[o]()):j[h]()):(k=ct.exec(h),l=j.cur(),k?(m=parseFloat(k[2]),n=k[3]||(K.cssNumber[i]?"":"px"),n!=="px"&&(K.style(this,i,(m||1)+n),l=(m||1)/j.cur()*l,K.style(this,i,l+n)),k[1]&&(m=(k[1]==="-="?-1:1)*m+l),j.custom(l,m,n)):j.custom(l,h,""));return!0}var g=K.speed(b,c,e);return K.isEmptyObject(a)?this.each(g.complete,[!1]):(a=K.extend({},a),g.queue===!1?this.each(f):this.queue(g.queue,f))},stop:function(a,c,d){return typeof a!="string"&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){function b(a,b,c){var e=b[c];K.removeData(a,c,!0),e.stop(d)}var c,e=!1,f=K.timers,g=K._data(this);d||K._unmark(!0,this);if(a==null)for(c in g)g[c]&&g[c].stop&&c.indexOf(".run")===c.length-4&&b(this,g,c);else g[c=a+".run"]&&g[c].stop&&b(this,g,c);for(c=f.length;c--;)f[c].elem===this&&(a==null||f[c].queue===a)&&(d?f[c](!0):f[c].saveState(),e=!0,f.splice(c,1));(!d||!e)&&K.dequeue(this,a)})}}),K.each({slideDown:e("show",1),slideUp:e("hide",1),slideToggle:e("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){K.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),K.extend({speed:function(a,b,c){var d=a&&typeof a=="object"?K.extend({},a):{complete:c||!c&&b||K.isFunction(a)&&a,duration:a,easing:c&&b||b&&!K.isFunction(b)&&b};d.duration=K.fx.off?0:typeof d.duration=="number"?d.duration:d.duration in K.fx.speeds?K.fx.speeds[d.duration]:K.fx.speeds._default;if(d.queue==null||d.queue===!0)d.queue="fx";return d.old=d.complete,d.complete=function(a){K.isFunction(d.old)&&d.old.call(this),d.queue?K.dequeue(this,d.queue):a!==!1&&K._unmark(this)},d},easing:{linear:function(a,b,c,d){return c+d*a},swing:function(a,b,c,d){return(-Math.cos(a*Math.PI)/2+.5)*d+c}},timers:[],fx:function(a,b,c){this.options=b,this.elem=a,this.prop=c,b.orig=b.orig||{}}}),K.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(K.fx.step[this.prop]||K.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]==null||!!this.elem.style&&this.elem.style[this.prop]!=null){var a,b=K.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?!b||b==="auto"?0:b:a}return this.elem[this.prop]},custom:function(a,c,d){function e(a){return f.step(a)}var f=this,h=K.fx;this.startTime=cw||g(),this.end=c,this.now=this.start=a,this.pos=this.state=0,this.unit=d||this.unit||(K.cssNumber[this.prop]?"":"px"),e.queue=this.options.queue,e.elem=this.elem,e.saveState=function(){f.options.hide&&K._data(f.elem,"fxshow"+f.prop)===b&&K._data(f.elem,"fxshow"+f.prop,f.start)},e()&&K.timers.push(e)&&!cu&&(cu=setInterval(h.tick,h.interval))},show:function(){var a=K._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=a||K.style(this.elem,this.prop),this.options.show=!0,a!==b?this.custom(this.cur(),a):this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),K(this.elem).show()},hide:function(){this.options.orig[this.prop]=K._data(this.elem,"fxshow"+this.prop)||K.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(a){var b,c,d,e=cw||g(),f=!0,h=this.elem,i=this.options;if(a||e>=i.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),i.animatedProperties[this.prop]=!0;for(b in i.animatedProperties)i.animatedProperties[b]!==!0&&(f=!1);if(f){i.overflow!=null&&!K.support.shrinkWrapBlocks&&K.each(["","X","Y"],function(a,b){h.style["overflow"+b]=i.overflow[a]}),i.hide&&K(h).hide();if(i.hide||i.show)for(b in i.animatedProperties)K.style(h,b,i.orig[b]),K.removeData(h,"fxshow"+b,!0),K.removeData(h,"toggle"+b,!0);d=i.complete,d&&(i.complete=!1,d.call(h))}return!1}return i.duration==Infinity?this.now=e:(c=e-this.startTime,this.state=c/i.duration,this.pos=K.easing[i.animatedProperties[this.prop]](this.state,c,0,1,i.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update(),!0}},K.extend(K.fx,{tick:function(){var a,b=K.timers,c=0;for(;c<b.length;c++)a=b[c],!a()&&b[c]===a&&b.splice(c--,1);b.length||K.fx.stop()},interval:13,stop:function(){clearInterval(cu),cu=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){K.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&a.elem.style[a.prop]!=null?a.elem.style[a.prop]=a.now+a.unit:a.elem[a.prop]=a.now}}}),K.each(["width","height"],function(a,b){K.fx.step[b]=function(a){K.style(a.elem,b,Math.max(0,a.now)+a.unit)}}),K.expr&&K.expr.filters&&(K.expr.filters.animated=function(a){return K.grep(K.timers,function(b){return a===b.elem}).length});var cx=/^t(?:able|d|h)$/i,cy=/^(?:body|html)$/i;"getBoundingClientRect"in H.documentElement?K.fn.offset=function(a){var b=this[0],d;if(a)return this.each(function(b){K.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return K.offset.bodyOffset(b);try{d=b.getBoundingClientRect()}catch(e){}var f=b.ownerDocument,g=f.documentElement;if(!d||!K.contains(g,b))return d?{top:d.top,left:d.left}:{top:0,left:0};var h=f.body,i=c(f),j=g.clientTop||h.clientTop||0,k=g.clientLeft||h.clientLeft||0,l=i.pageYOffset||K.support.boxModel&&g.scrollTop||h.scrollTop,m=i.pageXOffset||K.support.boxModel&&g.scrollLeft||h.scrollLeft,n=d.top+l-j,o=d.left+m-k;return{top:n,left:o}}:K.fn.offset=function(a){var b=this[0];if(a)return this.each(function(b){K.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return K.offset.bodyOffset(b);var c,d=b.offsetParent,e=b,f=b.ownerDocument,g=f.documentElement,h=f.body,i=f.defaultView,j=i?i.getComputedStyle(b,null):b.currentStyle,k=b.offsetTop,l=b.offsetLeft;while((b=b.parentNode)&&b!==h&&b!==g){if(K.support.fixedPosition&&j.position==="fixed")break;c=i?i.getComputedStyle(b,null):b.currentStyle,k-=b.scrollTop,l-=b.scrollLeft,b===d&&(k+=b.offsetTop,l+=b.offsetLeft,K.support.doesNotAddBorder&&(!K.support.doesAddBorderForTableAndCells||!cx.test(b.nodeName))&&(k+=parseFloat(c.borderTopWidth)||0,l+=parseFloat(c.borderLeftWidth)||0),e=d,d=b.offsetParent),K.support.subtractsBorderForOverflowNotVisible&&c.overflow!=="visible"&&(k+=parseFloat(c.borderTopWidth)||0,l+=parseFloat(c.borderLeftWidth)||0),j=c}if(j.position==="relative"||j.position==="static")k+=h.offsetTop,l+=h.offsetLeft;return K.support.fixedPosition&&j.position==="fixed"&&(k+=Math.max(g.scrollTop,h.scrollTop),l+=Math.max(g.scrollLeft,h.scrollLeft)),{top:k,left:l}},K.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;return K.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(K.css(a,"marginTop"))||0,c+=parseFloat(K.css(a,"marginLeft"))||0),{top:b,left:c}},setOffset:function(a,b,c){var d=K.css(a,"position");d==="static"&&(a.style.position="relative");var e=K(a),f=e.offset(),g=K.css(a,"top"),h=K.css(a,"left"),i=(d==="absolute"||d==="fixed")&&K.inArray("auto",[g,h])>-1,j={},k={},l,m;i?(k=e.position(),l=k.top,m=k.left):(l=parseFloat(g)||0,m=parseFloat(h)||0),K.isFunction(b)&&(b=b.call(a,c,f)),b.top!=null&&(j.top=b.top-f.top+l),b.left!=null&&(j.left=b.left-f.left+m),"using"in b?b.using.call(a,j):e.css(j)}},K.fn.extend({position:function(){if(!this[0])return null;var a=this[0],b=this.offsetParent(),c=this.offset(),d=cy.test(b[0].nodeName)?{top:0,left:0}:b.offset();return c.top-=parseFloat(K.css(a,"marginTop"))||0,c.left-=parseFloat(K.css(a,"marginLeft"))||0,d.top+=parseFloat(K.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat(K.css(b[0],"borderLeftWidth"))||0,{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||H.body;while(a&&!cy.test(a.nodeName)&&K.css(a,"position")==="static")a=a.offsetParent;return a})}}),K.each(["Left","Top"],function(a,d){var e="scroll"+d;K.fn[e]=function(d){var f,g;return d===b?(f=this[0],f?(g=c(f),g?"pageXOffset"in g?g[a?"pageYOffset":"pageXOffset"]:K.support.boxModel&&g.document.documentElement[e]||g.document.body[e]:f[e]):null):this.each(function(){g=c(this),g?g.scrollTo(a?K(g).scrollLeft():d,a?d:K(g).scrollTop()):this[e]=d})}}),K.each(["Height","Width"],function(a,c){var d=c.toLowerCase();K.fn["inner"+c]=function(){var a=this[0];return a?a.style?parseFloat(K.css(a,d,"padding")):this[d]():null},K.fn["outer"+c]=function(a){var b=this[0];return b?b.style?parseFloat(K.css(b,d,a?"margin":"border")):this[d]():null},K.fn[d]=function(a){var e=this[0];if(!e)return a==null?null:this;if(K.isFunction(a))return this.each(function(b){var c=K(this);c[d](a.call(this,b,c[d]()))});if(K.isWindow(e)){var f=e.document.documentElement["client"+c],g=e.document.body;return e.document.compatMode==="CSS1Compat"&&f||g&&g["client"+c]||f}if(e.nodeType===9)return Math.max(e.documentElement["client"+c],e.body["scroll"+c],e.documentElement["scroll"+c],e.body["offset"+c],e.documentElement["offset"+c]);if(a===b){var h=K.css(e,d),i=parseFloat(h);return K.isNumeric(i)?i:h}return this.css(d,typeof a=="string"?a:a+"px")}}),a.jQuery=a.$=K,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return K})})(window);((function(){function a(b,c,d){if(b===c)return b!==0||1/b==1/c;if(b==null||c==null)return b===c;b._chain&&(b=b._wrapped),c._chain&&(c=c._wrapped);if(b.isEqual&&v.isFunction(b.isEqual))return b.isEqual(c);if(c.isEqual&&v.isFunction(c.isEqual))return c.isEqual(b);var e=i.call(b);if(e!=i.call(c))return!1;switch(e){case"[object String]":return b==String(c);case"[object Number]":return b!=+b?c!=+c:b==0?1/b==1/c:b==+c;case"[object Date]":case"[object Boolean]":return+b==+c;case"[object RegExp]":return b.source==c.source&&b.global==c.global&&b.multiline==c.multiline&&b.ignoreCase==c.ignoreCase}if(typeof b!="object"||typeof c!="object")return!1;for(var f=d.length;f--;)if(d[f]==b)return!0;d.push(b);var f=0,g=!0;if(e=="[object Array]"){if(f=b.length,g=f==c.length)for(;f--;)if(!(g=f in b==f in c&&a(b[f],c[f],d)))break}else{if("constructor"in b!="constructor"in c||b.constructor!=c.constructor)return!1;for(var h in b)if(v.has(b,h)&&(f++,!(g=v.has(c,h)&&a(b[h],c[h],d))))break;if(g){for(h in c)if(v.has(c,h)&&!(f--))break;g=!f}}return d.pop(),g}var b=this,c=b._,d={},e=Array.prototype,f=Object.prototype,g=e.slice,h=e.unshift,i=f.toString,j=f.hasOwnProperty,k=e.forEach,l=e.map,m=e.reduce,n=e.reduceRight,o=e.filter,p=e.every,q=e.some,r=e.indexOf,s=e.lastIndexOf,f=Array.isArray,t=Object.keys,u=Function.prototype.bind,v=function(a){return new C(a)};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=v),exports._=v):b._=v,v.VERSION="1.3.1";var w=v.each=v.forEach=function(a,b,c){if(a!=null)if(k&&a.forEach===k)a.forEach(b,c);else if(a.length===+a.length){for(var e=0,f=a.length;e<f;e++)if(e in a&&b.call(c,a[e],e,a)===d)break}else for(e in a)if(v.has(a,e)&&b.call(c,a[e],e,a)===d)break};v.map=v.collect=function(a,b,c){var d=[];return a==null?d:l&&a.map===l?a.map(b,c):(w(a,function(a,e,f){d[d.length]=b.call(c,a,e,f)}),a.length===+a.length&&(d.length=a.length),d)},v.reduce=v.foldl=v.inject=function(a,b,c,d){var e=arguments.length>2;a==null&&(a=[]);if(m&&a.reduce===m)return d&&(b=v.bind(b,d)),e?a.reduce(b,c):a.reduce(b);w(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)});if(!e)throw new TypeError("Reduce of empty array with no initial value");return c},v.reduceRight=v.foldr=function(a,b,c,d){var e=arguments.length>2;a==null&&(a=[]);if(n&&a.reduceRight===n)return d&&(b=v.bind(b,d)),e?a.reduceRight(b,c):a.reduceRight(b);var f=v.toArray(a).reverse();return d&&!e&&(b=v.bind(b,d)),e?v.reduce(f,b,c,d):v.reduce(f,b)},v.find=v.detect=function(a,b,c){var d;return x(a,function(a,e,f){if(b.call(c,a,e,f))return d=a,!0}),d},v.filter=v.select=function(a,b,c){var d=[];return a==null?d:o&&a.filter===o?a.filter(b,c):(w(a,function(a,e,f){b.call(c,a,e,f)&&(d[d.length]=a)}),d)},v.reject=function(a,b,c){var d=[];return a==null?d:(w(a,function(a,e,f){b.call(c,a,e,f)||(d[d.length]=a)}),d)},v.every=v.all=function(a,b,c){var e=!0;return a==null?e:p&&a.every===p?a.every(b,c):(w(a,function(a,f,g){if(!(e=e&&b.call(c,a,f,g)))return d}),e)};var x=v.some=v.any=function(a,b,c){b||(b=v.identity);var e=!1;return a==null?e:q&&a.some===q?a.some(b,c):(w(a,function(a,f,g){if(e||(e=b.call(c,a,f,g)))return d}),!!e)};v.include=v.contains=function(a,b){var c=!1;return a==null?c:r&&a.indexOf===r?a.indexOf(b)!=-1:c=x(a,function(a){return a===b})},v.invoke=function(a,b){var c=g.call(arguments,2);return v.map(a,function(a){return(v.isFunction(b)?b||a:a[b]).apply(a,c)})},v.pluck=function(a,b){return v.map(a,function(a){return a[b]})},v.max=function(a,b,c){if(!b&&v.isArray(a))return Math.max.apply(Math,a);if(!b&&v.isEmpty(a))return-Infinity;var d={computed:-Infinity};return w(a,function(a,e,f){e=b?b.call(c,a,e,f):a,e>=d.computed&&(d={value:a,computed:e})}),d.value},v.min=function(a,b,c){if(!b&&v.isArray(a))return Math.min.apply(Math,a);if(!b&&v.isEmpty(a))return Infinity;var d={computed:Infinity};return w(a,function(a,e,f){e=b?b.call(c,a,e,f):a,e<d.computed&&(d={value:a,computed:e})}),d.value},v.shuffle=function(a){var b=[],c;return w(a,function(a,d){d==0?b[0]=a:(c=Math.floor(Math.random()*(d+1)),b[d]=b[c],b[c]=a)}),b},v.sortBy=function(a,b,c){return v.pluck(v.map(a,function(a,d,e){return{value:a,criteria:b.call(c,a,d,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;return c<d?-1:c>d?1:0}),"value")},v.groupBy=function(a,b){var c={},d=v.isFunction(b)?b:function(a){return a[b]};return w(a,function(a,b){var e=d(a,b);(c[e]||(c[e]=[])).push(a)}),c},v.sortedIndex=function(a,b,c){c||(c=v.identity);for(var d=0,e=a.length;d<e;){var f=d+e>>1;c(a[f])<c(b)?d=f+1:e=f}return d},v.toArray=function(a){return a?a.toArray?a.toArray():v.isArray(a)?g.call(a):v.isArguments(a)?g.call(a):v.values(a):[]},v.size=function(a){return v.toArray(a).length},v.first=v.head=function(a,b,c){return b!=null&&!c?g.call(a,0,b):a[0]},v.initial=function(a,b,c){return g.call(a,0,a.length-(b==null||c?1:b))},v.last=function(a,b,c){return b!=null&&!c?g.call(a,Math.max(a.length-b,0)):a[a.length-1]},v.rest=v.tail=function(a,b,c){return g.call(a,b==null||c?1:b)},v.compact=function(a){return v.filter(a,function(a){return!!a})},v.flatten=function(a,b){return v.reduce(a,function(a,c){return v.isArray(c)?a.concat(b?c:v.flatten(c)):(a[a.length]=c,a)},[])},v.without=function(a){return v.difference(a,g.call(arguments,1))},v.uniq=v.unique=function(a,b,c){var c=c?v.map(a,c):a,d=[];return v.reduce(c,function(c,e,f){if(0==f||(b===!0?v.last(c)!=e:!v.include(c,e)))c[c.length]=e,d[d.length]=a[f];return c},[]),d},v.union=function(){return v.uniq(v.flatten(arguments,!0))},v.intersection=v.intersect=function(a){var b=g.call(arguments,1);return v.filter(v.uniq(a),function(a){return v.every(b,function(b){return v.indexOf(b,a)>=0})})},v.difference=function(a){var b=v.flatten(g.call(arguments,1));return v.filter(a,function(a){return!v.include(b,a)})},v.zip=function(){for(var a=g.call(arguments),b=v.max(v.pluck(a,"length")),c=Array(b),d=0;d<b;d++)c[d]=v.pluck(a,""+d);return c},v.indexOf=function(a,b,c){if(a==null)return-1;var d;if(c)return c=v.sortedIndex(a,b),a[c]===b?c:-1;if(r&&a.indexOf===r)return a.indexOf(b);for(c=0,d=a.length;c<d;c++)if(c in a&&a[c]===b)return c;return-1},v.lastIndexOf=function(a,b){if(a==null)return-1;if(s&&a.lastIndexOf===s)return a.lastIndexOf(b);for(var c=a.length;c--;)if(c in a&&a[c]===b)return c;return-1},v.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0);for(var c=arguments[2]||1,d=Math.max(Math.ceil((b-a)/c),0),e=0,f=Array(d);e<d;)f[e++]=a,a+=c;return f};var y=function(){};v.bind=function(a,b){var c,d;if(a.bind===u&&u)return u.apply(a,g.call(arguments,1));if(!v.isFunction(a))throw new TypeError;return d=g.call(arguments,2),c=function(){if(this instanceof c){y.prototype=a.prototype;var e=new y,f=a.apply(e,d.concat(g.call(arguments)));return Object(f)===f?f:e}return a.apply(b,d.concat(g.call(arguments)))}},v.bindAll=function(a){var b=g.call(arguments,1);return b.length==0&&(b=v.functions(a)),w(b,function(b){a[b]=v.bind(a[b],a)}),a},v.memoize=function(a,b){var c={};return b||(b=v.identity),function(){var d=b.apply(this,arguments);return v.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}},v.delay=function(a,b){var c=g.call(arguments,2);return setTimeout(function(){return a.apply(a,c)},b)},v.defer=function(a){return v.delay.apply(v,[a,1].concat(g.call(arguments,1)))},v.throttle=function(a,b){var c,d,e,f,g,h=v.debounce(function(){g=f=!1},b);return function(){c=this,d=arguments;var i;e||(e=setTimeout(function(){e=null,g&&a.apply(c,d),h()},b)),f?g=!0:a.apply(c,d),h(),f=!0}},v.debounce=function(a,b){var c;return function(){var d=this,e=arguments;clearTimeout(c),c=setTimeout(function(){c=null,a.apply(d,e)},b)}},v.once=function(a){var b=!1,c;return function(){return b?c:(b=!0,c=a.apply(this,arguments))}},v.wrap=function(a,b){return function(){var c=[a].concat(g.call(arguments,0));return b.apply(this,c)}},v.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},v.after=function(a,b){return a<=0?b():function(){if(--a<1)return b.apply(this,arguments)}},v.keys=t||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[],c;for(c in a)v.has(a,c)&&(b[b.length]=c);return b},v.values=function(a){return v.map(a,v.identity)},v.functions=v.methods=function(a){var b=[],c;for(c in a)v.isFunction(a[c])&&b.push(c);return b.sort()},v.extend=function(a){return w(g.call(arguments,1),function(b){for(var c in b)a[c]=b[c]}),a},v.defaults=function(a){return w(g.call(arguments,1),function(b){for(var c in b)a[c]==null&&(a[c]=b[c])}),a},v.clone=function(a){return v.isObject(a)?v.isArray(a)?a.slice():v.extend({},a):a},v.tap=function(a,b){return b(a),a},v.isEqual=function(b,c){return a(b,c,[])},v.isEmpty=function(a){if(v.isArray(a)||v.isString(a))return a.length===0;for(var b in a)if(v.has(a,b))return!1;return!0},v.isElement=function(a){return!!a&&a.nodeType==1},v.isArray=f||function(a){return i.call(a)=="[object Array]"},v.isObject=function(a){return a===Object(a)},v.isArguments=function(a){return i.call(a)=="[object Arguments]"},v.isArguments(arguments)||(v.isArguments=function(a){return!!a&&!!v.has(a,"callee")}),v.isFunction=function(a){return i.call(a)=="[object Function]"},v.isString=function(a){return i.call(a)=="[object String]"},v.isNumber=function(a){return i.call(a)=="[object Number]"},v.isNaN=function(a){return a!==a},v.isBoolean=function(a){return a===!0||a===!1||i.call(a)=="[object Boolean]"},v.isDate=function(a){return i.call(a)=="[object Date]"},v.isRegExp=function(a){return i.call(a)=="[object RegExp]"},v.isNull=function(a){return a===null},v.isUndefined=function(a){return a===void 0},v.has=function(a,b){return j.call(a,b)},v.noConflict=function(){return b._=c,this},v.identity=function(a){return a},v.times=function(a,b,c){for(var d=0;d<a;d++)b.call(c,d)},v.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},v.mixin=function(a){w(v.functions(a),function(b){E(b,v[b]=a[b])})};var z=0;v.uniqueId=function(a){var b=z++;return a?a+b:b},v.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var A=/.^/,B=function(a){return a.replace(/\\\\/g,"\\").replace(/\\'/g,"'")};v.template=function(a,b){var c=v.templateSettings,c="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+a.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(c.escape||A,function(a,b){return"',_.escape("+B(b)+"),'"}).replace(c.interpolate||A,function(a,b){return"',"+B(b)+",'"}).replace(c.evaluate||A,function(a,b){return"');"+B(b).replace(/[\r\n\t]/g," ")+";__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');",d=new Function("obj","_",c);return b?d(b,v):function(a){return d.call(this,a,v)}},v.chain=function(a){return v(a).chain()};var C=function(a){this._wrapped=a};v.prototype=C.prototype;var D=function(a,b){return b?v(a).chain():a},E=function(a,b){C.prototype[a]=function(){var a=g.call(arguments);return h.call(a,this._wrapped),D(b.apply(v,a),this._chain)}};v.mixin(v),w("pop,push,reverse,shift,sort,splice,unshift".split(","),function(a){var b=e[a];C.prototype[a]=function(){var c=this._wrapped;b.apply(c,arguments);var d=c.length;return(a=="shift"||a=="splice")&&d===0&&delete c[0],D(c,this._chain)}}),w(["concat","join","slice"],function(a){var b=e[a];C.prototype[a]=function(){return D(b.apply(this._wrapped,arguments),this._chain)}}),C.prototype.chain=function(){return this._chain=!0,this},C.prototype.value=function(){return this._wrapped}})).call(this);((function(){var a=this,b=a.Backbone,c=Array.prototype.slice,d=Array.prototype.splice,e;e="undefined"!=typeof exports?exports:a.Backbone={},e.VERSION="0.9.1";var f=a._;!f&&"undefined"!=typeof require&&(f=require("underscore"));var g=a.jQuery||a.Zepto||a.ender;e.setDomLibrary=function(a){g=a},e.noConflict=function(){return a.Backbone=b,this},e.emulateHTTP=!1,e.emulateJSON=!1,e.Events={on:function(a,b,c){for(var d,a=a.split(/\s+/),e=this._callbacks||(this._callbacks={});d=a.shift();){d=e[d]||(e[d]={});var f=d.tail||(d.tail=d.next={});f.callback=b,f.context=c,d.tail=f.next={}}return this},off:function(a,b,c){var d,e,f;if(a){if(e=this._callbacks)for(a=a.split(/\s+/);d=a.shift();)if(f=e[d],delete e[d],b&&f)for(;(f=f.next)&&f.next;)(f.callback!==b||!!c&&f.context!==c)&&this.on(d,f.callback,f.context)}else delete this._callbacks;return this},trigger:function(a){var b,d,e,f;if(!(e=this._callbacks))return this;f=e.all;for((a=a.split(/\s+/)).push(null);b=a.shift();)f&&a.push({next:f.next,tail:f.tail,event:b}),(d=e[b])&&a.push({next:d.next,tail:d.tail});for(f=c.call(arguments,1);d=a.pop();){b=d.tail;for(e=d.event?[d.event].concat(f):f;(d=d.next)!==b;)d.callback.apply(d.context||this,e)}return this}},e.Events.bind=e.Events.on,e.Events.unbind=e.Events.off,e.Model=function(a,b){var c;a||(a={}),b&&b.parse&&(a=this.parse(a));if(c=s(this,"defaults"))a=f.extend({},c,a);b&&b.collection&&(this.collection=b.collection),this.attributes={},this._escapedAttributes={},this.cid=f.uniqueId("c");if(!this.set(a,{silent:!0}))throw Error("Can't create an invalid model");delete this._changed,this._previousAttributes=f.clone(this.attributes),this.initialize.apply(this,arguments)},f.extend(e.Model.prototype,e.Events,{idAttribute:"id",initialize:function(){},toJSON:function(){return f.clone(this.attributes)},get:function(a){return this.attributes[a]},escape:function(a){var b;return(b=this._escapedAttributes[a])?b:(b=this.attributes[a],this._escapedAttributes[a]=f.escape(null==b?"":""+b))},has:function(a){return null!=this.attributes[a]},set:function(a,b,c){var d,g;f.isObject(a)||null==a?(d=a,c=b):(d={},d[a]=b),c||(c={});if(!d)return this;d instanceof e.Model&&(d=d.attributes);if(c.unset)for(g in d)d[g]=void 0;if(!this._validate(d,c))return!1;this.idAttribute in d&&(this.id=d[this.idAttribute]);var b=this.attributes,h=this._escapedAttributes,i=this._previousAttributes||{},j=this._setting;this._changed||(this._changed={}),this._setting=!0;for(g in d)if(a=d[g],f.isEqual(b[g],a)||delete h[g],c.unset?delete b[g]:b[g]=a,this._changing&&!f.isEqual(this._changed[g],a)&&(this.trigger("change:"+g,this,a,c),this._moreChanges=!0),delete this._changed[g],!f.isEqual(i[g],a)||f.has(b,g)!=f.has(i,g))this._changed[g]=a;return j||(!c.silent&&this.hasChanged()&&this.change(c),this._setting=!1),this},unset:function(a,b){return(b||(b={})).unset=!0,this.set(a,null,b)},clear:function(a){return(a||(a={})).unset=!0,this.set(f.clone(this.attributes),a)},fetch:function(a){var a=a?f.clone(a):{},b=this,c=a.success;return a.success=function(d,e,f){if(!b.set(b.parse(d,f),a))return!1;c&&c(b,d)},a.error=e.wrapError(a.error,b,a),(this.sync||e.sync).call(this,"read",this,a)},save:function(a,b,c){var d,g;f.isObject(a)||null==a?(d=a,c=b):(d={},d[a]=b),c=c?f.clone(c):{},c.wait&&(g=f.clone(this.attributes)),a=f.extend({},c,{silent:!0});if(d&&!this.set(d,c.wait?a:c))return!1;var h=this,i=c.success;return c.success=function(a,b,e){b=h.parse(a,e),c.wait&&(b=f.extend(d||{},b));if(!h.set(b,c))return!1;i?i(h,a):h.trigger("sync",h,a,c)},c.error=e.wrapError(c.error,h,c),b=this.isNew()?"create":"update",b=(this.sync||e.sync).call(this,b,this,c),c.wait&&this.set(g,a),b},destroy:function(a){var a=a?f.clone(a):{},b=this,c=a.success,d=function(){b.trigger("destroy",b,b.collection,a)};if(this.isNew())return d();a.success=function(e){a.wait&&d(),c?c(b,e):b.trigger("sync",b,e,a)},a.error=e.wrapError(a.error,b,a);var g=(this.sync||e.sync).call(this,"delete",this,a);return a.wait||d(),g},url:function(){var a=s(this.collection,"url")||s(this,"urlRoot")||t();return this.isNew()?a:a+("/"==a.charAt(a.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(a){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},change:function(a){if(this._changing||!this.hasChanged())return this;this._moreChanges=this._changing=!0;for(var b in this._changed)this.trigger("change:"+b,this,this._changed[b],a);for(;this._moreChanges;)this._moreChanges=!1,this.trigger("change",this,a);return this._previousAttributes=f.clone(this.attributes),delete this._changed,this._changing=!1,this},hasChanged:function(a){return arguments.length?this._changed&&f.has(this._changed,a):!f.isEmpty(this._changed)},changedAttributes:function(a){if(!a)return this.hasChanged()?f.clone(this._changed):!1;var b,c=!1,d=this._previousAttributes,e;for(e in a)f.isEqual(d[e],b=a[e])||((c||(c={}))[e]=b);return c},previous:function(a){return!arguments.length||!this._previousAttributes?null:this._previousAttributes[a]},previousAttributes:function(){return f.clone(this._previousAttributes)},isValid:function(){return!this.validate(this.attributes)},_validate:function(a,b){if(b.silent||!this.validate)return!0;var a=f.extend({},this.attributes,a),c=this.validate(a,b);return c?(b&&b.error?b.error(this,c,b):this.trigger("error",this,c,b),!1):!0}}),e.Collection=function(a,b){b||(b={}),b.comparator&&(this.comparator=b.comparator),this._reset(),this.initialize.apply(this,arguments),a&&this.reset(a,{silent:!0,parse:b.parse})},f.extend(e.Collection.prototype,e.Events,{model:e.Model,initialize:function(){},toJSON:function(){return this.map(function(a){return a.toJSON()})},add:function(a,b){var c,e,g,h,i,j={},k={};b||(b={}),a=f.isArray(a)?a.slice():[a];for(c=0,e=a.length;c<e;c++){if(!(g=a[c]=this._prepareModel(a[c],b)))throw Error("Can't add an invalid model to a collection");if(j[h=g.cid]||this._byCid[h]||null!=(i=g.id)&&(k[i]||this._byId[i]))throw Error("Can't add the same model to a collection twice");j[h]=k[i]=g}for(c=0;c<e;c++)(g=a[c]).on("all",this._onModelEvent,this),this._byCid[g.cid]=g,null!=g.id&&(this._byId[g.id]=g);this.length+=e,d.apply(this.models,[null!=b.at?b.at:this.models.length,0].concat(a)),this.comparator&&this.sort({silent:!0});if(b.silent)return this;for(c=0,e=this.models.length;c<e;c++)j[(g=this.models[c]).cid]&&(b.index=c,g.trigger("add",g,this,b));return this},remove:function(a,b){var c,d,e,g;b||(b={}),a=f.isArray(a)?a.slice():[a];for(c=0,d=a.length;c<d;c++)if(g=this.getByCid(a[c])||this.get(a[c]))delete this._byId[g.id],delete this._byCid[g.cid],e=this.indexOf(g),this.models.splice(e,1),this.length--,b.silent||(b.index=e,g.trigger("remove",g,this,b)),this._removeReference(g);return this},get:function(a){return null==a?null:this._byId[null!=a.id?a.id:a]},getByCid:function(a){return a&&this._byCid[a.cid||a]},at:function(a){return this.models[a]},sort:function(a){a||(a={});if(!this.comparator)throw Error("Cannot sort a set without a comparator");var b=f.bind(this.comparator,this);return 1==this.comparator.length?this.models=this.sortBy(b):this.models.sort(b),a.silent||this.trigger("reset",this,a),this},pluck:function(a){return f.map(this.models,function(b){return b.get(a)})},reset:function(a,b){a||(a=[]),b||(b={});for(var c=0,d=this.models.length;c<d;c++)this._removeReference(this.models[c]);return this._reset(),this.add(a,{silent:!0,parse:b.parse}),b.silent||this.trigger("reset",this,b),this},fetch:function(a){a=a?f.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=this,c=a.success;return a.success=function(d,e,f){b[a.add?"add":"reset"](b.parse(d,f),a),c&&c(b,d)},a.error=e.wrapError(a.error,b,a),(this.sync||e.sync).call(this,"read",this,a)},create:function(a,b){var c=this,b=b?f.clone(b):{},a=this._prepareModel(a,b);if(!a)return!1;b.wait||c.add(a,b);var d=b.success;return b.success=function(e,f){b.wait&&c.add(e,b),d?d(e,f):e.trigger("sync",a,f,b)},a.save(null,b),a},parse:function(a){return a},chain:function(){return f(this.models).chain()},_reset:function(){this.length=0,this.models=[],this._byId={},this._byCid={}},_prepareModel:function(a,b){return a instanceof e.Model?a.collection||(a.collection=this):(b.collection=this,a=new this.model(a,b),a._validate(a.attributes,b)||(a=!1)),a},_removeReference:function(a){this==a.collection&&delete a.collection,a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){("add"==a||"remove"==a)&&c!=this||("destroy"==a&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],this._byId[b.id]=b),this.trigger.apply(this,arguments))}}),f.each("forEach,each,map,reduce,reduceRight,find,detect,filter,select,reject,every,all,some,any,include,contains,invoke,max,min,sortBy,sortedIndex,toArray,size,first,initial,rest,last,without,indexOf,shuffle,lastIndexOf,isEmpty,groupBy".split(","),function(a){e.Collection.prototype[a]=function(){return f[a].apply(f,[this.models].concat(f.toArray(arguments)))}}),e.Router=function(a){a||(a={}),a.routes&&(this.routes=a.routes),this._bindRoutes(),this.initialize.apply(this,arguments)};var h=/:\w+/g,i=/\*\w+/g,j=/[-[\]{}()+?.,\\^$|#\s]/g;f.extend(e.Router.prototype,e.Events,{initialize:function(){},route:function(a,b,c){return e.history||(e.history=new e.History),f.isRegExp(a)||(a=this._routeToRegExp(a)),c||(c=this[b]),e.history.route(a,f.bind(function(d){d=this._extractParameters(a,d),c&&c.apply(this,d),this.trigger.apply(this,["route:"+b].concat(d)),e.history.trigger("route",this,b,d)},this)),this},navigate:function(a,b){e.history.navigate(a,b)},_bindRoutes:function(){if(this.routes){var a=[],b;for(b in this.routes)a.unshift([b,this.routes[b]]);b=0;for(var c=a.length;b<c;b++)this.route(a[b][0],a[b][1],this[a[b][1]])}},_routeToRegExp:function(a){return a=a.replace(j,"\\$&").replace(h,"([^/]+)").replace(i,"(.*?)"),RegExp("^"+a+"$")},_extractParameters:function(a,b){return a.exec(b).slice(1)}}),e.History=function(){this.handlers=[],f.bindAll(this,"checkUrl")};var k=/^[#\/]/,l=/msie [\w.]+/,m=!1;f.extend(e.History.prototype,e.Events,{interval:50,getFragment:function(a,b){if(null==a)if(this._hasPushState||b){var a=window.location.pathname,c=window.location.search;c&&(a+=c)}else a=window.location.hash;return a=decodeURIComponent(a),a.indexOf(this.options.root)||(a=a.substr(this.options.root.length)),a.replace(k,"")},start:function(a){if(m)throw Error("Backbone.history has already been started");this.options=f.extend({},{root:"/"},this.options,a),this._wantsHashChange=!1!==this.options.hashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.options.pushState||!window.history||!window.history.pushState);var a=this.getFragment(),b=document.documentMode;if(b=l.exec(navigator.userAgent.toLowerCase())&&(!b||7>=b))this.iframe=g('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(a);this._hasPushState?g(window).bind("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!b?g(window).bind("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=a,m=!0,a=window.location,b=a.pathname==this.options.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!b)return this.fragment=this.getFragment(null,!0),window.location.replace(this.options.root+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&b&&a.hash&&(this.fragment=a.hash.replace(k,""),window.history.replaceState({},document.title,a.protocol+"//"+a.host+this.options.root+this.fragment));if(!this.options.silent)return this.loadUrl()},stop:function(){g(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),m=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(){var a=this.getFragment();a==this.fragment&&this.iframe&&(a=this.getFragment(this.iframe.location.hash));if(a==this.fragment||a==decodeURIComponent(this.fragment))return!1;this.iframe&&this.navigate(a),this.loadUrl()||this.loadUrl(window.location.hash)},loadUrl:function(a){var b=this.fragment=this.getFragment(a);return f.any(this.handlers,function(a){if(a.route.test(b))return a.callback(b),!0})},navigate:function(a,b){if(!m)return!1;if(!b||!0===b)b={trigger:b};var c=(a||"").replace(k,"");this.fragment==c||this.fragment==decodeURIComponent(c)||(this._hasPushState?(0!=c.indexOf(this.options.root)&&(c=this.options.root+c),this.fragment=c,window.history[b.replace?"replaceState":"pushState"]({},document.title,c)):this._wantsHashChange?(this.fragment=c,this._updateHash(window.location,c,b.replace),this.iframe&&c!=this.getFragment(this.iframe.location.hash)&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,c,b.replace))):window.location.assign(this.options.root+a),b.trigger&&this.loadUrl(a))},_updateHash:function(a,b,c){c?a.replace(a.toString().replace(/(javascript:|#).*$/,"")+"#"+b):a.hash=b}}),e.View=function(a){this.cid=f.uniqueId("view"),this._configure(a||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()};var n=/^(\S+)\s*(.*)$/,o="model,collection,el,id,attributes,className,tagName".split(",");f.extend(e.View.prototype,e.Events,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this},make:function(a,b,c){return a=document.createElement(a),b&&g(a).attr(b),c&&g(a).html(c),a},setElement:function(a,b){return this.$el=g(a),this.el=this.$el[0],!1!==b&&this.delegateEvents(),this},delegateEvents:function(a){if(a||(a=s(this,"events"))){this.undelegateEvents();for(var b in a){var c=a[b];f.isFunction(c)||(c=this[a[b]]);if(!c)throw Error('Event "'+a[b]+'" does not exist');var d=b.match(n),e=d[1],d=d[2],c=f.bind(c,this),e=e+(".delegateEvents"+this.cid);""===d?this.$el.bind(e,c):this.$el.delegate(d,e,c)}}},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(a){this.options&&(a=f.extend({},this.options,a));for(var b=0,c=o.length;b<c;b++){var d=o[b];a[d]&&(this[d]=a[d])}this.options=a},_ensureElement:function(){if(this.el)this.setElement(this.el,!1);else{var a=s(this,"attributes")||{};this.id&&(a.id=this.id),this.className&&(a["class"]=this.className),this.setElement(this.make(this.tagName,a),!1)}}}),e.Model.extend=e.Collection.extend=e.Router.extend=e.View.extend=function(a,b){var c=r(this,a,b);return c.extend=this.extend,c};var p={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};e.sync=function(a,b,c){var d=p[a],h={type:d,dataType:"json"};return c.url||(h.url=s(b,"url")||t()),!c.data&&b&&("create"==a||"update"==a)&&(h.contentType="application/json",h.data=JSON.stringify(b.toJSON())),e.emulateJSON&&(h.contentType="application/x-www-form-urlencoded",h.data=h.data?{model:h.data}:{}),e.emulateHTTP&&("PUT"===d||"DELETE"===d)&&(e.emulateJSON&&(h.data._method=d),h.type="POST",h.beforeSend=function(a){a.setRequestHeader("X-HTTP-Method-Override",d)}),"GET"!==h.type&&!e.emulateJSON&&(h.processData=!1),g.ajax(f.extend(h,c))},e.wrapError=function(a,b,c){return function(d,e){e=d===b?e:d,a?a(b,e,c):b.trigger("error",b,e,c)}};var q=function(){},r=function(a,b,c){var d;return d=b&&b.hasOwnProperty("constructor")?b.constructor:function(){a.apply(this,arguments)},f.extend(d,a),q.prototype=a.prototype,d.prototype=new q,b&&f.extend(d.prototype,b),c&&f.extend(d,c),d.prototype.constructor=d,d.__super__=a.prototype,d},s=function(a,b){return!a||!a[b]?null:f.isFunction(a[b])?a[b]():a[b]},t=function(){throw Error('A "url" property or function must be specified')}})).call(this);(function(a,b){function c(b,c){var e=b.nodeName.toLowerCase();if("area"===e){var f=b.parentNode,g=f.name,h;return!b.href||!g||f.nodeName.toLowerCase()!=="map"?!1:(h=a("img[usemap=#"+g+"]")[0],!!h&&d(h))}return(/input|select|textarea|button|object/.test(e)?!b.disabled:"a"==e?b.href||c:c)&&d(b)}function d(b){return!a(b).parents().andSelf().filter(function(){return a.curCSS(this,"visibility")==="hidden"||a.expr.filters.hidden(this)}).length}a.ui=a.ui||{};if(a.ui.version)return;a.extend(a.ui,{version:"1.8.13",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),a.fn.extend({_focus:a.fn.focus,focus:function(b,c){return typeof b=="number"?this.each(function(){var d=this;setTimeout(function(){a(d).focus(),c&&c.call(d)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;return a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?b=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):b=this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length){var d=a(this[0]),e,f;while(d.length&&d[0]!==document){e=d.css("position");if(e==="absolute"||e==="relative"||e==="fixed"){f=parseInt(d.css("zIndex"),10);if(!isNaN(f)&&f!==0)return f}d=d.parent()}}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.each(["Width","Height"],function(c,d){function h(b,c,d,f){return a.each(e,function(){c-=parseFloat(a.curCSS(b,"padding"+this,!0))||0,d&&(c-=parseFloat(a.curCSS(b,"border"+this+"Width",!0))||0),f&&(c-=parseFloat(a.curCSS(b,"margin"+this,!0))||0)}),c}var e=d==="Width"?["Left","Right"]:["Top","Bottom"],f=d.toLowerCase(),g={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?g["inner"+d].call(this):this.each(function(){a(this).css(f,h(this,c)+"px")})},a.fn["outer"+d]=function(b,c){return typeof b!="number"?g["outer"+d].call(this,b):this.each(function(){a(this).css(f,h(this,b,!0,c)+"px")})}}),a.extend(a.expr[":"],{data:function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var d=a.attr(b,"tabindex"),e=isNaN(d);return(e||d>=0)&&c(b,!e)}}),a(function(){var b=document.body,c=b.appendChild(c=document.createElement("div"));a.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),a.support.minHeight=c.offsetHeight===100,a.support.selectstart="onselectstart"in c,b.removeChild(c).style.display="none"}),a.extend(a.ui,{plugin:{add:function(b,c,d){var e=a.ui[b].prototype;for(var f in d)e.plugins[f]=e.plugins[f]||[],e.plugins[f].push([c,d[f]])},call:function(a,b,c){var d=a.plugins[b];if(!d||!a.element[0].parentNode)return;for(var e=0;e<d.length;e++)a.options[d[e][0]]&&d[e][1].apply(a.element,c)}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&16:a!==b&&a.contains(b)},hasScroll:function(b,c){if(a(b).css("overflow")==="hidden")return!1;var d=c&&c==="left"?"scrollLeft":"scrollTop",e=!1;return b[d]>0?!0:(b[d]=1,e=b[d]>0,b[d]=0,e)},isOverAxis:function(a,b,c){return a>b&&a<b+c},isOver:function(b,c,d,e,f,g){return a.ui.isOverAxis(b,d,f)&&a.ui.isOverAxis(c,e,g)}})})(jQuery);(function(a,b){if(a.cleanData){var c=a.cleanData;a.cleanData=function(b){for(var d=0,e;(e=b[d])!=null;d++)a(e).triggerHandler("remove");c(b)}}else{var d=a.fn.remove;a.fn.remove=function(b,c){return this.each(function(){return c||(!b||a.filter(b,[this]).length)&&a("*",this).add([this]).each(function(){a(this).triggerHandler("remove")}),d.call(a(this),b,c)})}}a.widget=function(b,c,d){var e=b.split(".")[0],f;b=b.split(".")[1],f=e+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][f]=function(c){return!!a.data(c,b)},a[e]=a[e]||{},a[e][b]=function(a,b){arguments.length&&this._createWidget(a,b)};var g=new c;g.options=a.extend(!0,{},g.options),a[e][b].prototype=a.extend(!0,g,{namespace:e,widgetName:b,widgetEventPrefix:a[e][b].prototype.widgetEventPrefix||b,widgetBaseClass:f},d),a.widget.bridge(b,a[e][b])},a.widget.bridge=function(c,d){a.fn[c]=function(e){var f=typeof e=="string",g=Array.prototype.slice.call(arguments,1),h=this;return e=!f&&g.length?a.extend.apply(null,[!0,e].concat(g)):e,f&&e.charAt(0)==="_"?h:(f?this.each(function(){var d=a.data(this,c),f=d&&a.isFunction(d[e])?d[e].apply(d,g):d;if(f!==d&&f!==b)return h=f,!1}):this.each(function(){var b=a.data(this,c);b?b.option(e||{})._init():a.data(this,c,new d(e,this))}),h)}},a.Widget=function(a,b){arguments.length&&this._createWidget(a,b)},a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(b,c){a.data(c,this.widgetName,this),this.element=a(c),this.options=a.extend(!0,{},this.options,this._getCreateOptions(),b);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled "+"ui-state-disabled")},widget:function(){return this.element},option:function(c,d){var e=c;if(arguments.length===0)return a.extend({},this.options);if(typeof c=="string"){if(d===b)return this.options[c];e={},e[c]=d}return this._setOptions(e),this},_setOptions:function(b){var c=this;return a.each(b,function(a,b){c._setOption(a,b)}),this},_setOption:function(a,b){return this.options[a]=b,a==="disabled"&&this.widget()[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled"+" "+"ui-state-disabled").attr("aria-disabled",b),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(b,c,d){var e=this.options[b];c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),d=d||{};if(c.originalEvent)for(var f=a.event.props.length,g;f;)g=a.event.props[--f],c[g]=c.originalEvent[g];return this.element.trigger(c,d),!(a.isFunction(e)&&e.call(this.element[0],c,d)===!1||c.isDefaultPrevented())}}})(jQuery);(function(a,b){var c=!1;a(document).mouseup(function(a){c=!1}),a.widget("ui.mouse",{version:"@VERSION",options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){if(!0===a.data(c.target,b.widgetName+".preventClickEvent"))return a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(b){if(c)return;this._mouseStarted&&this._mouseUp(b),this._mouseDownEvent=b;var d=this,e=b.which==1,f=typeof this.options.cancel=="string"&&b.target.nodeName?a(b.target).closest(this.options.cancel).length:!1;if(!e||f||!this._mouseCapture(b))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)){this._mouseStarted=this._mouseStart(b)!==!1;if(!this._mouseStarted)return b.preventDefault(),!0}return!0===a.data(b.target,this.widgetName+".preventClickEvent")&&a.removeData(b.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return d._mouseMove(a)},this._mouseUpDelegate=function(a){return d._mouseUp(a)},a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),b.preventDefault(),c=!0,!0},_mouseMove:function(b){return!a.browser.msie||document.documentMode>=9||!!b.button?this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1,this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted):this._mouseUp(b)},_mouseUp:function(b){return a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target==this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(a){return this.mouseDelayMet},_mouseStart:function(a){},_mouseDrag:function(a){},_mouseStop:function(a){},_mouseCapture:function(a){return!0}})})(jQuery);(function(a,b){var c=0;a.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var b=this,c=this.element[0].ownerDocument,d;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(c){if(b.options.disabled||b.element.attr("readonly"))return;d=!1;var e=a.ui.keyCode;switch(c.keyCode){case e.PAGE_UP:b._move("previousPage",c);break;case e.PAGE_DOWN:b._move("nextPage",c);break;case e.UP:b._move("previous",c),c.preventDefault();break;case e.DOWN:b._move("next",c),c.preventDefault();break;case e.ENTER:case e.NUMPAD_ENTER:b.menu.active&&(d=!0,c.preventDefault());case e.TAB:if(!b.menu.active)return;b.menu.select(c);break;case e.ESCAPE:b.element.val(b.term),b.close(c);break;default:clearTimeout(b.searching),b.searching=setTimeout(function(){b.term!=b.element.val()&&(b.selectedItem=null,b.search(null,c))},b.options.delay)}}).bind("keypress.autocomplete",function(a){d&&(d=!1,a.preventDefault())}).bind("focus.autocomplete",function(){if(b.options.disabled)return;b.selectedItem=null,b.previous=b.element.val()}).bind("blur.autocomplete",function(a){if(b.options.disabled)return;clearTimeout(b.searching),b.closing=setTimeout(function(){b.close(a),b._change(a)},150)}),this._initSource(),this.response=function(){return b._response.apply(b,arguments)},this.menu=a("<ul></ul>").addClass("ui-autocomplete").appendTo(a(this.options.appendTo||"body",c)[0]).mousedown(function(c){var d=b.menu.element[0];a(c.target).closest(".ui-menu-item").length||setTimeout(function(){a(document).one("mousedown",function(c){c.target!==b.element[0]&&c.target!==d&&!a.ui.contains(d,c.target)&&b.close()})},1),setTimeout(function(){clearTimeout(b.closing)},13)}).menu({focus:function(a,c){var d=c.item.data("item.autocomplete");!1!==b._trigger("focus",a,{item:d})&&/^key/.test(a.originalEvent.type)&&b.element.val(d.value)},selected:function(a,d){var e=d.item.data("item.autocomplete"),f=b.previous;b.element[0]!==c.activeElement&&(b.element.focus(),b.previous=f,setTimeout(function(){b.previous=f,b.selectedItem=e},1)),!1!==b._trigger("select",a,{item:e})&&b.element.val(e.value),b.term=b.element.val(),b.close(a),b.selectedItem=e},blur:function(a,c){b.menu.element.is(":visible")&&b.element.val()!==b.term&&b.element.val(b.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu"),a.fn.bgiframe&&this.menu.element.bgiframe()},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup"),this.menu.element.remove(),a.Widget.prototype.destroy.call(this)},_setOption:function(b,c){a.Widget.prototype._setOption.apply(this,arguments),b==="source"&&this._initSource(),b==="appendTo"&&this.menu.element.appendTo(a(c||"body",this.element[0].ownerDocument)[0]),b==="disabled"&&c&&this.xhr&&this.xhr.abort()},_initSource:function(){var b=this,d,e;a.isArray(this.options.source)?(d=this.options.source,this.source=function(b,c){c(a.ui.autocomplete.filter(d,b.term))}):typeof this.options.source=="string"?(e=this.options.source,this.source=function(d,f){b.xhr&&b.xhr.abort(),b.xhr=a.ajax({url:e,data:d,dataType:"json",autocompleteRequest:++c,success:function(a,b){this.autocompleteRequest===c&&f(a)},error:function(){this.autocompleteRequest===c&&f([])}})}):this.source=this.options.source},search:function(a,b){a=a!=null?a:this.element.val(),this.term=this.element.val();if(a.length<this.options.minLength)return this.close(b);clearTimeout(this.closing);if(this._trigger("search",b)===!1)return;return this._search(a)},_search:function(a){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.source({term:a},this.response)},_response:function(a){!this.options.disabled&&a&&a.length?(a=this._normalize(a),this._suggest(a),this._trigger("open")):this.close(),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},close:function(a){clearTimeout(this.closing),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.deactivate(),this._trigger("close",a))},_change:function(a){this.previous!==this.element.val()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(b){return b.length&&b[0].label&&b[0].value?b:a.map(b,function(b){return typeof b=="string"?{label:b,value:b}:a.extend({label:b.label||b.value,value:b.value||b.label},b)})},_suggest:function(b){var c=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(c,b),this.menu.deactivate(),this.menu.refresh(),c.show(),this._resizeMenu(),c.position(a.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(new a.Event("mouseover"))},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth(),this.element.outerWidth()))},_renderMenu:function(b,c){var d=this;a.each(c,function(a,c){d._renderItem(b,c)})},_renderItem:function(b,c){return a("<li></li>").data("item.autocomplete",c).append(a("<a></a>").text(c.label)).appendTo(b)},_move:function(a,b){if(!this.menu.element.is(":visible")){this.search(null,b);return}if(this.menu.first()&&/^previous/.test(a)||this.menu.last()&&/^next/.test(a)){this.element.val(this.term),this.menu.deactivate();return}this.menu[a](b)},widget:function(){return this.menu.element}}),a.extend(a.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(b,c){var d=new RegExp(a.ui.autocomplete.escapeRegex(c),"i");return a.grep(b,function(a){return d.test(a.label||a.value||a)})}})})(jQuery),function(a){a.widget("ui.menu",{_create:function(){var b=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(c){if(!a(c.target).closest(".ui-menu-item a").length)return;c.preventDefault(),b.select(c)}),this.refresh()},refresh:function(){var b=this,c=this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem");c.children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(c){b.activate(c,a(this).parent())}).mouseleave(function(){b.deactivate()})},activate:function(a,b){this.deactivate();if(this.hasScroll()){var c=b.offset().top-this.element.offset().top,d=this.element.scrollTop(),e=this.element.height();c<0?this.element.scrollTop(d+c):c>=e&&this.element.scrollTop(d+c-e+b.height())}this.active=b.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end(),this._trigger("focus",a,{item:b})},deactivate:function(){if(!this.active)return;this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),this._trigger("blur"),this.active=null},next:function(a){this.move("next",".ui-menu-item:first",a)},previous:function(a){this.move("prev",".ui-menu-item:last",a)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(a,b,c){if(!this.active){this.activate(c,this.element.children(b));return}var d=this.active[a+"All"](".ui-menu-item").eq(0);d.length?this.activate(c,d):this.activate(c,this.element.children(b))},nextPage:function(b){if(this.hasScroll()){if(!this.active||this.last()){this.activate(b,this.element.children(".ui-menu-item:first"));return}var c=this.active.offset().top,d=this.element.height(),e=this.element.children(".ui-menu-item").filter(function(){var b=a(this).offset().top-c-d+a(this).height();return b<10&&b>-10});e.length||(e=this.element.children(".ui-menu-item:last")),this.activate(b,e)}else this.activate(b,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))},previousPage:function(b){if(this.hasScroll()){if(!this.active||this.first()){this.activate(b,this.element.children(".ui-menu-item:last"));return}var c=this.active.offset().top,d=this.element.height();result=this.element.children(".ui-menu-item").filter(function(){var b=a(this).offset().top-c+d-a(this).height();return b<10&&b>-10}),result.length||(result=this.element.children(".ui-menu-item:first")),this.activate(b,result)}else this.activate(b,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element[a.fn.prop?"prop":"attr"]("scrollHeight")},select:function(a){this._trigger("selected",a,{item:this.active})}})}(jQuery);(function(a,b){a.widget("ui.draggable",a.ui.mouse,{version:"@VERSION",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){this.options.helper=="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},destroy:function(){if(!this.element.data("draggable"))return;return this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this},_mouseCapture:function(b){var c=this.options;return this.helper||c.disabled||a(b.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(b),this.handle?(a(c.iframeFix===!0?"iframe":c.iframeFix).each(function(){a('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(a(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(b){var c=this.options;return this.helper=this._createHelper(b),this._cacheHelperProportions(),a.ui.ddmanager&&(a.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt),c.containment&&this._setContainment(),this._trigger("start",b)===!1?(this._clear(),!1):(this._cacheHelperProportions(),a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this.helper.addClass("ui-draggable-dragging"),this._mouseDrag(b,!0),a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b),!0)},_mouseDrag:function(b,c){this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute");if(!c){var d=this._uiHash();if(this._trigger("drag",b,d)===!1)return this._mouseUp({}),!1;this.position=d.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";return a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),!1},_mouseStop:function(b){var c=!1;a.ui.ddmanager&&!this.options.dropBehaviour&&(c=a.ui.ddmanager.drop(this,b)),this.dropped&&(c=this.dropped,this.dropped=!1);if((!this.element[0]||!this.element[0].parentNode)&&this.options.helper==="original")return!1;if(this.options.revert=="invalid"&&!c||this.options.revert=="valid"&&c||this.options.revert===!0||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,c)){var d=this;a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){d._trigger("stop",b)!==!1&&d._clear()})}else this._trigger("stop",b)!==!1&&this._clear();return!1},_mouseUp:function(b){return this.options.iframeFix===!0&&a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b),a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(b){var c=!this.options.handle||!a(this.options.handle,this.element).length?!0:!1;return a(this.options.handle,this.element).find("*").andSelf().each(function(){this==b.target&&(c=!0)}),c},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b])):c.helper=="clone"?this.element.clone().removeAttr("id"):this.element;return d.parents("body").length||d.appendTo(c.appendTo=="parent"?this.element[0].parentNode:c.appendTo),d[0]!=this.element[0]&&!/(fixed|absolute)/.test(d.css("position"))&&d.css("position","absolute"),d},_adjustOffsetFromHelper:function(b){typeof b=="string"&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&a.browser.msie)b={top:0,left:0};return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var a=this.element.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;b.containment=="parent"&&(b.containment=this.helper[0].parentNode);if(b.containment=="document"||b.containment=="window")this.containment=[b.containment=="document"?0:a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,b.containment=="document"?0:a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(b.containment=="document"?0:a(window).scrollLeft())+a(b.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(b.containment=="document"?0:a(window).scrollTop())+(a(b.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(b.containment)&&b.containment.constructor!=Array){var c=a(b.containment),d=c[0];if(!d)return;var e=c.offset(),f=a(d).css("overflow")!="hidden";this.containment=[(parseInt(a(d).css("borderLeftWidth"),10)||0)+(parseInt(a(d).css("paddingLeft"),10)||0),(parseInt(a(d).css("borderTopWidth"),10)||0)+(parseInt(a(d).css("paddingTop"),10)||0),(f?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(a(d).css("borderLeftWidth"),10)||0)-(parseInt(a(d).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(f?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(a(d).css("borderTopWidth"),10)||0)-(parseInt(a(d).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=c}else b.containment.constructor==Array&&(this.containment=b.containment)},_convertPositionTo:function(b,c){c||(c=this.position);var d=b=="absolute"?1:-1,e=this.options,f=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,g=/(html|body)/i.test(f[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():g?0:f.scrollTop())*d),left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():g?0:f.scrollLeft())*d)}},_generatePosition:function(b){var c=this.options,d=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,e=/(html|body)/i.test(d[0].tagName),f=b.pageX,g=b.pageY;if(this.originalPosition){var h;if(this.containment){if(this.relative_container){var i=this.relative_container.offset();h=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]}else h=this.containment;b.pageX-this.offset.click.left<h[0]&&(f=h[0]+this.offset.click.left),b.pageY-this.offset.click.top<h[1]&&(g=h[1]+this.offset.click.top),b.pageX-this.offset.click.left>h[2]&&(f=h[2]+this.offset.click.left),b.pageY-this.offset.click.top>h[3]&&(g=h[3]+this.offset.click.top)}if(c.grid){var j=c.grid[1]?this.originalPageY+Math.round((g-this.originalPageY)/c.grid[1])*c.grid[1]:this.originalPageY;g=h?j-this.offset.click.top<h[1]||j-this.offset.click.top>h[3]?j-this.offset.click.top<h[1]?j+c.grid[1]:j-c.grid[1]:j:j;var k=c.grid[0]?this.originalPageX+Math.round((f-this.originalPageX)/c.grid[0])*c.grid[0]:this.originalPageX;f=h?k-this.offset.click.left<h[0]||k-this.offset.click.left>h[2]?k-this.offset.click.left<h[0]?k+c.grid[0]:k-c.grid[0]:k:k}}return{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():e?0:d.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():e?0:d.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(b,c,d){return d=d||this._uiHash(),a.ui.plugin.call(this,b,[c,d]),b=="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),a.Widget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(a){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),a.ui.plugin.add("draggable","connectToSortable",{start:function(b,c){var d=a(this).data("draggable"),e=d.options,f=a.extend({},c,{item:d.element});d.sortables=[],a(e.connectToSortable).each(function(){var c=a.data(this,"sortable");c&&!c.options.disabled&&(d.sortables.push({instance:c,shouldRevert:c.options.revert}),c.refreshPositions(),c._trigger("activate",b,f))})},stop:function(b,c){var d=a(this).data("draggable"),e=a.extend({},c,{item:d.element});a.each(d.sortables,function(){this.instance.isOver?(this.instance.isOver=0,d.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(b),this.instance.options.helper=this.instance.options._helper,d.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",b,e))})},drag:function(b,c){var d=a(this).data("draggable"),e=this,f=function(b){var c=this.offset.click.top,d=this.offset.click.left,e=this.positionAbs.top,f=this.positionAbs.left,g=b.height,h=b.width,i=b.top,j=b.left;return a.ui.isOver(e+c,f+d,i,j,g,h)};a.each(d.sortables,function(f){this.instance.positionAbs=d.positionAbs,this.instance.helperProportions=d.helperProportions,this.instance.offset.click=d.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=a(e).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return c.helper[0]},b.target=this.instance.currentItem[0],this.instance._mouseCapture(b,!0),this.instance._mouseStart(b,!0,!0),this.instance.offset.click.top=d.offset.click.top,this.instance.offset.click.left=d.offset.click.left,this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top,d._trigger("toSortable",b),d.dropped=this.instance.element,d.currentItem=d.element,this.instance.fromOutside=d),this.instance.currentItem&&this.instance._mouseDrag(b)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",b,this.instance._uiHash(this.instance)),this.instance._mouseStop(b,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),d._trigger("fromSortable",b),d.dropped=!1)})}}),a.ui.plugin.add("draggable","cursor",{start:function(b,c){var d=a("body"),e=a(this).data("draggable").options;d.css("cursor")&&(e._cursor=d.css("cursor")),d.css("cursor",e.cursor)},stop:function(b,c){var d=a(this).data("draggable").options;d._cursor&&a("body").css("cursor",d._cursor)}}),a.ui.plugin.add("draggable","opacity",{start:function(b,c){var d=a(c.helper),e=a(this).data("draggable").options;d.css("opacity")&&(e._opacity=d.css("opacity")),d.css("opacity",e.opacity)},stop:function(b,c){var d=a(this).data("draggable").options;d._opacity&&a(c.helper).css("opacity",d._opacity)}}),a.ui.plugin.add("draggable","scroll",{start:function(b,c){var d=a(this).data("draggable");d.scrollParent[0]!=document&&d.scrollParent[0].tagName!="HTML"&&(d.overflowOffset=d.scrollParent.offset())},drag:function(b,c){var d=a(this).data("draggable"),e=d.options,f=!1;if(d.scrollParent[0]!=document&&d.scrollParent[0].tagName!="HTML"){if(!e.axis||e.axis!="x")d.overflowOffset.top+d.scrollParent[0].offsetHeight-b.pageY<e.scrollSensitivity?d.scrollParent[0].scrollTop=f=d.scrollParent[0].scrollTop+e.scrollSpeed:b.pageY-d.overflowOffset.top<e.scrollSensitivity&&(d.scrollParent[0].scrollTop=f=d.scrollParent[0].scrollTop-e.scrollSpeed);if(!e.axis||e.axis!="y")d.overflowOffset.left+d.scrollParent[0].offsetWidth-b.pageX<e.scrollSensitivity?d.scrollParent[0].scrollLeft=f=d.scrollParent[0].scrollLeft+e.scrollSpeed:b.pageX-d.overflowOffset.left<e.scrollSensitivity&&(d.scrollParent[0].scrollLeft=f=d.scrollParent[0].scrollLeft-e.scrollSpeed)}else{if(!e.axis||e.axis!="x")b.pageY-a(document).scrollTop()<e.scrollSensitivity?f=a(document).scrollTop(a(document).scrollTop()-e.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<e.scrollSensitivity&&(f=a(document).scrollTop(a(document).scrollTop()+e.scrollSpeed));if(!e.axis||e.axis!="y")b.pageX-a(document).scrollLeft()<e.scrollSensitivity?f=a(document).scrollLeft(a(document).scrollLeft()-e.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<e.scrollSensitivity&&(f=a(document).scrollLeft(a(document).scrollLeft()+e.scrollSpeed))}f!==!1&&a.ui.ddmanager&&!e.dropBehaviour&&a.ui.ddmanager.prepareOffsets(d,b)}}),a.ui.plugin.add("draggable","snap",{start:function(b,c){var d=a(this).data("draggable"),e=d.options;d.snapElements=[],a(e.snap.constructor!=String?e.snap.items||":data(draggable)":e.snap).each(function(){var b=a(this),c=b.offset();this!=d.element[0]&&d.snapElements.push({item:this,width:b.outerWidth(),height:b.outerHeight(),top:c.top,left:c.left})})},drag:function(b,c){var d=a(this).data("draggable"),e=d.options,f=e.snapTolerance,g=c.offset.left,h=g+d.helperProportions.width,i=c.offset.top,j=i+d.helperProportions.height;for(var k=d.snapElements.length-1;k>=0;k--){var l=d.snapElements[k].left,m=l+d.snapElements[k].width,n=d.snapElements[k].top,o=n+d.snapElements[k].height;if(!(l-f<g&&g<m+f&&n-f<i&&i<o+f||l-f<g&&g<m+f&&n-f<j&&j<o+f||l-f<h&&h<m+f&&n-f<i&&i<o+f||l-f<h&&h<m+f&&n-f<j&&j<o+f)){d.snapElements[k].snapping&&d.options.snap.release&&d.options.snap.release.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[k].item})),d.snapElements[k].snapping=!1;continue}if(e.snapMode!="inner"){var p=Math.abs(n-j)<=f,q=Math.abs(o-i)<=f,r=Math.abs(l-h)<=f,s=Math.abs(m-g)<=f;p&&(c.position.top=d._convertPositionTo("relative",{top:n-d.helperProportions.height,left:0}).top-d.margins.top),q&&(c.position.top=d._convertPositionTo("relative",{top:o,left:0}).top-d.margins.top),r&&(c.position.left=d._convertPositionTo("relative",{top:0,left:l-d.helperProportions.width}).left-d.margins.left),s&&(c.position.left=d._convertPositionTo("relative",{top:0,left:m}).left-d.margins.left)}var t=p||q||r||s;if(e.snapMode!="outer"){var p=Math.abs(n-i)<=f,q=Math.abs(o-j)<=f,r=Math.abs(l-g)<=f,s=Math.abs(m-h)<=f;p&&(c.position.top=d._convertPositionTo("relative",{top:n,left:0}).top-d.margins.top),q&&(c.position.top=d._convertPositionTo("relative",{top:o-d.helperProportions.height,left:0}).top-d.margins.top),r&&(c.position.left=d._convertPositionTo("relative",{top:0,left:l}).left-d.margins.left),s&&(c.position.left=d._convertPositionTo("relative",{top:0,left:m-d.helperProportions.width}).left-d.margins.left)}!d.snapElements[k].snapping&&(p||q||r||s||t)&&d.options.snap.snap&&d.options.snap.snap.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[k].item})),d.snapElements[k].snapping=p||q||r||s||t}}}),a.ui.plugin.add("draggable","stack",{start:function(b,c){var d=a(this).data("draggable").options,e=a.makeArray(a(d.stack)).sort(function(b,c){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(c).css("zIndex"),10)||0)});if(!e.length)return;var f=parseInt(e[0].style.zIndex)||0;a(e).each(function(a){this.style.zIndex=f+a}),this[0].style.zIndex=f+e.length}}),a.ui.plugin.add("draggable","zIndex",{start:function(b,c){var d=a(c.helper),e=a(this).data("draggable").options;d.css("zIndex")&&(e._zIndex=d.css("zIndex")),d.css("zIndex",e.zIndex)},stop:function(b,c){var d=a(this).data("draggable").options;d._zIndex&&a(c.helper).css("zIndex",d._zIndex)}})})(jQuery);(function(a,b){a.ui=a.ui||{};var c=/left|center|right/,d=/top|center|bottom/,e="center",f=a.fn.position,g=a.fn.offset;a.fn.position=function(b){if(!b||!b.of)return f.apply(this,arguments);b=a.extend({},b);var g=a(b.of),h=g[0],i=(b.collision||"flip").split(" "),j=b.offset?b.offset.split(" "):[0,0],k,l,m;return h.nodeType===9?(k=g.width(),l=g.height(),m={top:0,left:0}):h.setTimeout?(k=g.width(),l=g.height(),m={top:g.scrollTop(),left:g.scrollLeft()}):h.preventDefault?(b.at="left top",k=l=0,m={top:b.of.pageY,left:b.of.pageX}):(k=g.outerWidth(),l=g.outerHeight(),m=g.offset()),a.each(["my","at"],function(){var a=(b[this]||"").split(" ");a.length===1&&(a=c.test(a[0])?a.concat([e]):d.test(a[0])?[e].concat(a):[e,e]),a[0]=c.test(a[0])?a[0]:e,a[1]=d.test(a[1])?a[1]:e,b[this]=a}),i.length===1&&(i[1]=i[0]),j[0]=parseInt(j[0],10)||0,j.length===1&&(j[1]=j[0]),j[1]=parseInt(j[1],10)||0,b.at[0]==="right"?m.left+=k:b.at[0]===e&&(m.left+=k/2),b.at[1]==="bottom"?m.top+=l:b.at[1]===e&&(m.top+=l/2),m.left+=j[0],m.top+=j[1],this.each(function(){var c=a(this),d=c.outerWidth(),f=c.outerHeight(),g=parseInt(a.curCSS(this,"marginLeft",!0))||0,h=parseInt(a.curCSS(this,"marginTop",!0))||0,n=d+g+(parseInt(a.curCSS(this,"marginRight",!0))||0),o=f+h+(parseInt(a.curCSS(this,"marginBottom",!0))||0),p=a.extend({},m),q;b.my[0]==="right"?p.left-=d:b.my[0]===e&&(p.left-=d/2),b.my[1]==="bottom"?p.top-=f:b.my[1]===e&&(p.top-=f/2),p.left=Math.round(p.left),p.top=Math.round(p.top),q={left:p.left-g,top:p.top-h},a.each(["left","top"],function(c,e){a.ui.position[i[c]]&&a.ui.position[i[c]][e](p,{targetWidth:k,targetHeight:l,elemWidth:d,elemHeight:f,collisionPosition:q,collisionWidth:n,collisionHeight:o,offset:j,my:b.my,at:b.at})}),a.fn.bgiframe&&c.bgiframe(),c.offset(a.extend(p,{using:b.using}))})},a.ui.position={fit:{left:function(b,c){var d=a(window),e=c.collisionPosition.left+c.collisionWidth-d.width()-d.scrollLeft();b.left=e>0?b.left-e:Math.max(b.left-c.collisionPosition.left,b.left)},top:function(b,c){var d=a(window),e=c.collisionPosition.top+c.collisionHeight-d.height()-d.scrollTop();b.top=e>0?b.top-e:Math.max(b.top-c.collisionPosition.top,b.top)}},flip:{left:function(b,c){if(c.at[0]===e)return;var d=a(window),f=c.collisionPosition.left+c.collisionWidth-d.width()-d.scrollLeft(),g=c.my[0]==="left"?-c.elemWidth:c.my[0]==="right"?c.elemWidth:0,h=c.at[0]==="left"?c.targetWidth:-c.targetWidth,i=-2*c.offset[0];b.left+=c.collisionPosition.left<0?g+h+i:f>0?g+h+i:0},top:function(b,c){if(c.at[1]===e)return;var d=a(window),f=c.collisionPosition.top+c.collisionHeight-d.height()-d.scrollTop(),g=c.my[1]==="top"?-c.elemHeight:c.my[1]==="bottom"?c.elemHeight:0,h=c.at[1]==="top"?c.targetHeight:-c.targetHeight,i=-2*c.offset[1];b.top+=c.collisionPosition.top<0?g+h+i:f>0?g+h+i:0}}},a.offset.setOffset||(a.offset.setOffset=function(b,c){/static/.test(a.curCSS(b,"position"))&&(b.style.position="relative");var d=a(b),e=d.offset(),f=parseInt(a.curCSS(b,"top",!0),10)||0,g=parseInt(a.curCSS(b,"left",!0),10)||0,h={top:c.top-e.top+f,left:c.left-e.left+g};"using"in c?c.using.call(b,h):d.css(h)},a.fn.offset=function(b){var c=this[0];return!c||!c.ownerDocument?null:b?this.each(function(){a.offset.setOffset(this,b)}):g.call(this)})})(jQuery);(function(a,b){a.widget("ui.selectable",a.ui.mouse,{version:"@VERSION",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var b=this;this.element.addClass("ui-selectable"),this.dragged=!1;var c;this.refresh=function(){c=a(b.options.filter,b.element[0]),c.addClass("ui-selectee"),c.each(function(){var b=a(this),c=b.offset();a.data(this,"selectable-item",{element:this,$element:b,left:c.left,top:c.top,right:c.left+b.outerWidth(),bottom:c.top+b.outerHeight(),startselected:!1,selected:b.hasClass("ui-selected"),selecting:b.hasClass("ui-selecting"),unselecting:b.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=c.addClass("ui-selectee"),this._mouseInit(),this.helper=a("<div class='ui-selectable-helper'></div>")},destroy:function(){return this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable"),this._mouseDestroy(),this},_mouseStart:function(b){var c=this;this.opos=[b.pageX,b.pageY];if(this.options.disabled)return;var d=this.options;this.selectees=a(d.filter,this.element[0]),this._trigger("start",b),a(d.appendTo).append(this.helper),this.helper.css({left:b.clientX,top:b.clientY,width:0,height:0}),d.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var d=a.data(this,"selectable-item");d.startselected=!0,!b.metaKey&&!b.ctrlKey&&(d.$element.removeClass("ui-selected"),d.selected=!1,d.$element.addClass("ui-unselecting"),d.unselecting=!0,c._trigger("unselecting",b,{unselecting:d.element}))}),a(b.target).parents().andSelf().each(function(){var d=a.data(this,"selectable-item");if(d){var e=!b.metaKey&&!b.ctrlKey||!d.$element.hasClass("ui-selected");return d.$element.removeClass(e?"ui-unselecting":"ui-selected").addClass(e?"ui-selecting":"ui-unselecting"),d.unselecting=!e,d.selecting=e,d.selected=e,e?c._trigger("selecting",b,{selecting:d.element}):c._trigger("unselecting",b,{unselecting:d.element}),!1}})},_mouseDrag:function(b){var c=this;this.dragged=!0;if(this.options.disabled)return;var d=this.options,e=this.opos[0],f=this.opos[1],g=b.pageX,h=b.pageY;if(e>g){var i=g;g=e,e=i}if(f>h){var i=h;h=f,f=i}return this.helper.css({left:e,top:f,width:g-e,height:h-f}),this.selectees.each(function(){var i=a.data(this,"selectable-item");if(!i||i.element==c.element[0])return;var j=!1;d.tolerance=="touch"?j=!(i.left>g||i.right<e||i.top>h||i.bottom<f):d.tolerance=="fit"&&(j=i.left>e&&i.right<g&&i.top>f&&i.bottom<h),j?(i.selected&&(i.$element.removeClass("ui-selected"),i.selected=!1),i.unselecting&&(i.$element.removeClass("ui-unselecting"),i.unselecting=!1),i.selecting||(i.$element.addClass("ui-selecting"),i.selecting=!0,c._trigger("selecting",b,{selecting:i.element}))):(i.selecting&&((b.metaKey||b.ctrlKey)&&i.startselected?(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.$element.addClass("ui-selected"),i.selected=!0):(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.startselected&&(i.$element.addClass("ui-unselecting"),i.unselecting=!0),c._trigger("unselecting",b,{unselecting:i.element}))),i.selected&&!b.metaKey&&!b.ctrlKey&&!i.startselected&&(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,c._trigger("unselecting",b,{unselecting:i.element})))}),!1},_mouseStop:function(b){var c=this;this.dragged=!1;var d=this.options;return a(".ui-unselecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-unselecting"),d.unselecting=!1,d.startselected=!1,c._trigger("unselected",b,{unselected:d.element})}),a(".ui-selecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-selecting").addClass("ui-selected"),d.selecting=!1,d.selected=!0,d.startselected=!0,c._trigger("selected",b,{selected:d.element})}),this._trigger("stop",b),this.helper.remove(),!1}})})(jQuery);!function(a){"use strict";var b=function(a,b){this.init("tooltip",a,b)};b.prototype={constructor:b,init:function(b,c,d){var e,f;this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.enabled=!0,this.options.trigger!="manual"&&(e=this.options.trigger=="hover"?"mouseenter":"focus",f=this.options.trigger=="hover"?"mouseleave":"blur",this.$element.on(e,this.options.selector,a.proxy(this.enter,this)),this.$element.on(f,this.options.selector,a.proxy(this.leave,this))),this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(b){return b=a.extend({},a.fn[this.type].defaults,b,this.$element.data()),b.delay&&typeof b.delay=="number"&&(b.delay={show:b.delay,hide:b.delay}),b},enter:function(b){var c=a(b.currentTarget)[this.type](this._options).data(this.type);if(!c.options.delay||!c.options.delay.show)return c.show();clearTimeout(this.timeout),c.hoverState="in",this.timeout=setTimeout(function(){c.hoverState=="in"&&c.show()},c.options.delay.show)},leave:function(b){var c=a(b.currentTarget)[this.type](this._options).data(this.type);if(!c.options.delay||!c.options.delay.hide)return c.hide();clearTimeout(this.timeout),c.hoverState="out",this.timeout=setTimeout(function(){c.hoverState=="out"&&c.hide()},c.options.delay.hide)},show:function(){var a,b,c,d,e,f,g;if(this.hasContent()&&this.enabled){a=this.tip(),this.setContent(),this.options.animation&&a.addClass("fade"),f=typeof this.options.placement=="function"?this.options.placement.call(this,a[0],this.$element[0]):this.options.placement,b=/in/.test(f),a.remove().css({top:0,left:0,display:"block"}).appendTo(b?this.$element:document.body),c=this.getPosition(b),d=a[0].offsetWidth,e=a[0].offsetHeight;switch(b?f.split(" ")[1]:f){case"bottom":g={top:c.top+c.height,left:c.left+c.width/2-d/2};break;case"top":g={top:c.top-e,left:c.left+c.width/2-d/2};break;case"left":g={top:c.top+c.height/2-e/2,left:c.left-d};break;case"right":g={top:c.top+c.height/2-e/2,left:c.left+c.width}}a.css(g).addClass(f).addClass("in")}},isHTML:function(a){return typeof a!="string"||a.charAt(0)==="<"&&a.charAt(a.length-1)===">"&&a.length>=3||/^(?:[^<]*<[\w\W]+>[^>]*$)/.exec(a)},setContent:function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.isHTML(b)?"html":"text"](b),a.removeClass("fade in top bottom left right")},hide:function(){function d(){var b=setTimeout(function(){c.off(a.support.transition.end).remove()},500);c.one(a.support.transition.end,function(){clearTimeout(b),c.remove()})}var b=this,c=this.tip();c.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?d():c.remove()},fixTitle:function(){var a=this.$element;(a.attr("title")||typeof a.attr("data-original-title")!="string")&&a.attr("data-original-title",a.attr("title")||"").removeAttr("title")},hasContent:function(){return this.getTitle()},getPosition:function(b){return a.extend({},b?{top:0,left:0}:this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||(typeof c.title=="function"?c.title.call(b[0]):c.title),a},tip:function(){return this.$tip=this.$tip||a(this.options.template)},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(){this[this.tip().hasClass("in")?"hide":"show"]()}},a.fn.tooltip=function(c){return this.each(function(){var d=a(this),e=d.data("tooltip"),f=typeof c=="object"&&c;e||d.data("tooltip",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.tooltip.Constructor=b,a.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover",title:"",delay:0}}(window.jQuery);!function(a){"use strict";var b='[data-dismiss="alert"]',c=function(c){a(c).on("click",b,this.close)};c.prototype={constructor:c,close:function(b){function f(){e.remove(),e.trigger("closed")}var c=a(this),d=c.attr("data-target")||c.attr("href"),e=a(d);e.trigger("close"),b&&b.preventDefault(),e.length||(e=c.hasClass("alert")?c:c.parent()),e.removeClass("in"),a.support.transition&&e.hasClass("fade")?e.on(a.support.transition.end,f):f()}},a.fn.alert=function(b){return this.each(function(){var d=a(this),e=d.data("alert");e||d.data("alert",e=new c(this)),typeof b=="string"&&e[b].call(d)})},a.fn.alert.Constructor=c,a(function(){a("body").on("click.alert.data-api",b,c.prototype.close)})}(window.jQuery);!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.button.defaults,c)};b.prototype={constructor:b,setState:function(a){var b="disabled",c=this.$element,d=c.data(),e=c.is("input")?"val":"html";a+="Text",d.resetText||c.data("resetText",c[e]()),c[e](d[a]||this.options[a]),setTimeout(function(){a=="loadingText"?c.addClass(b).attr(b,b):c.removeClass(b).removeAttr(b)},0)},toggle:function(){var a=this.$element.parent('[data-toggle="buttons-radio"]');a&&a.find(".active").removeClass("active"),this.$element.toggleClass("active")}},a.fn.button=function(c){return this.each(function(){var d=a(this),e=d.data("button"),f=typeof c=="object"&&c;e||d.data("button",e=new b(this,f)),c=="toggle"?e.toggle():c&&e.setState(c)})},a.fn.button.defaults={loadingText:"loading..."},a.fn.button.Constructor=b,a(function(){a("body").on("click.button.data-api","[data-toggle^=button]",function(b){a(b.target).button("toggle")})})}(window.jQuery);!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.carousel.defaults,c),this.options.slide&&this.slide(this.options.slide)};b.prototype={cycle:function(){return this.interval=setInterval(a.proxy(this.next,this),this.options.interval),this},to:function(b){var c=this.$element.find(".active"),d=c.parent().children(),e=d.index(c),f=this;if(b>d.length-1||b<0)return;return this.sliding?this.$element.one("slid",function(){f.to(b)}):e==b?this.pause().cycle():this.slide(b>e?"next":"prev",a(d[b]))},pause:function(){return clearInterval(this.interval),this},next:function(){if(this.sliding)return;return this.slide("next")},prev:function(){if(this.sliding)return;return this.slide("prev")},slide:function(b,c){var d=this.$element.find(".active"),e=c||d[b](),f=this.interval,g=b=="next"?"left":"right",h=b=="next"?"first":"last",i=this;return this.sliding=!0,f&&this.pause(),e=e.length?e:this.$element.find(".item")[h](),!a.support.transition&&this.$element.hasClass("slide")?(this.$element.trigger("slide"),d.removeClass("active"),e.addClass("active"),this.sliding=!1,this.$element.trigger("slid")):(e.addClass(b),e[0].offsetWidth,d.addClass(g),e.addClass(g),this.$element.trigger("slide"),this.$element.one(a.support.transition.end,function(){e.removeClass([b,g].join(" ")).addClass("active"),d.removeClass(["active",g].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger("slid")},0)})),f&&this.cycle(),this}},a.fn.carousel=function(c){return this.each(function(){var d=a(this),e=d.data("carousel"),f=typeof c=="object"&&c;e||d.data("carousel",e=new b(this,f)),typeof c=="number"?e.to(c):typeof c=="string"||(c=f.slide)?e[c]():e.cycle()})},a.fn.carousel.defaults={interval:5e3},a.fn.carousel.Constructor=b,a(function(){a("body").on("click.carousel.data-api","[data-slide]",function(b){var c=a(this),d=a(c.attr("data-target")||c.attr("href")),e=!d.data("modal")&&a.extend({},d.data(),c.data());d.carousel(e),b.preventDefault()})})}(window.jQuery);!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.collapse.defaults,c),this.options.parent&&(this.$parent=a(this.options.parent)),this.options.toggle&&this.toggle()};b.prototype={constructor:b,dimension:function(){var a=this.$element.hasClass("width");return a?"width":"height"},show:function(){var b=this.dimension(),c=a.camelCase(["scroll",b].join("-")),d=this.$parent&&this.$parent.find(".in"),e;d&&d.length&&(e=d.data("collapse"),d.collapse("hide"),e||d.data("collapse",null)),this.$element[b](0),this.transition("addClass","show","shown"),this.$element[b](this.$element[0][c])},hide:function(){var a=this.dimension();this.reset(this.$element[a]()),this.transition("removeClass","hide","hidden"),this.$element[a](0)},reset:function(a){var b=this.dimension();this.$element.removeClass("collapse")[b](a||"")[0].offsetWidth,this.$element.addClass("collapse")},transition:function(b,c,d){var e=this,f=function(){c=="show"&&e.reset(),e.$element.trigger(d)};this.$element.trigger(c)[b]("in"),a.support.transition&&this.$element.hasClass("collapse")?this.$element.one(a.support.transition.end,f):f()},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}},a.fn.collapse=function(c){return this.each(function(){var d=a(this),e=d.data("collapse"),f=typeof c=="object"&&c;e||d.data("collapse",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.collapse.defaults={toggle:!0},a.fn.collapse.Constructor=b,a(function(){a("body").on("click.collapse.data-api","[data-toggle=collapse]",function(b){var c=a(this),d=c.attr("data-target")||b.preventDefault()||c.attr("href"),e=a(d).data("collapse")?"toggle":c.data();a(d).collapse(e)})})}(window.jQuery);!function(a){var b=function(b,e){this.element=a(b),this.language=e.language in c?e.language:"en",this.format=d.parseFormat(e.format||this.element.data("date-format")||"mm/dd/yyyy"),this.picker=a(d.template).appendTo("body").on({click:a.proxy(this.click,this),mousedown:a.proxy(this.mousedown,this)}),this.isInput=this.element.is("input"),this.component=this.element.is(".date")?this.element.find(".add-on"):!1,this.component&&this.component.length===0&&(this.component=!1),this.isInput?this.element.on({focus:a.proxy(this.show,this),blur:a.proxy(this._hide,this),keyup:a.proxy(this.update,this),keydown:a.proxy(this.keydown,this)}):this.component?this.component.on("click",a.proxy(this.show,this)):this.element.on("click",a.proxy(this.show,this)),this.autoclose=!1,"autoclose"in e?this.autoclose=e.autoclose:"dateAutoclose"in this.element.data()&&(this.autoclose=this.element.data("date-autoclose"));switch(e.startView){case 2:case"decade":this.viewMode=this.startViewMode=2;break;case 1:case"year":this.viewMode=this.startViewMode=1;break;case 0:case"month":default:this.viewMode=this.startViewMode=0}this.weekStart=e.weekStart||this.element.data("date-weekstart")||c[this.language].weekStart||0,this.weekEnd=this.weekStart==0?6:this.weekStart-1,this.startDate=-Infinity,this.endDate=Infinity,this.setStartDate(e.startDate||this.element.data("date-startdate")),this.setEndDate(e.endDate||this.element.data("date-enddate")),this.fillDow(),this.fillMonths(),this.update(),this.showMode()};b.prototype={constructor:b,show:function(b){this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.place(),a(window).on("resize",a.proxy(this.place,this)),b&&(b.stopPropagation(),b.preventDefault()),this.isInput||a(document).on("mousedown",a.proxy(this.hide,this)),this.element.trigger({type:"show",date:this.date})},_hide:function(b){if(!a.browser.msie)return this.hide.apply(this,arguments);var c=this,d=arguments;function e(){clearTimeout(g),b.target.focus(),c.picker.off("click",e)}function f(){c.hide.apply(c,d),c.picker.off("click",e)}this.picker.on("click",e);var g=setTimeout(f,100)},hide:function(b){this.picker.hide(),a(window).off("resize",this.place),this.viewMode=this.startViewMode,this.showMode(),this.isInput||a(document).off("mousedown",this.hide),b&&b.currentTarget.value&&this.setValue(),this.element.trigger({type:"hide",date:this.date})},setValue:function(){var a=d.formatDate(this.date,this.format,this.language);this.isInput?this.element.prop("value",a):(this.component&&this.element.find("input").prop("value",a),this.element.data("date",a))},setStartDate:function(a){this.startDate=a||-Infinity,this.startDate!==-Infinity&&(this.startDate=d.parseDate(this.startDate,this.format,this.language)),this.update(),this.updateNavArrows()},setEndDate:function(a){this.endDate=a||Infinity,this.endDate!==Infinity&&(this.endDate=d.parseDate(this.endDate,this.format,this.language)),this.update(),this.updateNavArrows()},place:function(){var a=this.component?this.component.offset():this.element.offset();this.picker.css({top:a.top+this.height,left:a.left})},update:function(){this.date=d.parseDate(this.isInput?this.element.prop("value"):this.element.data("date"),this.format,this.language),this.date<this.startDate?this.viewDate=new Date(this.startDate):this.date>this.endDate?this.viewDate=new Date(this.endDate):this.viewDate=new Date(this.date),this.fill()},fillDow:function(){var a=this.weekStart,b="<tr>";while(a<this.weekStart+7)b+='<th class="dow">'+c[this.language].daysMin[a++%7]+"</th>";b+="</tr>",this.picker.find(".datepicker-days thead").append(b)},fillMonths:function(){var a="",b=0;while(b<12)a+='<span class="month">'+c[this.language].monthsShort[b++]+"</span>";this.picker.find(".datepicker-months td").html(a)},fill:function(){var a=new Date(this.viewDate),b=a.getFullYear(),e=a.getMonth(),f=this.startDate!==-Infinity?this.startDate.getFullYear():-Infinity,g=this.startDate!==-Infinity?this.startDate.getMonth():-Infinity,h=this.endDate!==Infinity?this.endDate.getFullYear():Infinity,i=this.endDate!==Infinity?this.endDate.getMonth():Infinity,j=this.date.valueOf();this.picker.find(".datepicker-days th:eq(1)").text(c[this.language].months[e]+" "+b),this.updateNavArrows(),this.fillMonths();var k=new Date(b,e-1,28,0,0,0,0),l=d.getDaysInMonth(k.getFullYear(),k.getMonth());k.setDate(l),k.setDate(l-(k.getDay()-this.weekStart+7)%7);var m=new Date(k);m.setDate(m.getDate()+42),m=m.valueOf(),html=[];var n;while(k.valueOf()<m){k.getDay()==this.weekStart&&html.push("<tr>"),n="";if(k.getFullYear()<b||k.getFullYear()==b&&k.getMonth()<e)n+=" old";else if(k.getFullYear()>b||k.getFullYear()==b&&k.getMonth()>e)n+=" new";k.valueOf()==j&&(n+=" active");if(k.valueOf()<this.startDate||k.valueOf()>this.endDate)n+=" disabled";html.push('<td class="day'+n+'">'+k.getDate()+"</td>"),k.getDay()==this.weekEnd&&html.push("</tr>"),k.setDate(k.getDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(html.join(""));var o=this.date.getFullYear(),p=this.picker.find(".datepicker-months").find("th:eq(1)").text(b).end().find("span").removeClass("active");o==b&&p.eq(this.date.getMonth()).addClass("active"),(b<f||b>h)&&p.addClass("disabled"),b==f&&p.slice(0,g).addClass("disabled"),b==h&&p.slice(i+1).addClass("disabled"),html="",b=parseInt(b/10,10)*10;var q=this.picker.find(".datepicker-years").find("th:eq(1)").text(b+"-"+(b+9)).end().find("td");b-=1;for(var r=-1;r<11;r++)html+='<span class="year'+(r==-1||r==10?" old":"")+(o==b?" active":"")+(b<f||b>h?" disabled":"")+'">'+b+"</span>",b+=1;q.html(html)},updateNavArrows:function(){var a=new Date(this.viewDate),b=a.getFullYear(),c=a.getMonth();switch(this.viewMode){case 0:this.startDate!==-Infinity&&b<=this.startDate.getFullYear()&&c<=this.startDate.getMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==Infinity&&b>=this.endDate.getFullYear()&&c>=this.endDate.getMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:this.startDate!==-Infinity&&b<=this.startDate.getFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==Infinity&&b>=this.endDate.getFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}},click:function(b){b.stopPropagation(),b.preventDefault();var c=a(b.target).closest("span, td, th");if(c.length==1)switch(c[0].nodeName.toLowerCase()){case"th":switch(c[0].className){case"switch":this.showMode(1);break;case"prev":case"next":var e=d.modes[this.viewMode].navStep*(c[0].className=="prev"?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,e);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,e)}this.fill()}break;case"span":if(!c.is(".disabled")){if(c.is(".month")){var f=c.parent().find("span").index(c);this.viewDate.setMonth(f)}else{var g=parseInt(c.text(),10)||0;this.viewDate.setFullYear(g)}this.showMode(-1),this.fill()}break;case"td":if(c.is(".day")&&!c.is(".disabled")){var h=parseInt(c.text(),10)||1,g=this.viewDate.getFullYear(),f=this.viewDate.getMonth();c.is(".old")?f==0?(f=11,g-=1):f-=1:c.is(".new")&&(f==11?(f=0,g+=1):f+=1),this.date=new Date(g,f,h,0,0,0,0),this.viewDate=new Date(g,f,h,0,0,0,0),this.fill(),this.setValue(),this.element.trigger({type:"changeDate",date:this.date});var i;this.isInput?i=this.element:this.component&&(i=this.element.find("input")),i&&(i.change(),this.autoclose&&i.blur())}}},mousedown:function(a){a.stopPropagation(),a.preventDefault()},moveMonth:function(a,b){if(!b)return a;var c=new Date(a.valueOf()),d=c.getDate(),e=c.getMonth(),f=Math.abs(b),g,h;b=b>0?1:-1;if(f==1){h=b==-1?function(){return c.getMonth()==e}:function(){return c.getMonth()!=g},g=e+b,c.setMonth(g);if(g<0||g>11)g=(g+12)%12}else{for(var i=0;i<f;i++)c=this.moveMonth(c,b);g=c.getMonth(),c.setDate(d),h=function(){return g!=c.getMonth()}}while(h())c.setDate(--d),c.setMonth(g);return c},moveYear:function(a,b){return this.moveMonth(a,b*12)},keydown:function(a){if(this.picker.is(":not(:visible)")){a.keyCode==27&&this.show();return}var b,c,d;switch(a.keyCode){case 27:this.hide(),a.preventDefault();break;case 37:case 39:b=a.keyCode==37?-1:1,a.ctrlKey?(this.date=this.moveYear(this.date,b),this.viewDate=this.moveYear(this.viewDate,b)):a.shiftKey?(this.date=this.moveMonth(this.date,b),this.viewDate=this.moveMonth(this.viewDate,b)):(this.date.setDate(this.date.getDate()+b),this.viewDate.setDate(this.viewDate.getDate()+b)),this.setValue(),this.update(),a.preventDefault();break;case 38:case 40:b=a.keyCode==38?-1:1,a.ctrlKey?(this.date=this.moveYear(this.date,b),this.viewDate=this.moveYear(this.viewDate,b)):a.shiftKey?(this.date=this.moveMonth(this.date,b),this.viewDate=this.moveMonth(this.viewDate,b)):(this.date.setDate(this.date.getDate()+b*7),this.viewDate.setDate(this.viewDate.getDate()+b*7)),this.setValue(),this.update(),a.preventDefault();break;case 13:this.hide(),a.preventDefault()}},showMode:function(a){a&&(this.viewMode=Math.max(0,Math.min(2,this.viewMode+a))),this.picker.find(">div").hide().filter(".datepicker-"+d.modes[this.viewMode].clsName).show(),this.updateNavArrows()}},a.fn.datepicker=function(c){var d=Array.apply(null,arguments);return d.shift(),this.each(function(){var e=a(this),f=e.data("datepicker"),g=typeof c=="object"&&c;f||e.data("datepicker",f=new b(this,a.extend({},a.fn.datepicker.defaults,g))),typeof c=="string"&&f[c].apply(f,d)})},a.fn.datepicker.defaults={},a.fn.datepicker.Constructor=b;var c=a.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}},d={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(a){return a%4===0&&a%100!==0||a%400===0},getDaysInMonth:function(a,b){return[31,d.isLeapYear(a)?29:28,31,30,31,30,31,31,30,31,30,31][b]},validParts:/dd?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[-`{-~\t\n\r]+/g,parseFormat:function(a){var b=a.split(this.validParts),c=a.match(this.validParts);if(!b||!b.length||!c||c.length==0)throw new Error("Invalid date format.");return{separators:b,parts:c}},parseDate:function(d,e,f){if(d instanceof Date)return d;if(/^[-+]\d+[dmwy]([\s,]+[-+]\d+[dmwy])*$/.test(d)){var g=/([-+]\d+)([dmwy])/,h=d.match(/([-+]\d+)([dmwy])/g),i,j;d=new Date;for(var k=0;k<h.length;k++){i=g.exec(h[k]),j=parseInt(i[1]);switch(i[2]){case"d":d.setDate(d.getDate()+j);break;case"m":d=b.prototype.moveMonth.call(b.prototype,d,j);break;case"w":d.setDate(d.getDate()+j*7);break;case"y":d=b.prototype.moveYear.call(b.prototype,d,j)}}return new Date(d.getFullYear(),d.getMonth(),d.getDate(),0,0,0)}var h=d?d.match(this.nonpunctuation):[],d=new Date,l,m;d=new Date(d.getFullYear(),d.getMonth(),d.getDate(),0,0,0);if(h.length==e.parts.length)for(var k=0,n=e.parts.length;k<n;k++){l=parseInt(h[k],10)||1;switch(e.parts[k]){case"MM":m=a(c[f].months).filter(function(){var a=this.slice(0,h[k].length),b=h[k].slice(0,a.length);return a==b}),l=a.inArray(m[0],c[f].months)+1;break;case"M":m=a(c[f].monthsShort).filter(function(){var a=this.slice(0,h[k].length),b=h[k].slice(0,a.length);return a==b}),l=a.inArray(m[0],c[f].monthsShort)+1}switch(e.parts[k]){case"dd":case"d":d.setDate(l);break;case"mm":case"m":case"MM":case"M":d.setMonth(l-1);break;case"yy":d.setFullYear(2e3+l);break;case"yyyy":d.setFullYear(l)}}return d},formatDate:function(b,d,e){var f={d:b.getDate(),m:b.getMonth()+1,M:c[e].monthsShort[b.getMonth()],MM:c[e].months[b.getMonth()],yy:b.getFullYear().toString().substring(2),yyyy:b.getFullYear()};f.dd=(f.d<10?"0":"")+f.d,f.mm=(f.m<10?"0":"")+f.m;var b=[],g=a.extend([],d.separators);for(var h=0,i=d.parts.length;h<i;h++)g.length&&b.push(g.shift()),b.push(f[d.parts[h]]);return b.join("")},headTemplate:'<thead><tr><th class="prev"><i class="icon-arrow-left"/></th><th colspan="5" class="switch"></th><th class="next"><i class="icon-arrow-right"/></th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>'};d.template='<div class="datepicker dropdown-menu"><div class="datepicker-days"><table class=" table-condensed">'+d.headTemplate+"<tbody></tbody>"+"</table>"+"</div>"+'<div class="datepicker-months">'+'<table class="table-condensed">'+d.headTemplate+d.contTemplate+"</table>"+"</div>"+'<div class="datepicker-years">'+'<table class="table-condensed">'+d.headTemplate+d.contTemplate+"</table>"+"</div>"+"</div>"}(window.jQuery);!function(a){function d(){a(b).parent().removeClass("open")}"use strict";var b='[data-toggle="dropdown"]',c=function(b){a(b).bind("click",this.toggle)};c.prototype={constructor:c,toggle:function(b){var c=a(this),e=c.attr("data-target")||c.attr("href"),f=a(e),g;return f.length||(f=c.parent()),g=f.hasClass("open"),d(),!g&&f.toggleClass("open"),!1}},a.fn.dropdown=function(b){return this.each(function(){var d=a(this),e=d.data("dropdown");e||d.data("dropdown",e=new c(this)),typeof b=="string"&&e[b].call(d)})},a.fn.dropdown.Constructor=c,a(function(){a(window).on("click.dropdown.data-api",d),a("body").on("click.dropdown.data-api",b,c.prototype.toggle)})}(window.jQuery);!function(a){function c(){var b=this,c=setTimeout(function(){b.$element.off(a.support.transition.end),d.call(b)},500);this.$element.one(a.support.transition.end,function(){clearTimeout(c),d.call(b)})}function d(a){this.$element.hide().trigger("hidden"),e.call(this)}function e(b){var c=this,d=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var e=a.support.transition&&d;this.$backdrop=a('<div class="modal-backdrop '+d+'" />').appendTo(document.body),this.options.backdrop!="static"&&this.$backdrop.click(a.proxy(this.hide,this)),e&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),e?this.$backdrop.one(a.support.transition.end,b):b()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,a.proxy(f,this)):f.call(this)):b&&b()}function f(){this.$backdrop.remove(),this.$backdrop=null}function g(){var b=this;this.isShown&&this.options.keyboard?a(document).on("keyup.dismiss.modal",function(a){a.which==27&&b.hide()}):this.isShown||a(document).off("keyup.dismiss.modal")}"use strict";var b=function(b,c){this.options=a.extend({},a.fn.modal.defaults,c),this.$element=a(b).delegate('[data-dismiss="modal"]',"click.dismiss.modal",a.proxy(this.hide,this))};b.prototype={constructor:b,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var b=this;if(this.isShown)return;this.isShown=!0,this.$element.trigger("show"),g.call(this),e.call(this,function(){var c=a.support.transition&&b.$element.hasClass("fade");!b.$element.parent().length&&b.$element.appendTo(document.body),b.$element.show(),c&&b.$element[0].offsetWidth,b.$element.addClass("in"),c?b.$element.one(a.support.transition.end,function(){b.$element.trigger("shown")}):b.$element.trigger("shown")})},hide:function(b){b&&b.preventDefault();if(!this.isShown)return;var e=this;this.isShown=!1,g.call(this),this.$element.trigger("hide").removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?c.call(this):d.call(this)}},a.fn.modal=function(c){return this.each(function(){var d=a(this),e=d.data("modal"),f=typeof c=="object"&&c;e||d.data("modal",e=new b(this,f)),typeof c=="string"?e[c]():e.show()})},a.fn.modal.defaults={backdrop:!0,keyboard:!0},a.fn.modal.Constructor=b,a(function(){a("body").on("click.modal.data-api",'[data-toggle="modal"]',function(b){var c=a(this),d=a(c.attr("data-target")||c.attr("href")),e=d.data("modal")?"toggle":a.extend({},d.data(),c.data());b.preventDefault(),d.modal(e)})})}(window.jQuery);!function(a){"use strict";var b=function(a,b){this.init("popover",a,b)};b.prototype=a.extend({},a.fn.tooltip.Constructor.prototype,{constructor:b,setContent:function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.isHTML(b)?"html":"text"](b),a.find(".popover-content > *")[this.isHTML(c)?"html":"text"](c),a.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var a,b=this.$element,c=this.options;return a=b.attr("data-content")||(typeof c.content=="function"?c.content.call(b[0]):c.content),a},tip:function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip}}),a.fn.popover=function(c){return this.each(function(){var d=a(this),e=d.data("popover"),f=typeof c=="object"&&c;e||d.data("popover",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.popover.Constructor=b,a.fn.popover.defaults=a.extend({},a.fn.tooltip.defaults,{placement:"right",content:"",template:'<div class="popover"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"><p></p></div></div></div>'})}(window.jQuery);!function(a){function b(b,c){var d=a.proxy(this.process,this),e=a(b).is("body")?a(window):a(b);this.options=a.extend({},a.fn.scrollspy.defaults,c),this.$scrollElement=e.on("scroll.scroll.data-api",d),this.selector=(this.options.target||a(b).attr("href")||"")+" .nav li > a",this.$body=a("body").on("click.scroll.data-api",this.selector,d),this.refresh(),this.process()}"use strict",b.prototype={constructor:b,refresh:function(){this.targets=this.$body.find(this.selector).map(function(){var b=a(this).attr("href");return/^#\w/.test(b)&&a(b).length?b:null}),this.offsets=a.map(this.targets,function(b){return a(b).position().top})},process:function(){var a=this.$scrollElement.scrollTop()+this.options.offset,b=this.offsets,c=this.targets,d=this.activeTarget,e;for(e=b.length;e--;)d!=c[e]&&a>=b[e]&&(!b[e+1]||a<=b[e+1])&&this.activate(c[e])},activate:function(a){var b;this.activeTarget=a,this.$body.find(this.selector).parent(".active").removeClass("active"),b=this.$body.find(this.selector+'[href="'+a+'"]').parent("li").addClass("active"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active")}},a.fn.scrollspy=function(c){return this.each(function(){var d=a(this),e=d.data("scrollspy"),f=typeof c=="object"&&c;e||d.data("scrollspy",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.scrollspy.Constructor=b,a.fn.scrollspy.defaults={offset:10},a(function(){a('[data-spy="scroll"]').each(function(){var b=a(this);b.scrollspy(b.data())})})}(window.jQuery);!function(a){"use strict";var b=function(b){this.element=a(b)};b.prototype={constructor:b,show:function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.attr("data-target")||b.attr("href"),e,f;if(b.parent("li").hasClass("active"))return;e=c.find(".active a").last()[0],b.trigger({type:"show",relatedTarget:e}),f=a(d),this.activate(b.parent("li"),c),this.activate(f,f.parent(),function(){b.trigger({type:"shown",relatedTarget:e})})},activate:function(b,c,d){function g(){e.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),b.addClass("active"),f?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active"),d&&d()}var e=c.find("> .active"),f=d&&a.support.transition&&e.hasClass("fade");f?e.one(a.support.transition.end,g):g(),e.removeClass("in")}},a.fn.tab=function(c){return this.each(function(){var d=a(this),e=d.data("tab");e||d.data("tab",e=new b(this)),typeof c=="string"&&e[c]()})},a.fn.tab.Constructor=b,a(function(){a("body").on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(b){b.preventDefault(),a(this).tab("show")})})}(window.jQuery);!function(a){a(function(){"use strict",a.support.transition=function(){var b=document.body||document.documentElement,c=b.style,d=c.transition!==undefined||c.WebkitTransition!==undefined||c.MozTransition!==undefined||c.MsTransition!==undefined||c.OTransition!==undefined;return d&&{end:function(){var b="TransitionEnd";return a.browser.webkit?b="webkitTransitionEnd":a.browser.mozilla?b="transitionend":a.browser.opera&&(b="oTransitionEnd"),b}()}}()})}(window.jQuery);!function(a){function c(a,b,c){return typeof a=="function"?a.apply(b,c):a}"use strict";var b=function(b,c){this.$element=a(b),this.options=c,this.enabled=!0,this.fixTitle()};b.prototype={show:function(){var b,d,e,f,g,h;if(this.hasContent()&&this.enabled){g=this.tip(),this.setContent(),this.options.animate&&g.addClass("fade"),g.remove().css({top:0,left:0,display:"block"}).prependTo(document.body),b=a.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight}),d=g[0].offsetWidth,e=g[0].offsetHeight,f=c(this.options.placement,this,[g[0],this.$element[0]]);switch(f){case"below":h={top:b.top+b.height+this.options.offset,left:b.left+b.width/2-d/2};break;case"above":h={top:b.top-e-this.options.offset,left:b.left+b.width/2-d/2};break;case"left":h={top:b.top+b.height/2-e/2,left:b.left-d-this.options.offset};break;case"right":h={top:b.top+b.height/2-e/2,left:b.left+b.width+this.options.offset}}g.css(h).addClass(f).addClass("in")}},setContent:function(){var a=this.tip();a.find(".twipsy-inner").html(this.getTitle()),a[0].className="twipsy"},hide:function(){function d(){c.remove()}var b=this,c=this.tip();c.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?c.bind(a.support.transition.end,d):d()},fixTitle:function(){var a=this.$element;(a.attr("title")||typeof a.attr("data-original-title")!="string")&&a.attr("data-original-title",a.attr("title")||"").removeAttr("title")},hasContent:function(){return this.getTitle()},getTitle:function(){var a,b=this.$element,c=this.options;return this.fixTitle(),typeof c.title=="string"?a=b.attr(c.title=="title"?"data-original-title":c.title):typeof c.title=="function"&&(a=c.title.call(b[0])),a=(""+a).replace(/(^\s*|\s*$)/,""),a},tip:function(){return this.$tip=this.$tip||a('<div class="twipsy" />').html(this.options.template)},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(){this[this.tip().hasClass("in")?"hide":"show"]()}},a.fn.twipsy=function(c){return a.fn.twipsy.initWith.call(this,c,b,"twipsy"),this},a.fn.twipsy.initWith=function(b,c,d){function i(e){var f=a.data(e,d);return f||(f=new c(e,a.fn.twipsy.elementOptions(e,b)),a.data(e,d,f)),f}function j(){var a=i(this);a.hoverState="in",!b.delay||!b.delay.show?a.show():(a.fixTitle(),setTimeout(function(){a.hoverState=="in"&&a.show()},b.delay.show))}function k(){var a=i(this);a.hoverState="out",!b.delay||!b.delay.hide?a.hide():setTimeout(function(){a.hoverState=="out"&&a.hide()},b.delay.hide)}var e,f,g,h;return typeof b=="string"?this.each(function(){e=a.data(this,d),e&&e[b]()}):(b=a.extend({},a.fn[d].defaults,b),b.delay&&typeof b.delay=="number"&&(b.delay={show:b.delay,hide:b.delay}),b.live||this.each(function(){i(this)}),b.trigger!="manual"&&(f=b.live?"live":"bind",g=b.trigger=="hover"?"mouseenter":"focus",h=b.trigger=="hover"?"mouseleave":"blur",this[f](g,j)[f](h,k)),this)},a.fn.twipsy.Twipsy=b,a.fn.twipsy.defaults={animate:!0,delay:0,placement:"above",live:!1,offset:0,trigger:"hover",title:"title",template:'<div class="twipsy-arrow"></div><div class="twipsy-inner"></div>'},a.fn.twipsy.rejectAttrOptions=["title"],a.fn.twipsy.elementOptions=function(b,c){var d=a(b).data(),e=a.fn.twipsy.rejectAttrOptions,f=e.length;while(f--)delete d[e[f]];return a.extend({},c,d)}}(window.jQuery||window.ender);!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.typeahead.defaults,c),this.$menu=a(this.options.menu).appendTo("body"),this.data=this.options.data,this.shown=!1,this.listen()};b.prototype={constructor:b,matcher:function(a,b){return~a.toLowerCase().indexOf(b)},select:function(){var a=this.$menu.find(".active").attr("data-value");return this.$element.val(a),this.hide()},show:function(){var b=a.extend({},this.$element.offset(),{height:this.$element[0].offsetHeight});return this.$menu.css({top:b.top+b.height,left:b.left}),this.$menu.show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(a){var b=this,c,d;return this.query=this.$element.val(),this.query?(d=this.query.toLowerCase(),c=jQuery.grep(this.data,function(a){if(b.matcher(a,d))return a}),c.length?this.render(c.slice(0,this.options.items)).show():this.shown?this.hide():this):this.shown?this.hide():this},render:function(b){var c=this,d=new RegExp("("+this.query+")","ig");return b=a(b).map(function(b,e){return b=a(c.options.item).attr("data-value",e),b.find("a").html(e.replace(d,function(a,b){return"<strong>"+b+"</strong>"})),b[0]}),b.first().addClass("active"),this.$menu.html(b),this},next:function(b){var c=this.$menu.find(".active").removeClass("active"),d=c.next();d.length||(d=a(this.$menu.find("li")[0])),d.addClass("active")},prev:function(a){var b=this.$menu.find(".active").removeClass("active"),c=b.prev();c.length||(c=this.$menu.find("li").last()),c.addClass("active")},listen:function(){this.$element.on("blur",a.proxy(this.blur,this)).on("keypress",a.proxy(this.keypress,this)).on("keyup",a.proxy(this.keyup,this)),(a.browser.webkit||a.browser.msie)&&this.$element.on("keydown",a.proxy(this.keypress,this)),this.$menu.on("click",a.proxy(this.click,this)).on("mouseenter","li",a.proxy(this.mouseenter,this))},keyup:function(a){a.stopPropagation(),a.preventDefault();switch(a.keyCode){case 40:case 38:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:this.hide();break;default:this.lookup()}},keypress:function(a){a.stopPropagation();if(!this.shown)return;switch(a.keyCode){case 9:case 13:case 27:a.preventDefault();break;case 38:a.preventDefault(),this.prev();break;case 40:a.preventDefault(),this.next()}},blur:function(a){var b=this;a.stopPropagation(),a.preventDefault(),setTimeout(function(){b.hide()},150)},click:function(a){a.stopPropagation(),a.preventDefault(),this.select()},mouseenter:function(b){this.$menu.find(".active").removeClass("active"),a(b.currentTarget).addClass("active")}},a.fn.typeahead=function(c){return this.each(function(){var d=a(this),e=d.data("typeahead"),f=typeof c=="object"&&c;e||d.data("typeahead",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.typeahead.defaults={items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>'},a.fn.typeahead.Constructor=b,a(function(){a("body").on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(b){var c=a(this);if(c.data("typeahead"))return;b.preventDefault(),c.typeahead(c.data())})})}(window.jQuery);(function(a,b,c){b.fn.touchwipe=function(a){var c={min_move_x:20,min_move_y:20,wipeLeft:function(){},wipeRight:function(){},wipeUp:function(){},wipeDown:function(){},preventDefaultEvents:!0};return a&&b.extend(c,a),this.each(function(){function e(){this.removeEventListener("touchmove",f),a=null,d=!1}function f(f){c.preventDefaultEvents&&f.preventDefault();if(d){var g=f.touches[0].pageX,h=f.touches[0].pageY,i=a-g,j=b-h;Math.abs(i)>=c.min_move_x?(e(),i>0?c.wipeLeft():c.wipeRight()):Math.abs(j)>=c.min_move_y&&(e(),j>0?c.wipeDown():c.wipeUp())}}function g(c){c.touches.length==1&&(a=c.touches[0].pageX,b=c.touches[0].pageY,d=!0,this.addEventListener("touchmove",f,!1))}var a,b,d=!1;"ontouchstart"in document.documentElement&&this.addEventListener("touchstart",g,!1)}),this},b.elastislide=function(a,c){this.$el=b(c),this._init(a)},b.elastislide.defaults={speed:450,easing:"",imageW:190,margin:3,border:2,minItems:1,current:0,onClick:function(){return!1},onSlide:function(){return!1}},b.elastislide.prototype={_init:function(a){this.options=b.extend(!0,{},b.elastislide.defaults,a),this.$slider=this.$el.find("ul"),this.$items=this.$slider.children("li"),this.itemsCount=this.$items.length,this.$esCarousel=this.$slider.parent(),this._validateOptions(),this._configure(),this._addControls(),this._initEvents(),this.$slider.show(),this._slideToCurrent(!1)},_validateOptions:function(){this.options.speed<0&&(this.options.speed=450),this.options.margin<0&&(this.options.margin=4),this.options.border<0&&(this.options.border=1);if(this.options.minItems<1||this.options.minItems>this.itemsCount)this.options.minItems=1;this.options.current>this.itemsCount-1&&(this.options.current=0)},_configure:function(){this.current=this.options.current,this.visibleWidth=this.$esCarousel.width(),this.visibleWidth<this.options.minItems*(this.options.imageW+2*this.options.border)+(this.options.minItems-1)*this.options.margin?(this._setDim((this.visibleWidth-(this.options.minItems-1)*this.options.margin)/this.options.minItems),this._setCurrentValues(),this.fitCount=this.options.minItems):(this._setDim(),this._setCurrentValues()),this.$slider.css({width:this.sliderW})},_setDim:function(a){this.$items.css({marginRight:this.options.margin,width:a?a:this.options.imageW+2*this.options.border}).children("a").css({borderWidth:this.options.border})},_setCurrentValues:function(){this.itemW=this.$items.outerWidth(!0),this.sliderW=this.itemW*this.itemsCount,this.visibleWidth=this.$esCarousel.width(),this.fitCount=Math.floor(this.visibleWidth/this.itemW)},_addControls:function(){this.$navNext=b('<span class="es-nav-next">Next</span>'),this.$navPrev=b('<span class="es-nav-prev">Previous</span>'),b('<div class="es-nav"/>').append(this.$navPrev).append(this.$navNext).appendTo(this.$el)},_toggleControls:function(a,b){a&&b?b===1?a==="right"?this.$navNext.show():this.$navPrev.show():a==="right"?this.$navNext.hide():this.$navPrev.hide():(this.current===this.itemsCount-1||this.fitCount>=this.itemsCount)&&this.$navNext.hide()},_initEvents:function(){var c=this;b(a).bind("resize.elastislide",function(a){c._reload(),clearTimeout(c.resetTimeout),c.resetTimeout=setTimeout(function(){c._slideToCurrent()},200)}),this.$navNext.bind("click.elastislide",function(a){b(".overlay").addClass("hidden"),c._slide("right"),b(".overlay").removeClass("hidden")}),this.$navPrev.bind("click.elastislide",function(a){b(".overlay").addClass("hidden"),c._slide("left"),b(".overlay").removeClass("hidden")}),this.$items.bind("click.elastislide",function(a){return c.options.onClick(b(this)),!1}),c.$slider.touchwipe({wipeLeft:function(){b(".overlay").addClass("hidden"),c._slide("right"),b(".overlay").removeClass("hidden")},wipeRight:function(){b(".overlay").addClass("hidden"),c._slide("left"),b(".overlay").removeClass("hidden")}})},reload:function(a){this._reload(),a&&a.call()},_reload:function(){var a=this;a._setCurrentValues(),a.visibleWidth<a.options.minItems*(a.options.imageW+2*a.options.border)+(a.options.minItems-1)*a.options.margin?(a._setDim((a.visibleWidth-(a.options.minItems-1)*a.options.margin)/a.options.minItems),a._setCurrentValues(),a.fitCount=a.options.minItems):(a._setDim(),a._setCurrentValues()),a.$slider.css({width:a.sliderW+10})},_slide:function(a,d,e,f){var g=parseFloat(this.$slider.css("margin-left"));if(d===c){var h=this.fitCount*this.itemW,d;if(h<0)return!1;if(a==="right"&&this.sliderW-(Math.abs(g)+h)<this.visibleWidth)h=this.sliderW-(Math.abs(g)+this.visibleWidth)-this.options.margin,this._toggleControls("right",-1),this._toggleControls("left",1);else if(a==="left"&&Math.abs(g)-h<0)h=Math.abs(g),this._toggleControls("left",-1),this._toggleControls("right",1);else{var i;a==="right"?i=Math.abs(g)+this.options.margin+Math.abs(h):i=Math.abs(g)-this.options.margin-Math.abs(h),i>0?this._toggleControls("left",1):this._toggleControls("left",-1),i<this.sliderW-this.visibleWidth?this._toggleControls("right",1):this._toggleControls("right",-1)}a==="right"?d="-="+h:d="+="+h}else{var i=Math.abs(d);Math.max(this.sliderW,this.visibleWidth)-i<this.visibleWidth&&(d=-(Math.max(this.sliderW,this.visibleWidth)-this.visibleWidth),d!==0&&(d+=this.options.margin),this._toggleControls("right",-1),i=Math.abs(d)),i>0?this._toggleControls("left",1):this._toggleControls("left",-1),Math.max(this.sliderW,this.visibleWidth)-this.visibleWidth>i+this.options.margin?this._toggleControls("right",1):this._toggleControls("right",-1)}var j;i===0?j=0:i===c?this.$navPrev.is(":hidden")?j=0:j=this.itemsCount-this.fitCount:j=Math.round(i/this.itemW);var k=j+this.fitCount;this.options.onSlide(j,k),b.fn.applyStyle=e===c?b.fn.animate:b.fn.css;var l={marginLeft:d},m=this;this.$slider.stop().applyStyle(l,b.extend(!0,[],{duration:this.options.speed,easing:this.options.easing,complete:function(){f&&f.call()}}))},_slideToCurrent:function(a){var b=this.current*this.itemW;this._slide("",-b,a)},slideToIndex:function(a){var b=a*this.itemW;this._slide("",-b,!1)},add:function(a,b){this.$items=this.$items.add(a),this.$slider.append(a),this.itemsCount=this.$items.length,this._setDim(),this._setCurrentValues(),this.$slider.css({width:this.sliderW}),this._slideToCurrent(),b&&b.call(a)},getIndex:function(){},setCurrent:function(a,b){this.current=a;var c=Math.abs(parseFloat(this.$slider.css("margin-left"))),d=c+this.visibleWidth,e=Math.abs(this.current*this.itemW);(e+this.itemW>d||e<c)&&this._slideToCurrent(),b&&b.call()},destroy:function(a){this._destroy(a)},_destroy:function(c){this.$el.unbind(".elastislide").removeData("elastislide"),b(a).unbind(".elastislide"),c&&c.call()}};var d=function(a){this.console&&console.error(a)};b.fn.elastislide=function(a){if(typeof a=="string"){var c=Array.prototype.slice.call(arguments,1);this.each(function(){var e=b.data(this,"elastislide");if(!e)return;if(!b.isFunction(e[a])||a.charAt(0)==="_"){d("no such method '"+a+"' for elastislide instance");return}e[a].apply(e,c)})}else this.each(function(){var c=b.data(this,"elastislide");c||b.data(this,"elastislide",new b.elastislide(a,this))});return this}})(window,jQuery);(function(a){"use strict",typeof define=="function"&&define.amd?define(["jquery","./vendor/jquery.ui.widget","./jquery.iframe-transport"],a):a(window.jQuery)})(function(a){"use strict",a.widget("blueimp.fileupload",{options:{namespace:undefined,dropZone:a(document),fileInput:undefined,replaceFileInput:!0,paramName:undefined,singleFileUploads:!0,limitMultiFileUploads:undefined,sequentialUploads:!1,limitConcurrentUploads:undefined,forceIframeTransport:!1,redirect:undefined,redirectParamName:undefined,postMessage:undefined,multipart:!0,maxChunkSize:undefined,uploadedBytes:undefined,recalculateProgress:!0,formData:function(a){return a.serializeArray()},add:function(a,b){b.submit()},processData:!1,contentType:!1,cache:!1},_refreshOptionsList:["namespace","dropZone","fileInput"],_isXHRUpload:function(a){var b="undefined";return!a.forceIframeTransport&&typeof XMLHttpRequestUpload!==b&&typeof File!==b&&(!a.multipart||typeof FormData!==b)},_getFormData:function(b){var c;return typeof b.formData=="function"?b.formData(b.form):a.isArray(b.formData)?b.formData:b.formData?(c=[],a.each(b.formData,function(a,b){c.push({name:a,value:b})}),c):[]},_getTotal:function(b){var c=0;return a.each(b,function(a,b){c+=b.size||1}),c},_onProgress:function(a,b){if(a.lengthComputable){var c=b.total||this._getTotal(b.files),d=parseInt(a.loaded/a.total*(b.chunkSize||c),10)+(b.uploadedBytes||0);this._loaded+=d-(b.loaded||b.uploadedBytes||0),b.lengthComputable=!0,b.loaded=d,b.total=c,this._trigger("progress",a,b),this._trigger("progressall",a,{lengthComputable:!0,loaded:this._loaded,total:this._total})}},_initProgressListener:function(b){var c=this,d=b.xhr?b.xhr():a.ajaxSettings.xhr();d.upload&&(a(d.upload).bind("progress",function(a){var d=a.originalEvent;a.lengthComputable=d.lengthComputable,a.loaded=d.loaded,a.total=d.total,c._onProgress(a,b)}),b.xhr=function(){return d})},_initXHRData:function(b){var c,d=b.files[0];if(!b.multipart||b.blob)b.headers=a.extend(b.headers,{"X-File-Name":d.name,"X-File-Type":d.type,"X-File-Size":d.size}),b.blob?b.multipart||(b.contentType="application/octet-stream",b.data=b.blob):(b.contentType=d.type,b.data=d);b.multipart&&typeof FormData!="undefined"&&(b.postMessage?(c=this._getFormData(b),b.blob?c.push({name:b.paramName,value:b.blob}):a.each(b.files,function(a,d){c.push({name:b.paramName,value:d})})):(b.formData instanceof FormData?c=b.formData:(c=new FormData,a.each(this._getFormData(b),function(a,b){c.append(b.name,b.value)})),b.blob?c.append(b.paramName,b.blob,d.name):a.each(b.files,function(a,d){d instanceof Blob&&c.append(b.paramName,d,d.name)})),b.data=c),b.blob=null},_initIframeSettings:function(b){b.dataType="iframe "+(b.dataType||""),b.formData=this._getFormData(b),b.redirect&&a("<a></a>").prop("href",b.url).prop("host")!==location.host&&b.formData.push({name:b.redirectParamName||"redirect",value:b.redirect})},_initDataSettings:function(a){this._isXHRUpload(a)?(this._chunkedUpload(a,!0)||(a.data||this._initXHRData(a),this._initProgressListener(a)),a.postMessage&&(a.dataType="postmessage "+(a.dataType||""))):this._initIframeSettings(a,"iframe")},_initFormSettings:function(b){if(!b.form||!b.form.length)b.form=a(b.fileInput.prop("form"));b.paramName||(b.paramName=b.fileInput.prop("name")||"files[]"),b.url||(b.url=b.form.prop("action")||location.href),b.type=(b.type||b.form.prop("method")||"").toUpperCase(),b.type!=="POST"&&b.type!=="PUT"&&(b.type="POST")},_getAJAXSettings:function(b){var c=a.extend({},this.options,b);return this._initFormSettings(c),this._initDataSettings(c),c},_enhancePromise:function(a){return a.success=a.done,a.error=a.fail,a.complete=a.always,a},_getXHRPromise:function(b,c,d){var e=a.Deferred(),f=e.promise();return c=c||this.options.context||f,b===!0?e.resolveWith(c,d):b===!1&&e.rejectWith(c,d),f.abort=e.promise,this._enhancePromise(f)},_chunkedUpload:function(b,c){var d=this,e=b.files[0],f=e.size,g=b.uploadedBytes=b.uploadedBytes||0,h=b.maxChunkSize||f,i=e.webkitSlice||e.mozSlice||e.slice,j,k,l,m;return!(this._isXHRUpload(b)&&i&&(g||h<f))||b.data?!1:c?!0:g>=f?(e.error="uploadedBytes",this._getXHRPromise(!1,b.context,[null,"error",e.error])):(k=Math.ceil((f-g)/h),j=function(c){return c?j(c-=1).pipe(function(){var f=a.extend({},b);return f.blob=i.call(e,g+c*h,g+(c+1)*h),f.chunkSize=f.blob.size,d._initXHRData(f),d._initProgressListener(f),l=(a.ajax(f)||d._getXHRPromise(!1,f.context)).done(function(){f.loaded||d._onProgress(a.Event("progress",{lengthComputable:!0,loaded:f.chunkSize,total:f.chunkSize}),f),b.uploadedBytes=f.uploadedBytes+=f.chunkSize}),l}):d._getXHRPromise(!0,b.context)},m=j(k),m.abort=function(){return l.abort()},this._enhancePromise(m))},_beforeSend:function(a,b){this._active===0&&this._trigger("start"),this._active+=1,this._loaded+=b.uploadedBytes||0,this._total+=this._getTotal(b.files)},_onDone:function(b,c,d,e){this._isXHRUpload(e)||this._onProgress(a.Event("progress",{lengthComputable:!0,loaded:1,total:1}),e),e.result=b,e.textStatus=c,e.jqXHR=d,this._trigger("done",null,e)},_onFail:function(a,b,c,d){d.jqXHR=a,d.textStatus=b,d.errorThrown=c,this._trigger("fail",null,d),d.recalculateProgress&&(this._loaded-=d.loaded||d.uploadedBytes||0,this._total-=d.total||this._getTotal(d.files))},_onAlways:function(a,b,c,d){this._active-=1,d.textStatus=b,c&&c.always?(d.jqXHR=c,d.result=a):(d.jqXHR=a,d.errorThrown=c),this._trigger("always",null,d),this._active===0&&(this._trigger("stop"),this._loaded=this._total=0)},_onSend:function(b,c){var d=this,e,f,g,h=d._getAJAXSettings(c),i=function(c,f){return d._sending+=1,e=e||(c!==!1&&d._trigger("send",b,h)!==!1&&(d._chunkedUpload(h)||a.ajax(h))||d._getXHRPromise(!1,h.context,f)).done(function(a,b,c){d._onDone(a,b,c,h)}).fail(function(a,b,c){d._onFail(a,b,c,h)}).always(function(a,b,c){d._sending-=1,d._onAlways(a,b,c,h);if(h.limitConcurrentUploads&&h.limitConcurrentUploads>d._sending){var e=d._slots.shift();while(e){if(!e.isRejected()){e.resolve();break}e=d._slots.shift()}}}),e};return this._beforeSend(b,h),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(f=a.Deferred(),this._slots.push(f),g=f.pipe(i)):g=this._sequence=this._sequence.pipe(i,i),g.abort=function(){var a=[undefined,"abort","abort"];return e?e.abort():(f&&f.rejectWith(a),i(!1,a))},this._enhancePromise(g)):i()},_onAdd:function(b,c){var d=this,e=!0,f=a.extend({},this.options,c),g=f.limitMultiFileUploads,h,i;if(!f.singleFileUploads&&!g||!this._isXHRUpload(f))h=[c.files];else if(!f.singleFileUploads&&g){h=[];for(i=0;i<c.files.length;i+=g)h.push(c.files.slice(i,i+g))}return c.originalFiles=c.files,a.each(h||c.files,function(f,g){var i=h?g:[g],j=a.extend({},c,{files:i});return j.submit=function(){return j.jqXHR=this.jqXHR=d._trigger("submit",b,this)!==!1&&d._onSend(b,this),this.jqXHR},e=d._trigger("add",b,j)}),e},_normalizeFile:function(a,b){b.name===undefined&&b.size===undefined&&(b.name=b.fileName,b.size=b.fileSize)},_replaceFileInput:function(b){var c=b.clone(!0);a("<form></form>").append(c)[0].reset(),b.after(c).detach(),a.cleanData(b.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(a,d){return d===b[0]?c[0]:d}),b[0]===this.element[0]&&(this.element=c)},_onChange:function(b){var c=b.data.fileupload,d={files:a.each(a.makeArray(b.target.files),c._normalizeFile),fileInput:a(b.target),form:a(b.target.form)};d.files.length||(d.files=[{name:b.target.value.replace(/^.*\\/,"")}]),c.options.replaceFileInput&&c._replaceFileInput(d.fileInput);if(c._trigger("change",b,d)===!1||c._onAdd(b,d)===!1)return!1},_onPaste:function(b){var c=b.data.fileupload,d=b.originalEvent.clipboardData,e=d&&d.items||[],f={files:[]};a.each(e,function(a,b){var c=b.getAsFile&&b.getAsFile();c&&f.files.push(c)});if(c._trigger("paste",b,f)===!1||c._onAdd(b,f)===!1)return!1},_onDrop:function(b){var c=b.data.fileupload,d=b.dataTransfer=b.originalEvent.dataTransfer,e={files:a.each(a.makeArray(d&&d.files),c._normalizeFile)};if(c._trigger("drop",b,e)===!1||c._onAdd(b,e)===!1)return!1;b.preventDefault()},_onDragOver:function(a){var b=a.data.fileupload,c=a.dataTransfer=a.originalEvent.dataTransfer;if(b._trigger("dragover",a)===!1)return!1;c&&(c.dropEffect=c.effectAllowed="copy"),a.preventDefault()},_initEventHandlers:function(){var a=this.options.namespace;this.options.dropZone.bind("dragover."+a,{fileupload:this},this._onDragOver).bind("drop."+a,{fileupload:this},this._onDrop).bind("paste."+a,{fileupload:this},this._onPaste),this.options.fileInput.bind("change."+a,{fileupload:this},this._onChange)},_destroyEventHandlers:function(){var a=this.options.namespace;this.options.dropZone.unbind("dragover."+a,this._onDragOver).unbind("drop."+a,this._onDrop).unbind("paste."+a,this._onPaste),this.options.fileInput.unbind("change."+a,this._onChange)},_setOption:function(b,c){var d=a.inArray(b,this._refreshOptionsList)!==-1;d&&this._destroyEventHandlers(),a.Widget.prototype._setOption.call(this,b,c),d&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var b=this.options;b.fileInput===undefined?b.fileInput=this.element.is("input:file")?this.element:this.element.find("input:file"):b.fileInput instanceof a||(b.fileInput=a(b.fileInput)),b.dropZone instanceof a||(b.dropZone=a(b.dropZone))},_create:function(){var b=this.options,c=a.extend({},this.element.data());c[this.widgetName]=undefined,a.extend(b,c),b.namespace=b.namespace||this.widgetName,this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=this._loaded=this._total=0,this._initEventHandlers()},destroy:function(){this._destroyEventHandlers(),a.Widget.prototype.destroy.call(this)},enable:function(){a.Widget.prototype.enable.call(this),this._initEventHandlers()},disable:function(){this._destroyEventHandlers(),a.Widget.prototype.disable.call(this)},add:function(b){if(!b||this.options.disabled)return;b.files=a.each(a.makeArray(b.files),this._normalizeFile),this._onAdd(null,b)},send:function(b){if(b&&!this.options.disabled){b.files=a.each(a.makeArray(b.files),this._normalizeFile);if(b.files.length)return this._onSend(null,b)}return this._getXHRPromise(!1,b&&b.context)}})});(function(a){"use strict",typeof define=="function"&&define.amd?define(["jquery"],a):a(window.jQuery)})(function(a){"use strict";var b=0;a.ajaxTransport("iframe",function(c){if(c.async&&(c.type==="POST"||c.type==="GET")){var d,e;return{send:function(f,g){d=a('<form style="display:none;"></form>'),e=a('<iframe src="javascript:false;" name="iframe-transport-'+(b+=1)+'"></iframe>').bind("load",function(){var b;e.unbind("load").bind("load",function(){var b;try{b=e.contents();if(!b.length||!b[0].firstChild)throw new Error}catch(c){b=undefined}g(200,"success",{iframe:b}),a('<iframe src="javascript:false;"></iframe>').appendTo(d),d.remove()}),d.prop("target",e.prop("name")).prop("action",c.url).prop("method",c.type),c.formData&&a.each(c.formData,function(b,c){a('<input type="hidden"/>').prop("name",c.name).val(c.value).appendTo(d)}),c.fileInput&&c.fileInput.length&&c.type==="POST"&&(b=c.fileInput.clone(),c.fileInput.after(function(a){return b[a]}),c.paramName&&c.fileInput.each(function(){a(this).prop("name",c.paramName)}),d.append(c.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data")),d.submit(),b&&b.length&&c.fileInput.each(function(c,d){var e=a(b[c]);a(d).prop("name",e.prop("name")),e.replaceWith(d)})}),d.append(e).appendTo(document.body)},abort:function(){e&&e.unbind("load").prop("src","javascript".concat(":false;")),d&&d.remove()}}}}),a.ajaxSetup({converters:{"iframe text":function(b){return a(b[0].body).text()},"iframe json":function(b){return a.parseJSON(a(b[0].body).text())},"iframe html":function(b){return a(b[0].body).html()},"iframe script":function(b){return a.globalEval(a(b[0].body).text())}}})});(function(a){function f(){return a("<div/>")}var b=Math.abs,c=Math.max,d=Math.min,e=Math.round;a.imgAreaSelect=function(g,h){function X(a){return a+s.left-w.left}function Y(a){return a+s.top-w.top}function Z(a){return a-s.left+w.left}function _(a){return a-s.top+w.top}function ba(a){return a.pageX-w.left}function bb(a){return a.pageY-w.top}function bc(a){var b=a||B,c=a||C;return{x1:e(O.x1*b),y1:e(O.y1*c),x2:e(O.x2*b),y2:e(O.y2*c),width:e(O.x2*b)-e(O.x1*b),height:e(O.y2*c)-e(O.y1*c)}}function bd(a,b,c,d,f){var g=f||B,h=f||C;O={x1:e(a/g||0),y1:e(b/h||0),x2:e(c/g||0),y2:e(d/h||0)},O.width=O.x2-O.x1,O.height=O.y2-O.y1}function be(){if(!i.width())return;s={left:e(i.offset().left),top:e(i.offset().top)},t=i.innerWidth(),u=i.innerHeight(),s.top+=i.outerHeight()-u>>1,s.left+=i.outerWidth()-t>>1,E=e(h.minWidth/B)||0,F=e(h.minHeight/C)||0,G=e(d(h.maxWidth/B||1<<24,t)),H=e(d(h.maxHeight/C||1<<24,u)),a().jquery=="1.3.2"&&y=="fixed"&&!P.getBoundingClientRect&&(s.top+=c(document.body.scrollTop,P.scrollTop),s.left+=c(document.body.scrollLeft,P.scrollLeft)),w=/absolute|relative/.test(v.css("position"))?{left:e(v.offset().left)-v.scrollLeft(),top:e(v.offset().top)-v.scrollTop()}:y=="fixed"?{left:a(document).scrollLeft(),top:a(document).scrollTop()}:{left:0,top:0},q=X(0),r=Y(0),(O.x2>t||O.y2>u)&&bm()}function bf(b){if(!J)return;k.css({left:X(O.x1),top:Y(O.y1)}).add(l).width(U=O.width).height(V=O.height),l.add(m).add(o).css({left:0,top:0}),m.width(c(U-m.outerWidth()+m.innerWidth(),0)).height(c(V-m.outerHeight()+m.innerHeight(),0)),a(n[0]).css({left:q,top:r,width:O.x1,height:u}),a(n[1]).css({left:q+O.x1,top:r,width:U,height:O.y1}),a(n[2]).css({left:q+O.x2,top:r,width:t-O.x2,height:u}),a(n[3]).css({left:q+O.x1,top:r+O.y2,width:U,height:u-O.y2}),U-=o.outerWidth(),V-=o.outerHeight();switch(o.length){case 8:a(o[4]).css({left:U>>1}),a(o[5]).css({left:U,top:V>>1}),a(o[6]).css({left:U>>1,top:V}),a(o[7]).css({top:V>>1});case 4:o.slice(1,3).css({left:U}),o.slice(2,4).css({top:V})}b!==!1&&(a.imgAreaSelect.keyPress!=bv&&a(document).unbind(a.imgAreaSelect.keyPress,a.imgAreaSelect.onKeyPress),h.keys&&a(document)[a.imgAreaSelect.keyPress](a.imgAreaSelect.onKeyPress=bv)),a.browser.msie&&m.outerWidth()-m.innerWidth()==2&&(m.css("margin",0),setTimeout(function(){m.css("margin","auto")},0))}function bg(a){be(),bf(a),K=X(O.x1),L=Y(O.y1),M=X(O.x2),N=Y(O.y2)}function bh(a,b){h.fadeSpeed?a.fadeOut(h.fadeSpeed,b):a.hide()}function bi(a){var b=Z(ba(a))-O.x1,c=_(bb(a))-O.y1;W||(be(),W=!0,k.one("mouseout",function(){W=!1})),D="",h.resizable&&(c<=h.resizeMargin?D="n":c>=O.height-h.resizeMargin&&(D="s"),b<=h.resizeMargin?D+="w":b>=O.width-h.resizeMargin&&(D+="e")),k.css("cursor",D?D+"-resize":h.movable?"move":""),p&&p.toggle()}function bj(b){a("body").css("cursor",""),(h.autoHide||O.width*O.height==0)&&bh(k.add(n),function(){a(this).hide()}),a(document).unbind("mousemove",bn),k.mousemove(bi),h.onSelectEnd(g,bc())}function bk(b){return b.which!=1?!1:(be(),D?(a("body").css("cursor",D+"-resize"),K=X(O[/w/.test(D)?"x2":"x1"]),L=Y(O[/n/.test(D)?"y2":"y1"]),a(document).mousemove(bn).one("mouseup",bj),k.unbind("mousemove",bi)):h.movable?(z=q+O.x1-ba(b),A=r+O.y1-bb(b),k.unbind("mousemove",bi),a(document).mousemove(bp).one("mouseup",function(){h.onSelectEnd(g,bc()),a(document).unbind("mousemove",bp),k.mousemove(bi)})):i.mousedown(b),!1)}function bl(a){I&&(a?(M=c(q,d(q+t,K+b(N-L)*I*(M>K||-1))),N=e(c(r,d(r+u,L+b(M-K)/I*(N>L||-1)))),M=e(M)):(N=c(r,d(r+u,L+b(M-K)/I*(N>L||-1))),M=e(c(q,d(q+t,K+b(N-L)*I*(M>K||-1)))),N=e(N)))}function bm(){K=d(K,q+t),L=d(L,r+u),b(M-K)<E&&(M=K-E*(M<K||-1),M<q?K=q+E:M>q+t&&(K=q+t-E)),b(N-L)<F&&(N=L-F*(N<L||-1),N<r?L=r+F:N>r+u&&(L=r+u-F)),M=c(q,d(M,q+t)),N=c(r,d(N,r+u)),bl(b(M-K)<b(N-L)*I),b(M-K)>G&&(M=K-G*(M<K||-1),bl()),b(N-L)>H&&(N=L-H*(N<L||-1),bl(!0)),O={x1:Z(d(K,M)),x2:Z(c(K,M)),y1:_(d(L,N)),y2:_(c(L,N)),width:b(M-K),height:b(N-L)},bf(),h.onSelectChange(g,bc())}function bn(a){return M=/w|e|^$/.test(D)||I?ba(a):X(O.x2),N=/n|s|^$/.test(D)||I?bb(a):Y(O.y2),bm(),!1}function bo(b,c){M=(K=b)+O.width,N=(L=c)+O.height,a.extend(O,{x1:Z(K),y1:_(L),x2:Z(M),y2:_(N)}),bf(),h.onSelectChange(g,bc())}function bp(a){return K=c(q,d(z+ba(a),q+t-O.width)),L=c(r,d(A+bb(a),r+u-O.height)),bo(K,L),a.preventDefault(),!1}function bq(){a(document).unbind("mousemove",bq),be(),M=K,N=L,bm(),D="",n.is(":visible")||k.add(n).hide().fadeIn(h.fadeSpeed||0),J=!0,a(document).unbind("mouseup",br).mousemove(bn).one("mouseup",bj),k.unbind("mousemove",bi),h.onSelectStart(g,bc())}function br(){a(document).unbind("mousemove",bq).unbind("mouseup",br),bh(k.add(n)),bd(Z(K),_(L),Z(K),_(L)),this instanceof a.imgAreaSelect||(h.onSelectChange(g,bc()),h.onSelectEnd(g,bc()))}function bs(b){return b.which!=1||n.is(":animated")?!1:(be(),z=K=ba(b),A=L=bb(b),a(document).mousemove(bq).mouseup(br),!1)}function bt(){bg(!1)}function bu(){j=!0,bx(h=a.extend({classPrefix:"imgareaselect",movable:!0,parent:"body",resizable:!0,resizeMargin:10,onInit:function(){},onSelectStart:function(){},onSelectChange:function(){},onSelectEnd:function(){}},h)),k.add(n).css({visibility:""}),h.show&&(J=!0,be(),bf(),k.add(n).hide().fadeIn(h.fadeSpeed||0)),setTimeout(function(){h.onInit(g,bc())},0)}function bw(a,b){for(var c in b)h[c]!==undefined&&a.css(b[c],h[c])}function bx(b){b.parent&&(v=a(b.parent)).append(k.add(n)),a.extend(h,b),be();if(b.handles!=null){o.remove(),o=a([]),S=b.handles?b.handles=="corners"?4:8:0;while(S--)o=o.add(f());o.addClass(h.classPrefix+"-handle").css({position:"absolute",fontSize:0,zIndex:x+1||1}),!parseInt(o.css("width"))>=0&&o.width(5).height(5),(T=h.borderWidth)&&o.css({borderWidth:T,borderStyle:"solid"}),bw(o,{borderColor1:"border-color",borderColor2:"background-color",borderOpacity:"opacity"})}B=h.imageWidth/t||1,C=h.imageHeight/u||1,b.x1!=null&&(bd(b.x1,b.y1,b.x2,b.y2),b.show=!b.hide),b.keys&&(h.keys=a.extend({shift:1,ctrl:"resize"},b.keys)),n.addClass(h.classPrefix+"-outer"),l.addClass(h.classPrefix+"-selection");for(S=0;S++<4;)a(m[S-1]).addClass(h.classPrefix+"-border"+S);bw(l,{selectionColor:"background-color",selectionOpacity:"opacity"}),bw(m,{borderOpacity:"opacity",borderWidth:"border-width"}),bw(n,{outerColor:"background-color",outerOpacity:"opacity"}),(T=h.borderColor1)&&a(m[0]).css({borderStyle:"solid",borderColor:T}),(T=h.borderColor2)&&a(m[1]).css({borderStyle:"dashed",borderColor:T}),k.append(l.add(m).add(p).add(o)),a.browser.msie&&((T=n.css("filter").match(/opacity=(\d+)/))&&n.css("opacity",T[1]/100),(T=m.css("filter").match(/opacity=(\d+)/))&&m.css("opacity",T[1]/100)),b.hide?bh(k.add(n)):b.show&&j&&(J=!0,k.add(n).fadeIn(h.fadeSpeed||0),bg()),I=(R=(h.aspectRatio||"").split(/:/))[0]/R[1],i.add(n).unbind("mousedown",bs);if(h.disable||h.enable===!1)k.unbind("mousemove",bi).unbind("mousedown",bk),a(window).unbind("resize",bt);else{if(h.enable||h.disable===!1)(h.resizable||h.movable)&&k.mousemove(bi).mousedown(bk),a(window).resize(bt);h.persistent||i.add(n).mousedown(bs)}h.enable=h.disable=undefined}var i=a(g),j,k=f(),l=f(),m=f().add(f()).add(f()).add(f()),n=f().add(f()).add(f()).add(f()),o=a([]),p,q,r,s={left:0,top:0},t,u,v,w={left:0,top:0},x=0,y="absolute",z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O={x1:0,y1:0,x2:0,y2:0,width:0,height:0},P=document.documentElement,Q,R,S,T,U,V,W,bv=function(a){var b=h.keys,e,f,g=a.keyCode;e=!isNaN(b.alt)&&(a.altKey||a.originalEvent.altKey)?b.alt:!isNaN(b.ctrl)&&a.ctrlKey?b.ctrl:!isNaN(b.shift)&&a.shiftKey?b.shift:isNaN(b.arrows)?10:b.arrows;if(b.arrows=="resize"||b.shift=="resize"&&a.shiftKey||b.ctrl=="resize"&&a.ctrlKey||b.alt=="resize"&&(a.altKey||a.originalEvent.altKey)){switch(g){case 37:e=-e;case 39:f=c(K,M),K=d(K,M),M=c(f+e,K),bl();break;case 38:e=-e;case 40:f=c(L,N),L=d(L,N),N=c(f+e,L),bl(!0);break;default:return}bm()}else{K=d(K,M),L=d(L,N);switch(g){case 37:bo(c(K-e,q),L);break;case 38:bo(K,c(L-e,r));break;case 39:bo(K+d(e,t-Z(M)),L);break;case 40:bo(K,L+d(e,u-_(N)));break;default:return}}return!1};this.remove=function(){bx({disable:!0}),k.add(n).remove()},this.getOptions=function(){return h},this.setOptions=bx,this.getSelection=bc,this.setSelection=bd,this.cancelSelection=br,this.update=bg,Q=i;while(Q.length)x=c(x,isNaN(Q.css("z-index"))?x:Q.css("z-index")),Q.css("position")=="fixed"&&(y="fixed"),Q=Q.parent(":not(body)");x=h.zIndex||x,a.browser.msie&&i.attr("unselectable","on"),a.imgAreaSelect.keyPress=a.browser.msie||a.browser.safari?"keydown":"keypress",a.browser.opera&&(p=f().css({width:"100%",height:"100%",position:"absolute",zIndex:x+2||2})),k.add(n).css({visibility:"hidden",position:y,overflow:"hidden",zIndex:x||"0"}),k.css({zIndex:x+2||2}),l.add(m).css({position:"absolute",fontSize:0}),g.complete||g.readyState=="complete"||!i.is("img")?bu():i.one("load",bu),!j&&a.browser.msie&&a.browser.version>=7&&(g.src=g.src)},a.fn.imgAreaSelect=function(b){return b=b||{},this.each(function(){a(this).data("imgAreaSelect")?b.remove?(a(this).data("imgAreaSelect").remove(),a(this).removeData("imgAreaSelect")):a(this).data("imgAreaSelect").setOptions(b):b.remove||(b.enable===undefined&&b.disable===undefined&&(b.enable=!0),a(this).data("imgAreaSelect",new a.imgAreaSelect(this,b)))}),b.instance?a(this).data("imgAreaSelect"):this}})(jQuery);(function(a){"use strict";var b={decelerate:!0,triggerHardware:!1,y:!0,x:!0,slowdown:.9,maxvelocity:40,throttleFPS:60,movingClass:{up:"kinetic-moving-up",down:"kinetic-moving-down",left:"kinetic-moving-left",right:"kinetic-moving-right"},deceleratingClass:{up:"kinetic-decelerating-up",down:"kinetic-decelerating-down",left:"kinetic-decelerating-left",right:"kinetic-decelerating-right"}},c="kinetic-settings",d="kinetic-active";window.requestAnimationFrame||(window.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a,b){window.setTimeout(a,1e3/60)}}()),a.support=a.support||{},a.extend(a.support,{touch:"ontouchend"in document});var e=function(){return!1},f=function(a,b){return Math.floor(Math.abs(a))===0?0:a*b},g=function(a,b){var c=a;return a>0?a>b&&(c=b):a<0-b&&(c=0-b),c},h=function(a,b){this.removeClass(a.movingClass.up).removeClass(a.movingClass.down).removeClass(a.movingClass.left).removeClass(a.movingClass.right).removeClass(a.deceleratingClass.up).removeClass(a.deceleratingClass.down).removeClass(a.deceleratingClass.left).removeClass(a.deceleratingClass.right),a.velocity>0&&this.addClass(b.right),a.velocity<0&&this.addClass(b.left),a.velocityY>0&&this.addClass(b.down),a.velocityY<0&&this.addClass(b.up)},i=function(a,b){typeof b.stopped=="function"&&b.stopped.call(a,b)},j=function(a,b){var c=a[0];b.x&&c.scrollWidth>0?(c.scrollLeft=b.scrollLeft=c.scrollLeft+b.velocity,Math.abs(b.velocity)>0&&(b.velocity=b.decelerate?f(b.velocity,b.slowdown):b.velocity)):b.velocity=0,b.y&&c.scrollHeight>0?(c.scrollTop=b.scrollTop=c.scrollTop+b.velocityY,Math.abs(b.velocityY)>0&&(b.velocityY=b.decelerate?f(b.velocityY,b.slowdown):b.velocityY)):b.velocityY=0,h.call(a,b,b.deceleratingClass),typeof b.moved=="function"&&b.moved.call(a,b),Math.abs(b.velocity)>0||Math.abs(b.velocityY)>0?window.requestAnimationFrame(function(){j(a,b)}):i(a,b)},k=function(b,d){var e=a.kinetic.callMethods[b],f=Array.prototype.slice.call(arguments);e&&this.each(function(){var b=f.slice(1),d=a(this).data(c);b.unshift(d),e.apply(this,b)})},l=function(b,c){var d=b[0];a.support.touch?(d.addEventListener("touchstart",c.events.touchStart,!1),d.addEventListener("touchend",c.events.inputEnd,!1),d.addEventListener("touchmove",c.events.touchMove,!1)):b.mousedown(c.events.inputDown).mouseup(c.events.inputEnd).mousemove(c.events.inputMove),b.click(c.events.inputClick).bind("selectstart",e),b.bind("dragstart",c.events.dragStart)},m=function(b,c){var d=b[0];a.support.touch?(d.removeEventListener("touchstart",c.events.touchStart,!1),d.removeEventListener("touchend",c.events.inputEnd,!1),d.removeEventListener("touchmove",c.events.touchMove,!1)):b.unbind("mousedown",c.events.inputDown).unbind("mouseup",c.events.inputEnd).unbind("mousemove",c.events.inputMove),b.unbind("click",c.events.inputClick).unbind("selectstart",e),b.unbind("dragstart",c.events.dragStart)},n=function(e){this.addClass(d).each(function(){var d=a.extend({},b,e),f=this,i=a(this),k,m=!1,n,o=!1,p=!1,q,r,s=1e3/d.throttleFPS,t,u;d.velocity=0,d.velocityY=0;var v=function(){k=!1,n=!1,p=!1};a(document).mouseup(v).click(v);var w=function(){d.velocity=g(m-k,d.maxvelocity),d.velocityY=g(o-n,d.maxvelocity)},x=function(b){return a.isFunction(d.filterTarget)?d.filterTarget.call(f,b)!==!1:!0},y=function(a,b){p=!0,d.velocity=m=0,d.velocityY=o=0,k=a,n=b},z=function(){k&&m&&d.decelerate===!1&&(d.decelerate=!0,w(),k=m=p=!1,j(i,d))},A=function(b,c){if(!t||new Date>new Date(t.getTime()+s))t=new Date,p&&(k||n)&&(u&&(a(u).blur(),u=null,i.focus()),d.decelerate=!1,d.velocity=d.velocityY=0,i[0].scrollLeft=d.scrollLeft=d.x?i[0].scrollLeft-(b-k):i[0].scrollLeft,i[0].scrollTop=d.scrollTop=d.y?i[0].scrollTop-(c-n):i[0].scrollTop,m=k,o=n,k=b,n=c,w(),h.call(i,d,d.movingClass),typeof d.moved=="function"&&d.moved.call(i,d))};d.events={touchStart:function(a){x(a.target)&&(y(a.touches[0].clientX,a.touches[0].clientY),a.stopPropagation())},touchMove:function(a){p&&(A(a.touches[0].clientX,a.touches[0].clientY),a.preventDefault&&a.preventDefault())},inputDown:function(a){x(a.target)&&(y(a.clientX,a.clientY),u=a.target,a.target.nodeName==="IMG"&&a.preventDefault(),a.stopPropagation())},inputEnd:function(a){z(),u=null,a.preventDefault&&a.preventDefault()},inputMove:function(a){p&&(A(a.clientX,a.clientY),a.preventDefault&&a.preventDefault())},inputClick:function(a){if(Math.abs(d.velocity)>0)return a.preventDefault(),!1},dragStart:function(a){if(u)return!1}},l(i,d),i.data(c,d).css("cursor","move"),d.triggerHardware&&i.css("-webkit-transform","translate3d(0,0,0)")})};a.kinetic={settingsKey:c,callMethods:{start:function(b,c){var d=a(this);b=a.extend(b,c),b&&(b.decelerate=!1,j(d,b))},end:function(b,c){var d=a(this);b&&(b.decelerate=!0)},stop:function(a,b){a.velocity=0,a.velocityY=0,a.decelerate=!0},detach:function(b,c){var e=a(this);m(e,b),e.removeClass(d).css("cursor","")},attach:function(b,c){var e=a(this);l(e,b),e.addClass(d).css("cursor","move")}}},a.fn.kinetic=function(a){return typeof a=="string"?k.apply(this,arguments):n.call(this,a),this}})(window.jQuery||window.Zepto);(function(){var a=jQuery;window.VS||(window.VS={}),VS.app||(VS.app={}),VS.ui||(VS.ui={}),VS.model||(VS.model={}),VS.utils||(VS.utils={}),VS.VERSION="0.2.1",VS.VisualSearch=function(b){var c={container:"",query:"",unquotable:[],callbacks:{search:a.noop,focus:a.noop,blur:a.noop,facetMatches:a.noop,valueMatches:a.noop}};this.options=_.extend({},c,b),this.options.callbacks=_.extend({},c.callbacks,b.callbacks),VS.app.hotkeys.initialize(),this.searchQuery=new VS.model.SearchQuery,this.searchBox=new VS.ui.SearchBox({app:this});if(b.container){var d=this.searchBox.render().el;a(this.options.container).html(d)}return this.searchBox.value(this.options.query||""),a(window).bind("unload",function(a){}),this},VS.init=function(a){return new VS.VisualSearch(a)}})(),function(){var a=jQuery;VS.ui.SearchBox=Backbone.View.extend({id:"search",events:{"click .VS-cancel-search-box":"clearSearch","mousedown .VS-search-box":"maybeFocusSearch","dblclick .VS-search-box":"highlightSearch","click .VS-search-box":"maybeTripleClick"},initialize:function(){this.app=this.options.app,this.flags={allSelected:!1},this.facetViews=[],this.inputViews=[],_.bindAll(this,"renderFacets","_maybeDisableFacets","disableFacets","deselectAllFacets"),this.app.searchQuery.bind("reset",this.renderFacets),a(document).bind("keydown",this._maybeDisableFacets)},render:function(){return a(this.el).append(JST.search_box({})),a(document.body).setMode("no","search"),this},value:function(a){return a==null?this.serialize():this.setQuery(a)},serialize:function(){var a=[],b=this.inputViews.length;return this.app.searchQuery.each(_.bind(function(b,c){a.push(this.inputViews[c].value()),a.push(b.serialize())},this)),b&&a.push(this.inputViews[b-1].value()),_.compact(a).join(" ")},setQuery:function(a){this.currentQuery=a,VS.app.SearchParser.parse(this.app,a)},viewPosition:function(a){var b=a.type=="facet"?this.facetViews:this.inputViews,c=_.indexOf(b,a);return c==-1&&(c=0),c},searchEvent:function(a){var b=this.value();this.focusSearch(a),this.value(b),this.app.options.callbacks.search(b,this.app.searchQuery)},addFacet:function(a,b,c){a=VS.utils.inflector.trim(a),b=VS.utils.inflector.trim(b||"");if(!a)return;var d=new VS.model.SearchFacet({category:a,value:b||"",app:this.app});this.app.searchQuery.add(d,{at:c}),this.renderFacets();var e=_.detect(this.facetViews,function(a){if(a.model==d)return!0});_.defer(function(){e.enableEdit()})},renderFacets:function(){this.facetViews=[],this.inputViews=[],this.$(".VS-search-inner").empty(),this.app.searchQuery.each(_.bind(function(a,b){this.renderFacet(a,b)},this)),this.renderSearchInput()},renderFacet:function(a,b){var c=new VS.ui.SearchFacet({app:this.app,model:a,order:b});return this.renderSearchInput(),this.facetViews.push(c),this.$(".VS-search-inner").children().eq(b*2).after(c.render().el),c.calculateSize(),_.defer(_.bind(c.calculateSize,c)),c},renderSearchInput:function(){var a=new VS.ui.SearchInput({position:this.inputViews.length,app:this.app});this.$(".VS-search-inner").append(a.render().el),this.inputViews.push(a)},clearSearch:function(a){var b=_.bind(function(){this.disableFacets(),this.value(""),this.flags.allSelected=!1,this.searchEvent(a),this.focusSearch(a)},this);this.app.options.callbacks.clearSearch?this.app.options.callbacks.clearSearch(b):b()},selectAllFacets:function(){this.flags.allSelected=!0,a(document).one("click.selectAllFacets",this.deselectAllFacets),_.each(this.facetViews,function(a,b){a.selectFacet()}),_.each(this.inputViews,function(a,b){a.selectText()})},allSelected:function(a){return a&&(this.flags.allSelected=!1),this.flags.allSelected},deselectAllFacets:function(b){this.disableFacets();if(this.$(b.target).is(".category,input")){var c=a(b.target).closest(".search_facet,.search_input"),d=_.detect(this.facetViews.concat(this.inputViews),function(a){return a.el==c[0]});d.type=="facet"?d.selectFacet():d.type=="input"&&_.defer(function(){d.enableEdit(!0)})}},disableFacets:function(b){_.each(this.inputViews,function(a){a&&a!=b&&(a.modes.editing=="is"||a.modes.selected=="is")&&a.disableEdit()}),_.each(this.facetViews,function(a){a&&a!=b&&(a.modes.editing=="is"||a.modes.selected=="is")&&(a.disableEdit(),a.deselectFacet())}),this.flags.allSelected=!1,this.removeFocus(),a(document).unbind("click.selectAllFacets")},resizeFacets:function(a){_.each(this.facetViews,function(b,c){(!a||b==a)&&b.resize()})},_maybeDisableFacets:function(a){if(this.flags.allSelected&&VS.app.hotkeys.key(a)=="backspace")return a.preventDefault(),this.clearSearch(a),!1;this.flags.allSelected&&VS.app.hotkeys.printable(a)&&this.clearSearch(a)},focusNextFacet:function(a,b,c){c=c||{};var d=this.facetViews.length,e=c.viewPosition||this.viewPosition(a);c.skipToFacet?c.skipToFacet&&a.type=="text"&&d==e&&b>=0&&(e=0,b=0):(a.type=="text"&&b>0&&(b-=1),a.type=="facet"&&b<0&&(b+=1));var f,g=Math.min(d,e+b);a.type=="text"?(g>=0&&g<d?f=this.facetViews[g]:g==d&&(f=this.inputViews[this.inputViews.length-1]),f&&c.selectFacet&&f.type=="facet"?f.selectFacet():f&&(f.enableEdit(),f.setCursorAtEnd(b||c.startAtEnd))):a.type=="facet"&&(c.skipToFacet?g>=d||g<0?(f=_.last(this.inputViews),f.enableEdit()):(f=this.facetViews[g],f.enableEdit(),f.setCursorAtEnd(b||c.startAtEnd)):(f=this.inputViews[g],f.enableEdit())),c.selectText&&f.selectText(),this.resizeFacets()},maybeFocusSearch:function(b){(a(b.target).is(".VS-search-box")||a(b.target).is(".VS-search-inner")||b.type=="keydown")&&this.focusSearch(b)},focusSearch:function(a,b){var c=this.inputViews[this.inputViews.length-1];c.enableEdit(b),b||c.setCursorAtEnd(-1),a.type=="keydown"&&(c.keydown(a),c.box.trigger("keydown")),_.defer(_.bind(function(){this.$("input:focus").length||c.enableEdit(b)},this))},highlightSearch:function(b){if(a(b.target).is(".VS-search-box")||a(b.target).is(".VS-search-inner")||b.type=="keydown"){var c=this.inputViews[this.inputViews.length-1];c.startTripleClickTimer(),this.focusSearch(b,!0)}},maybeTripleClick:function(a){var b=this.inputViews[this.inputViews.length-1];return b.maybeTripleClick(a)},addFocus:function(){this.app.options.callbacks.focus(),this.$(".VS-search-box").addClass("VS-focus")},removeFocus:function(){this.app.options.callbacks.blur();var a=_.any(this.facetViews.concat(this.inputViews),function(a){return a.isFocused()});a||this.$(".VS-search-box").removeClass("VS-focus")},showFacetCategoryMenu:function(a){a.preventDefault(),a.stopPropagation();if(this.facetCategoryMenu&&this.facetCategoryMenu.modes.open=="is")return this.facetCategoryMenu.close();var b=[{title:"Account",onClick:_.bind(this.addFacet,this,"account","")},{title:"Project",onClick:_.bind(this.addFacet,this,"project","")},{title:"Filter",onClick:_.bind(this.addFacet,this,"filter","")},{title:"Access",onClick:_.bind(this.addFacet,this,"access","")}],c=this.facetCategoryMenu||(this.facetCategoryMenu=new dc.ui.Menu({items:b,standalone:!0}));return this.$(".VS-icon-search").after(c.render().open().content),!1}})}(),function(){var a=jQuery;VS.ui.SearchFacet=Backbone.View.extend({type:"facet",className:"search_facet",events:{"click .category":"selectFacet","keydown input":"keydown","mousedown input":"enableEdit","mouseover .VS-icon-cancel":"showDelete","mouseout .VS-icon-cancel":"hideDelete","click .VS-icon-cancel":"remove"},initialize:function(a){this.flags={canClose:!1},_.bindAll(this,"set","keydown","deselectFacet","deferDisableEdit")},render:function(){return a(this.el).html(JST.search_facet({model:this.model})),this.setMode("not","editing"),this.setMode("not","selected"),this.box=this.$("input"),this.box.val(this.model.get("value")),this.box.bind("blur",this.deferDisableEdit),this.box.bind("input propertychange",this.keydown),this.setupAutocomplete(),this},calculateSize:function(){this.box.autoGrowInput(),this.box.unbind("updated.autogrow"),this.box.bind("updated.autogrow",_.bind(this.moveAutocomplete,this))},resize:function(a){this.box.trigger("resize.autogrow",a)},setupAutocomplete:function(){this.box.autocomplete({source:_.bind(this.autocompleteValues,this),minLength:0,delay:0,autoFocus:!0,position:{offset:"0 5"},select:_.bind(function(a,b){a.preventDefault();var c=this.model.get("value");return this.set(b.item.value),(c!=b.item.value||this.box.val()!=b.item.value)&&this.search(a),!1},this),open:_.bind(function(b,c){var d=this.box;this.box.autocomplete("widget").find(".ui-menu-item").each(function(){var b=a(this);b.data("item.autocomplete")["value"]==d.val()&&d.data("autocomplete").menu.activate(new a.Event("mouseover"),b)})},this)}),this.box.autocomplete("widget").addClass("VS-interface")},moveAutocomplete:function(){var a=this.box.data("autocomplete");a&&a.menu.element.position({my:"left top",at:"left bottom",of:this.box.data("autocomplete").element,collision:"flip",offset:"0 5"})},searchAutocomplete:function(a){var b=this.box.data("autocomplete");if(b){var c=b.menu.element;b.search(),c.outerWidth(Math.max(c.width("").outerWidth(),b.element.outerWidth()))}},closeAutocomplete:function(){var a=this.box.data("autocomplete");a&&a.close()},autocompleteValues:function(b,c){var d=this.model.get("category"),e=this.model.get("value"),f=b.term;this.options.app.options.callbacks.valueMatches(d,f,function(b,d){d=d||{},b=b||[];if(f&&e!=f){var g=VS.utils.inflector.escapeRegExp(f||""),h=new RegExp("\\b"+g,"i");b=a.grep(b,function(a){return h.test(a)||h.test(a.value)||h.test(a.label)})}d.preserveOrder?c(b):c(_.sortBy(b,function(a){return a==e||a.value==e?"":a}))})},set:function(a){if(!a)return;this.model.set({value:a})},search:function(a,b){b||(b=1),this.closeAutocomplete(),this.options.app.searchBox.searchEvent(a),_.defer(_.bind(function(){this.options.app.searchBox.focusNextFacet(this,b,{viewPosition:this.options.order})},this))},enableEdit:function(){this.modes.editing!="is"&&(this.setMode("is","editing"),this.deselectFacet(),this.box.val()==""&&this.box.val(this.model.get("value"))),this.flags.canClose=!1,this.options.app.searchBox.disableFacets(this),this.options.app.searchBox.addFocus(),_.defer(_.bind(function(){this.options.app.searchBox.addFocus()},this)),this.resize(),this.searchAutocomplete(),this.box.focus()},deferDisableEdit:function(){this.flags.canClose=!0,_.delay(_.bind(function(){this.flags.canClose&&!this.box.is(":focus")&&this.modes.editing=="is"&&this.modes.selected!="is"&&this.disableEdit()},this),250)},disableEdit:function(){var a=VS.utils.inflector.trim(this.box.val());a!=this.model.get("value")&&this.set(a),this.flags.canClose=!1,this.box.selectRange(0,0),this.box.blur(),this.setMode("not","editing"),this.closeAutocomplete(),this.options.app.searchBox.removeFocus()},selectFacet:function(b){b&&b.preventDefault();var c=this.options.app.searchBox.allSelected();if(this.modes.selected=="is")return;this.box.is(":focus")&&(this.box.setCursorPosition(0),this.box.blur()),this.flags.canClose=!1,this.closeAutocomplete(),this.setMode("is","selected"),this.setMode("not","editing");if(!c||b)a(document).unbind("keydown.facet",this.keydown),a(document).unbind("click.facet",this.deselectFacet),_.defer(_.bind(function(){a(document).unbind("keydown.facet").bind("keydown.facet",this.keydown),a(document).unbind("click.facet").one("click.facet",this.deselectFacet)},this)),this.options.app.searchBox.disableFacets(this),this.options.app.searchBox.addFocus();return!1},deselectFacet:function(b){return b&&b.preventDefault(),this.modes.selected=="is"&&(this.setMode("not","selected"),this.closeAutocomplete(),this.options.app.searchBox.removeFocus()),a(document).unbind("keydown.facet",this.keydown),a(document).unbind("click.facet",this.deselectFacet),!1},isFocused:function(){return this.box.is(":focus")},showDelete:function(){a(this.el).addClass("search_facet_maybe_delete")},hideDelete:function(){a(this.el).removeClass("search_facet_maybe_delete")},setCursorAtEnd:function(a){a==-1?this.box.setCursorPosition(this.box.val().length):this.box.setCursorPosition(0)},remove:function(a){var b=this.model.get("value");this.deselectFacet(),this.disableEdit(),this.options.app.searchQuery.remove(this.model),b?this.search(a,-1):(this.options.app.searchBox.renderFacets(),this.options.app.searchBox.focusNextFacet(this,-1,{viewPosition:this.options.order}))},selectText:function(){this.box.selectRange(0,this.box.val().length)},keydown:function(a){var b=VS.app.hotkeys.key(a);if(b=="enter"&&this.box.val())this.disableEdit(),this.search(a);else if(b=="left")this.modes.selected=="is"?(this.deselectFacet(),this.options.app.searchBox.focusNextFacet(this,-1,{startAtEnd:-1})):this.box.getCursorPosition()==0&&!this.box.getSelection().length&&this.selectFacet();else if(b=="right")this.modes.selected=="is"?(a.preventDefault(),this.deselectFacet(),this.setCursorAtEnd(0),this.enableEdit()):this.box.getCursorPosition()==this.box.val().length&&(a.preventDefault(),this.disableEdit(),this.options.app.searchBox.focusNextFacet(this,1));else if(VS.app.hotkeys.shift&&b=="tab")a.preventDefault(),this.options.app.searchBox.focusNextFacet(this,-1,{startAtEnd:-1,skipToFacet:!0,selectText:!0});else if(b=="tab")a.preventDefault(),this.options.app.searchBox.focusNextFacet(this,1,{skipToFacet:!0,selectText:!0});else{if(!(!VS.app.hotkeys.command||a.which!=97&&a.which!=65))return a.preventDefault(),this.options.app.searchBox.selectAllFacets(),!1;VS.app.hotkeys.printable(a)&&this.modes.selected=="is"?(this.options.app.searchBox.focusNextFacet(this,-1,{startAtEnd:-1}),this.remove(a)):b=="backspace"&&(this.modes.selected=="is"?(a.preventDefault(),this.remove(a)):this.box.getCursorPosition()==0&&!this.box.getSelection().length&&(a.preventDefault(),this.selectFacet()))}this.resize(a),a.which==null&&(this.searchAutocomplete(a),_.defer(_.bind(this.resize,this,a)))}})}(),function(){var a=jQuery;VS.ui.SearchInput=Backbone.View.extend({type:"text",className:"search_input",events:{"keypress input":"keypress","keydown input":"keydown","click input":"maybeTripleClick","dblclick input":"startTripleClickTimer"},initialize:function(){this.app=this.options.app,this.flags={canClose:!1},_.bindAll(this,"removeFocus","addFocus","moveAutocomplete","deferDisableEdit")},render:function(){return a(this.el).html(JST.search_input({})),this.setMode("not","editing"),this.setMode("not","selected"),this.box=this.$("input"),this.box.autoGrowInput(),this.box.bind("updated.autogrow",this.moveAutocomplete),this.box.bind("blur",this.deferDisableEdit),this.box.bind("focus",this.addFocus),this.setupAutocomplete(),this},setupAutocomplete:function(){this.box.autocomplete({minLength:1,delay:50,autoFocus:!0,position:{offset:"0 -1"},source:_.bind(this.autocompleteValues,this),select:_.bind(function(a,b){a.preventDefault(),a.stopPropagation();var c=this.addTextFacetRemainder(b.item.value),d=this.options.position+(c?1:0);return this.app.searchBox.addFacet(b.item.value,"",d),!1},this)}),this.box.data("autocomplete")._renderMenu=function(a,b){var c="";_.each(b,_.bind(function(b,d){b.category&&b.category!=c&&(a.append('<li class="ui-autocomplete-category">'+b.category+"</li>"),c=b.category),this._renderItem(a,b)},this))},this.box.autocomplete("widget").addClass("VS-interface")},autocompleteValues:function(b,c){var d=b.term,e=d.match(/\w+$/),f=VS.utils.inflector.escapeRegExp(e&&e[0]||" ");this.app.options.callbacks.facetMatches(function(b,d){d=d||{},b=b||[];var e=new RegExp("^"+f,"i"),g=a.grep(b,function(a){return a&&e.test(a.label||a)});d.preserveOrder?c(g):c(_.sortBy(g,function(a){return a.label?a.category+"-"+a.label:a}))})},closeAutocomplete:function(){var a=this.box.data("autocomplete");a&&a.close()},moveAutocomplete:function(){var a=this.box.data("autocomplete");a&&a.menu.element.position({my:"left top",at:"left bottom",of:this.box.data("autocomplete").element,collision:"none",offset:"0 -1"})},searchAutocomplete:function(a){var b=this.box.data("autocomplete");if(b){var c=b.menu.element;b.search(),c.outerWidth(Math.max(c.width("").outerWidth(),b.element.outerWidth()))}},addTextFacetRemainder:function(a){var b=this.box.val(),c=b.match(/\b(\w+)$/),d=new RegExp(c[0],"i");return c&&a.search(d)==0&&(b=b.replace(/\b(\w+)$/,"")),b=b.replace("^s+|s+$",""),b&&this.app.searchBox.addFacet("text",b,this.options.position),b},enableEdit:function(a){this.addFocus(),a&&this.selectText(),this.box.focus()},addFocus:function(){this.flags.canClose=!1,this.app.searchBox.allSelected()||this.app.searchBox.disableFacets(this),this.app.searchBox.addFocus(),this.setMode("is","editing"),this.setMode("not","selected"),this.searchAutocomplete()},disableEdit:function(){this.box.blur(),this.removeFocus()},removeFocus:function(){this.flags.canClose=!1,this.app.searchBox.removeFocus(),this.setMode("not","editing"),this.setMode("not","selected"),this.closeAutocomplete()},deferDisableEdit:function(){this.flags.canClose=!0,_.delay(_.bind(function(){this.flags.canClose&&!this.box.is(":focus")&&this.modes.editing=="is"&&this.disableEdit()},this),250)},startTripleClickTimer:function(){this.tripleClickTimer=setTimeout(_.bind(function(){this.tripleClickTimer=null},this),500)},maybeTripleClick:function(a){if(!!this.tripleClickTimer)return a.preventDefault(),this.app.searchBox.selectAllFacets(),!1},isFocused:function(){return this.box.is(":focus")},value:function(){return this.box.val()},setCursorAtEnd:function(a){a==-1?this.box.setCursorPosition(this.box.val().length):this.box.setCursorPosition(0)},selectText:function(){this.box.selectRange(0,this.box.val().length),this.app.searchBox.allSelected()?this.setMode("is","selected"):this.box.focus()},search:function(a,b){b||(b=0),this.closeAutocomplete(),this.app.searchBox.searchEvent(a),_.defer(_.bind(function(){this.app.searchBox.focusNextFacet(this,b)},this))},keypress:function(a){var b=VS.app.hotkeys.key(a);if(b=="enter")return this.search(a,100);if(VS.app.hotkeys.colon(a)){this.box.trigger("resize.autogrow",a);var c=this.box.val(),d=[];this.app.options.callbacks.facetMatches&&this.app.options.callbacks.facetMatches(function(a){d=a});var e=_.map(d,function(a){return a.label?a.label:a});if(_.contains(e,c)){a.preventDefault();var f=this.addTextFacetRemainder(c),g=this.options.position+(f?1:0);return this.app.searchBox.addFacet(c,"",g),!1}}else if(b=="backspace"&&this.box.getCursorPosition()==0&&!this.box.getSelection().length)return a.preventDefault(),a.stopPropagation(),a.stopImmediatePropagation(),this.app.searchBox.resizeFacets(),!1},keydown:function(a){var b=VS.app.hotkeys.key(a);if(b=="left")this.box.getCursorPosition()==0&&(a.preventDefault(),this.app.searchBox.focusNextFacet(this,-1,{startAtEnd:-1}));else if(b=="right")this.box.getCursorPosition()==this.box.val().length&&(a.preventDefault(),this.app.searchBox.focusNextFacet(this,1,{selectFacet:!0}));else if(VS.app.hotkeys.shift&&b=="tab")a.preventDefault(),this.app.searchBox.focusNextFacet(this,-1,{selectText:!0});else if(b=="tab"){a.preventDefault();var c=this.box.val();if(c.length){var d=this.addTextFacetRemainder(c),e=this.options.position+(d?1:0);this.app.searchBox.addFacet(c,"",e)}else this.app.searchBox.focusNextFacet(this,0,{skipToFacet:!0,selectText:!0})}else{if(VS.app.hotkeys.command&&String.fromCharCode(a.which).toLowerCase()=="a")return a.preventDefault(),this.app.searchBox.selectAllFacets(),!1;if(b=="backspace"&&!this.app.searchBox.allSelected()&&this.box.getCursorPosition()==0&&!this.box.getSelection().length)return a.preventDefault(),this.app.searchBox.focusNextFacet(this,-1,{backspace:!0}),!1}this.box.trigger("resize.autogrow",a)}})}(),function(){var a=jQuery;Backbone.View.prototype.setMode=function(b,c){this.modes||(this.modes={});if(this.modes[c]===b)return;a(this.el).setMode(b,c),this.modes[c]=b}}(),function(){var a=jQuery;VS.app.hotkeys={KEYS:{16:"shift",17:"command",91:"command",93:"command",224:"command",13:"enter",37:"left",38:"upArrow",39:"right",40:"downArrow",46:"delete",8:"backspace",9:"tab",188:"comma"},initialize:function(){_.bindAll(this,"down","up","blur"),a(document).bind("keydown",this.down),a(document).bind("keyup",this.up),a(window).bind("blur",this.blur)},down:function(a){var b=this.KEYS[a.which];b&&(this[b]=!0)},up:function(a){var b=this.KEYS[a.which];b&&(this[b]=!1)},blur:function(a){for(var b in this.KEYS)this[this.KEYS[b]]=!1},key:function(a){return this.KEYS[a.which]},colon:function(a){var b=a.which;return b&&String.fromCharCode(b)==":"},printable:function(a){var b=a.which;if(a.type=="keydown"){if(b==32||b>=48&&b<=90||b>=96&&b<=111||b>=186&&b<=192||b>=219&&b<=222)return!0}else if(b>=32&&b<=126||b>=160&&b<=500||String.fromCharCode(b)==":")return!0;return!1}}}(),function(){var a=jQuery;VS.utils.inflector={trim:function(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")},escapeRegExp:function(a){return a.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")}}}(),function(){var a=jQuery;a.fn.extend({setMode:function(a,b){b=b||"mode";var c=new RegExp("\\w+_"+b+"(\\s|$)","g"),d=a===null?"":a+"_"+b;return this.each(function(){this.className=(this.className.replace(c,"")+" "+d).replace(/\s\s/g," ")}),d},autoGrowInput:function(){return this.each(function(){var b=a(this),c=a("<div />").css({opacity:0,top:-9999,left:-9999,position:"absolute",whiteSpace:"nowrap"}).addClass("VS-input-width-tester").addClass("VS-interface"),d="keydown.autogrow keypress.autogrow resize.autogrow change.autogrow";b.next(".VS-input-width-tester").remove(),b.after(c),b.unbind(d).bind(d,function(a,d){d&&(a=d);var e=b.val();if(VS.app.hotkeys.key(a)=="backspace"){var f=b.getCursorPosition();f>0&&(e=e.slice(0,f-1)+e.slice(f,e.length))}else VS.app.hotkeys.printable(a)&&!VS.app.hotkeys.command&&(e+=String.fromCharCode(a.which));e=e.replace(/&/g,"&amp;").replace(/\s/g,"&nbsp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),c.html(e),b.width(c.width()+3),b.trigger("updated.autogrow")}),b.trigger("resize.autogrow")})},getCursorPosition:function(){var b=0,c=this.get(0);if(document.selection){c.focus();var d=document.selection.createRange(),e=document.selection.createRange().text.length;d.moveStart("character",-c.value.length),b=d.text.length-e}else c&&a(c).is(":visible")&&c.selectionStart!=null&&(b=c.selectionStart);return b},setCursorPosition:function(b){return this.each(function(){return a(this).selectRange(b,b)})},selectRange:function(a,b){return this.each(function(){if(this.setSelectionRange)this.focus(),this.setSelectionRange(a,b);else if(this.createTextRange){var c=this.createTextRange();c.collapse(!0),c.moveEnd("character",b),c.moveStart("character",a),b-a>=0&&c.select()}})},getSelection:function(){var a=this[0];if(a.selectionStart!=null){var b=a.selectionStart,c=a.selectionEnd;return{start:b,end:c,length:c-b,text:a.value.substr(b,c-b)}}if(document.selection){var d=document.selection.createRange();if(d){var e=a.createTextRange(),f=e.duplicate();e.moveToBookmark(d.getBookmark()),f.setEndPoint("EndToStart",e);var b=f.text.length,c=b+d.text.length;return{start:b,end:c,length:c-b,text:d.text}}}return{start:0,end:0,length:0}}});if(a.browser.msie&&!1){window.console={};var b;window.console.log=function(c){if(_.isArray(c))var d=c[0],e=_.map(c.slice(1),function(a){return JSON.stringify(a)}).join(" - ");b||(b=a("<div><ol></ol></div>").css({position:"fixed",bottom:10,left:10,zIndex:2e4,width:a("body").width()-80,border:"1px solid #000",padding:"10px",backgroundColor:"#fff",fontFamily:"arial,helvetica,sans-serif",fontSize:"11px"}),a("body").append(b));var f=a("<li>"+d+" - "+e+"</li>").css({borderBottom:"1px solid #999999"});b.find("ol").append(f),_.delay(function(){f.fadeOut(500)},5e3)}}}(),function(){var a=jQuery;VS.app.SearchParser={ALL_FIELDS:/('.+?'|".+?"|[^'"\s]{2}\S*):\s*('.+?'|".+?"|[^'"\s]\S*)/g,CATEGORY:/('.+?'|".+?"|[^'"\s]{2}\S*):\s*/,parse:function(a,b){var c=this._extractAllFacets(a,b);return a.searchQuery.reset(c),c},_extractAllFacets:function(a,b){var c=[],d=b;while(b){var e,f;d=b;var g=this._extractNextField(b);g?g.indexOf(":")!=-1?(e=g.match(this.CATEGORY)[1].replace(/(^['"]|['"]$)/g,""),f=g.replace(this.CATEGORY,"").replace(/(^['"]|['"]$)/g,""),b=VS.utils.inflector.trim(b.replace(g,""))):g.indexOf(":")==-1&&(e="text",f=g,b=VS.utils.inflector.trim(b.replace(f,""))):(e="text",f=this._extractSearchText(b),b=VS.utils.inflector.trim(b.replace(f,"")));if(e&&f){var h=new VS.model.SearchFacet({category:e,value:VS.utils.inflector.trim(f),app:a});c.push(h)}if(d==b)break}return c},_extractNextField:function(a){var b=/^\s*(\S+)\s+(?=\w+:\s?(('.+?'|".+?")|([^'"]{2}\S*)))/,c=a.match(b);return c&&c.length>=1?c[1]:this._extractFirstField(a)},_extractFirstField:function(a){var b=a.match(this.ALL_FIELDS);return b&&b.length&&b[0]},_extractSearchText:function(a){a=a||"";var b=VS.utils.inflector.trim(a.replace(this.ALL_FIELDS,""));return b}}}(),function(){var a=jQuery;VS.model.SearchFacet=Backbone.Model.extend({serialize:function(){var a=this.quoteCategory(this.get("category")),b=VS.utils.inflector.trim(this.get("value"));return b?(!_.contains(this.get("app").options.unquotable||[],a)&&a!="text"&&(b=this.quoteValue(b)),a!="text"?a+=": ":a="",a+b):""},quoteCategory:function(a){var b=/"/.test(a),c=/'/.test(a),d=/\s/.test(a);return b&&!c?"'"+a+"'":d||c&&!b?'"'+a+'"':a},quoteValue:function(a){var b=/"/.test(a),c=/'/.test(a);return b&&!c?"'"+a+"'":'"'+a+'"'}})}(),function(){var a=jQuery;VS.model.SearchQuery=Backbone.Collection.extend({model:VS.model.SearchFacet,serialize:function(){return this.map(function(a){return a.serialize()}).join(" ")},facets:function(){return this.map(function(a){var b={};return b[a.get("category")]=a.get("value"),b})},find:function(a){var b=this.detect(function(b){return b.get("category")==a});return b&&b.get("value")},count:function(a){return this.select(function(b){return b.get("category")==a}).length},values:function(a){var b=this.select(function(b){return b.get("category")==a});return _.map(b,function(a){return a.get("value")})},has:function(a,b){return this.any(function(c){var d=c.get("category")==a;return b?d&&c.get("value")==b:d})},withoutCategory:function(a){return this.map(function(b){if(b.get("category")!=a)return b.serialize()}).join(" ")}})}(),function(){window.JST=window.JST||{},window.JST.search_box=_.template('<div class="VS-search">\n  <div class="VS-search-box-wrapper VS-search-box">\n    <div class="VS-icon VS-icon-search"></div>\n    <div class="VS-search-inner"></div>\n    <div class="VS-icon VS-icon-cancel VS-cancel-search-box" title="clear search"></div>\n  </div>\n</div>'),window.JST.search_facet=_.template('<% if (model.has(\'category\')) { %>\n  <div class="category"><%= model.get(\'category\') %>:</div>\n<% } %>\n\n<div class="search_facet_input_container">\n  <input type="text" class="search_facet_input VS-interface" value="" />\n</div>\n\n<div class="search_facet_remove VS-icon VS-icon-cancel"></div>'),window.JST.search_input=_.template('<input type="text" />')}();var relativeDate=function(a){function j(b,c){!c&&(c=(new Date).getTime()),c instanceof Date&&(c=c.getTime()),b instanceof Date&&(b=b.getTime());var d=c-b,e,f,g;for(f=-1,g=i.length;++f<g;){e=i[f];if(d<e[0])return e[2]==a?e[1]:Math.round(d/e[2])+" "+e[1]}}var b=1e3,c=60*b,d=60*c,e=24*d,f=7*e,g=e*365,h=g/12,i=[[.7*c,"seconds ago",b],[1.5*c,"a minute ago"],[60*c,"minutes ago",c],[1.5*d,"an hour ago"],[e,"hours ago",d],[2*e,"yesterday"],[7*e,"days ago",e],[1.5*f,"a week ago"],[h,"weeks ago",f],[1.5*h,"a month ago"],[g,"months ago",h],[1.5*g,"a year ago"],[Number.MAX_VALUE,"years ago",g]];return j}();typeof module!="undefined"&&module.exports&&(module.exports=relativeDate);(function(a,b){function c(a){this._d=a}function d(a,b){var c=a+"";while(c.length<b)c="0"+c;return c}function e(b,c,d,e){var f=typeof c=="string",g=f?{}:c,h,i,j,k;return f&&e&&(g[c]=+e),h=(g.ms||g.milliseconds||0)+(g.s||g.seconds||0)*1e3+(g.m||g.minutes||0)*6e4+(g.h||g.hours||0)*36e5,i=(g.d||g.days||0)+(g.w||g.weeks||0)*7,j=(g.M||g.months||0)+(g.y||g.years||0)*12,h&&b.setTime(+b+h*d),i&&b.setDate(b.getDate()+i*d),j&&(k=b.getDate(),b.setDate(1),b.setMonth(b.getMonth()+j*d),b.setDate(Math.min((new a(b.getFullYear(),b.getMonth()+1,0)).getDate(),k))),b}function f(a){return Object.prototype.toString.call(a)==="[object Array]"}function g(b){return new a(b[0],b[1]||0,b[2]||1,b[3]||0,b[4]||0,b[5]||0,b[6]||0)}function h(b,e){function f(c){var e,g;switch(c){case"M":return i+1;case"Mo":return i+1+r(i+1);case"MM":return d(i+1,2);case"MMM":return o.monthsShort[i];case"MMMM":return o.months[i];case"D":return j;case"Do":return j+r(j);case"DD":return d(j,2);case"DDD":return e=new a(k,i,j),g=new a(k,0,1),~~((e-g)/864e5+1.5);case"DDDo":return e=f("DDD"),e+r(e);case"DDDD":return d(f("DDD"),3);case"d":return l;case"do":return l+r(l);case"ddd":return o.weekdaysShort[l];case"dddd":return o.weekdays[l];case"w":return e=new a(k,i,j-l+5),g=new a(e.getFullYear(),0,4),~~((e-g)/864e5/7+1.5);case"wo":return e=f("w"),e+r(e);case"ww":return d(f("w"),2);case"YY":return d(k%100,2);case"YYYY":return k;case"a":return m>11?s.pm:s.am;case"A":return m>11?s.PM:s.AM;case"H":return m;case"HH":return d(m,2);case"h":return m%12||12;case"hh":return d(m%12||12,2);case"m":return n;case"mm":return d(n,2);case"s":return p;case"ss":return d(p,2);case"zz":case"z":return(b.toString().match(x)||[""])[0].replace(w,"");case"Z":return(q>0?"+":"-")+d(~~(Math.abs(q)/60),2)+":"+d(~~(Math.abs(q)%60),2);case"ZZ":return(q>0?"+":"-")+d(~~(10*Math.abs(q)/6),4);case"L":case"LL":case"LLL":case"LLLL":case"LT":return h(b,o.longDateFormat[c]);default:return c.replace(/(^\[)|(\\)|\]$/g,"")}}var g=new c(b),i=g.month(),j=g.date(),k=g.year(),l=g.day(),m=g.hours(),n=g.minutes(),p=g.seconds(),q=-g.zone(),r=o.ordinal,s=o.meridiem;return e.replace(v,f)}function i(b,c){function d(a,b){var c;switch(a){case"M":case"MM":e[1]=~~b-1;break;case"MMM":case"MMMM":for(c=0;c<12;c++)if(o.monthsParse[c].test(b)){e[1]=c;break}break;case"D":case"DD":case"DDD":case"DDDD":e[2]=~~b;break;case"YY":b=~~b,e[0]=b+(b>70?1900:2e3);break;case"YYYY":e[0]=~~Math.abs(b);break;case"a":case"A":m=b.toLowerCase()==="pm";break;case"H":case"HH":case"h":case"hh":e[3]=~~b;break;case"m":case"mm":e[4]=~~b;break;case"s":case"ss":e[5]=~~b;break;case"Z":case"ZZ":i=!0,c=(b||"").match(A),c&&c[1]&&(f=~~c[1]),c&&c[2]&&(h=~~c[2]),c&&c[0]==="+"&&(f=-f,h=-h)}}var e=[0,0,1,0,0,0,0],f=0,h=0,i=!1,j=b.match(z),k=c.match(y),l,m;for(l=0;l<k.length;l++)d(k[l],j[l]);return m&&e[3]<12&&(e[3]+=12),m===!1&&e[3]===12&&(e[3]=0),e[3]+=f,e[4]+=h,i?new a(a.UTC.apply({},e)):g(e)}function j(a,b){var c=Math.min(a.length,b.length),d=Math.abs(a.length-b.length),e=0,f;for(f=0;f<c;f++)~~a[f]!==~~b[f]&&e++;return e+d}function k(a,b){var c,d=a.match(z),e=[],f=99,g,k,l;for(g=0;g<b.length;g++)k=i(a,b[g]),l=j(d,h(k,b[g]).match(z)),l<f&&(f=l,c=k);return c}function l(a,b,c){var d=o.relativeTime[a];return typeof d=="function"?d(b||1,!!c,a):d.replace(/%d/i,b||1)}function m(a,b){var c=p(Math.abs(a)/1e3),d=p(c/60),e=p(d/60),f=p(e/24),g=p(f/365),h=c<45&&["s",c]||d===1&&["m"]||d<45&&["mm",d]||e===1&&["h"]||e<22&&["hh",e]||f===1&&["d"]||f<=25&&["dd",f]||f<=45&&["M"]||f<345&&["MM",p(f/30)]||g===1&&["y"]||["yy",g];return h[2]=b,l.apply({},h)}function n(a,b){o.fn[a]=function(a){return a!=null?(this._d["set"+b](a),this):this._d["get"+b]()}}var o,p=Math.round,q={},r=typeof module!="undefined",s="months|monthsShort|monthsParse|weekdays|weekdaysShort|longDateFormat|calendar|relativeTime|ordinal|meridiem".split("|"),t,u=/^\/?Date\((\d+)/i,v=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|dddd?|do?|w[o|w]?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|zz?|ZZ?|LT|LL?L?L?)/g,w=/[^A-Z]/g,x=/\([A-Za-z ]+\)|:[0-9]{2} [A-Z]{3} /g,y=/(\\)?(MM?M?M?|dd?d?d|DD?D?D?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|ZZ?|T)/g,z=/(\\)?([0-9]+|([a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+|([\+\-]\d\d:?\d\d))/gi,A=/([\+\-]|\d\d)/gi,B="1.4.0",C="Month|Date|Hours|Minutes|Seconds|Milliseconds".split("|");o=function(d,e){if(d===null)return null;var h,j;return d&&d._d instanceof a?h=new a(+d._d):e?f(e)?h=k(d,e):h=i(d,e):(j=u.exec(d),h=d===b?new a:j?new a(+j[1]):d instanceof a?d:f(d)?g(d):new a(d)),new c(h)},o.version=B,o.lang=function(a,b){var c,d,e,f=[];if(b){for(c=0;c<12;c++)f[c]=new RegExp("^"+b.months[c]+"|^"+b.monthsShort[c].replace(".",""),"i");b.monthsParse=b.monthsParse||f,q[a]=b}if(q[a])for(c=0;c<s.length;c++)d=s[c],o[d]=q[a][d]||o[d];else r&&(e=require("./lang/"+a),o.lang(a,e))},o.lang("en",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},meridiem:{AM:"AM",am:"am",PM:"PM",pm:"pm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(a){var b=a%10;return~~(a%100/10)===1?"th":b===1?"st":b===2?"nd":b===3?"rd":"th"}}),o.fn=c.prototype={clone:function(){return o(this)},valueOf:function(){return+this._d},"native":function(){return this._d},toString:function(){return this._d.toString()},toDate:function(){return this._d},format:function(a){return h(this._d,a)},add:function(a,b){return this._d=e(this._d,a,1,b),this},subtract:function(a,b){return this._d=e(this._d,a,-1,b),this},diff:function(a,b,c){var d=o(a),e=(this.zone()-d.zone())*6e4,f=this._d-d._d-e,g=this.year()-d.year(),h=this.month()-d.month(),i=this.date()-d.date(),j;return b==="months"?j=g*12+h+i/30:b==="years"?j=g+h/12:j=b==="seconds"?f/1e3:b==="minutes"?f/6e4:b==="hours"?f/36e5:b==="days"?f/864e5:b==="weeks"?f/6048e5:f,c?j:p(j)},from:function(a,b){var c=this.diff(a),d=o.relativeTime,e=m(c,b);return b?e:(c<=0?d.past:d.future).replace(/%s/i,e)},fromNow:function(a){return this.from(o(),a)},calendar:function(){var a=this.diff(o().sod(),"days",!0),b=o.calendar,c=b.sameElse,d=a<-6?c:a<-1?b.lastWeek:a<0?b.lastDay:a<1?b.sameDay:a<2?b.nextDay:a<7?b.nextWeek:c;return this.format(typeof d=="function"?d.apply(this):d)},isLeapYear:function(){var a=this.year();return a%4===0&&a%100!==0||a%400===0},isDST:function(){return this.zone()<o([this.year()]).zone()||this.zone()<o([this.year(),5]).zone()},day:function(a){var b=this._d.getDay();return a==null?b:this.add({d:a-b})},sod:function(){return this.clone().hours(0).minutes(0).seconds(0).milliseconds(0)},eod:function(){return this.sod().add({d:1,ms:-1})}};for(t=0;t<C.length;t++)n(C[t].toLowerCase(),C[t]);n("year","FullYear"),o.fn.zone=function(){return this._d.getTimezoneOffset()},r&&(module.exports=o),typeof window!="undefined"&&(window.moment=o),typeof define=="function"&&define.amd&&define("moment",[],function(){return o})})(Date);((function(){var a=Array.prototype.slice;window.arcs={},arcs.views={},arcs.models={},arcs.collections={},arcs.utils={},arcs.routers={},arcs.templates={},arcs.bus={},_.extend(arcs.bus,Backbone.Events),arcs.mode=CAKE_DEBUG,arcs.debug=arcs.mode>0,arcs.version="0.9.6",arcs.baseURL="/",arcs.url=function(){var b;return b=1<=arguments.length?a.call(arguments,0):[],arcs.baseURL+b.join("/")},arcs.log=function(){var b;b=1<=arguments.length?a.call(arguments,0):[];if(arcs.debug&&(typeof console!=="undefined"&&console!==null?console.log:void 0)!=null)return console.log.apply(console,["[ARCS]:"].concat(a.call(b)))},arcs.tmpl=function(a,b,c){var d;return c==null&&(c=_.template),d=_.has(JST,a)?JST[a]:a,c(d,b!=null?b:{})},$.fn.extend({toggleAttr:function(a){return $(this).attr(a)?$(this).removeAttr(a):$(this).attr(a,a)}}),$.postJSON=function(a,b,c){return $.ajax({url:a,data:JSON.stringify(b),type:"POST",contentType:"application/json",dataType:"json",success:c})}})).call(this);((function(){var a;document.location.href.match(/:8080\/~[a-z0-9]+\//)&&(arcs.baseURL+=document.location.href.match(/~[a-z0-9]+\//),arcs.baseURL+="arcs/"),arcs.mode>0&&(arcs.dev={},arcs.dev.reload=!1,arcs.dev.reloadAt=2e3,a=Backbone.sync,Backbone.sync=function(b,c,d){return arcs.log("Backbone.sync:",b,c,d),a(b,c,d)},arcs.dev.reloadStylesheets=function(){var a;return a="?reload="+(new Date).getTime(),$('link[rel="stylesheet"]').each(function(){return this.href=this.href.replace(/\?.*|$/,a)})},arcs.dev.reload&&setInterval(arcs.dev.reloadStylesheets,arcs.dev.reloadAt))})).call(this);arcs.utils.auth={},arcs.utils.auth.canView=function(a,b){return a==null&&(a=null),b==null&&(b=null),a.role<3?!0:!1},arcs.utils.auth.canMeta=function(a,b){var c;return a==null&&(a=null),b==null&&(b=null),a.role<=1?!0:(c=b.get("exclusive"),a.role===2&&!c?!0:!1)},arcs.utils.auth.canDelete=function(a,b){a==null&&(a=null),b==null&&(b=null)},arcs.utils.auth.canResolve=function(a,b){a==null&&(a=null),b==null&&(b=null);if(a.role<=1)return!0};((function(){arcs.complete=function(a){var b;return b=[],$.ajax({url:arcs.baseURL+a,async:!1,dataType:"json",success:function(a){return b=_.compact(_.uniq(_.values(a)))}}),b},arcs.completeDate=function(a){var b,c,d,e,f,g,h;return g=arcs.complete(a),h=["DD-MM-YYYY","YYYY-MM-DD HH:mm:ss"],e=h[0],f=h[1],d=function(){var a,b,d;d=[];for(a=0,b=g.length;a<b;a++)c=g[a],d.push(moment(c,f).format(e));return d}(),b=[{label:"today",value:moment().format(e)},{label:"yesterday",value:moment().subtract("days",1).format(e)}],_.union(d,b)},arcs.utils.autocomplete=function(a){var b,c,d,e,f,g,h,i,j;return d={source:[],multiple:!1,sel:null},g=_.extend(d,a),b=$(g.sel),i=function(a){return a.split(/,\s*/)},f=function(a){return i(a).pop()},c=function(a,b){var c;return c=i(a),c.pop(),c.push(b,""),c.join(", ")},_.isFunction(g.source)&&g.source.length===0&&(j=[g.source(),g.source],g.source=j[0],g._source=j[1]),g.multiple&&(g._source=g.source,g.source=function(a,b){var c;return c=$.ui.autocomplete.filter,b(c(g._source,f(a.term)))},h=function(a,b){return this.value=c(this.value,b.item.value),!1},e=function(){return!1}),b.autocomplete({source:g.source,autoFocus:!0,focus:e!=null?e:function(){},minLength:0,select:h!=null?h:function(){}}),b.on("keydown",function(a){if(a.keyCode===9)return a.preventDefault(),!1})}})).call(this);((function(){arcs.config={metadata:{copyright:"Who owns copyright on this resource?",coverage:"What area(s) does this resource concern",creator:"Person who made the physical resource","date-start":"Date start","date-end":"Date end",description:"Short description of the resource",format:"What kind of file is this resource?",identifier:"Dig-specific title for the resource (e.g. Identifier for a photo: 72-BW-01-63_64)",language:"What is the original language of this resource?",location:"Area of the dig this resource concerns",medium:"What is this resource made of? (e.g: Notebook page: white paper and ink)",subject:"Subjects are like tags or keywords...short, basic descriptions about things what a resource describes"},metadataSingular:["identifier"],types:{"":"",Drawing:"Drawings are informational line drawings of artifacts, places, or other objects","Inventory Card":"Notecard dedicated to a single artifact",Map:"There are two types of map, 1) Vectored CAD drawings with geo coordinates and 2) hand-drawn renderings of dig areas and trenches",Notebook:"Archaeologist field notes collected in small leather-bound notebooks...a Notebook is a collection of Notebook Pages","Notebook Page":"A two-page spread of field notes from a Notebook",Photograph:"A photographic negative either depicting a significant scene or object",Report:"Weekly or monthly typed account of the happenings of the dig"},flags:{incorrect:"Incorrect attributes",spam:"Spam",duplicate:"Duplicate",other:"Other"}}})).call(this);((function(){var a=Array.prototype.slice;arcs.confirm=function(){var b,c,d,e;return b=2<=arguments.length?a.call(arguments,0,d=arguments.length-1):(d=0,[]),c=arguments[d++],new arcs.views.Modal({title:b[0],subtitle:(e=b[1])!=null?e:"",buttons:{yes:{"class":"btn btn-danger",callback:c},no:function(){}}})},arcs.prompt=function(){var b,c;return b=1<=arguments.length?a.call(arguments,0):[],new arcs.views.Modal({title:b[0],subtitle:(c=b[1])!=null?c:"",buttons:{ok:{"class":"btn btn-primary",callback:function(){}}}})},arcs.needsLogin=function(){var a;return arcs.user.get("loggedIn")?a="You have been logged out.":a="You'll need to login to do that.",new arcs.views.Modal({title:a,subtitle:"Click 'Login' below to go to the login page.",buttons:{login:function(){return location.href=arcs.url("login")},cancel:function(){}}})}})).call(this);((function(){arcs.utils.convertBytes=function(a){var b;a=parseInt(a,10);if(!isFinite(a))return"unknown size";b=["B","KB","MB","GB","TB"];while(!(a<1024))a/=1024,b.shift();return Math.round(a)+b.shift()}})).call(this);((function(){var a;a={second:[1,60],minute:[60,3600],hour:[3600,604800],week:[604800,2419200],month:[2419200,31536e3],year:[31536e3,Number.MAX_VALUE]},arcs.relativeDate=function(b){var c,d,e,f,g,h;b instanceof Date||(b=new Date(b)),c=(new Date).getTime()-b.getTime();for(e in a){h=a[e],g=h[0],f=h[1];if(c<g)return d=Math.round(c/f),""+d+" "+arcs.inflector.pluralize(e,d)+" ago"}}})).call(this);((function(){arcs.inflector={PLURALS:{"(m)an$":"$1en","(pe)rson$":"$1ople","(child)$":"$1ren","^(ox)$":"$1en","(ax|test)is$":"$1es","(octop|vir)us$":"$1i","(alias|status)$":"$1es","(bu)s$":"$1ses","(buffal|tomat|potat)o$":"$1oes","([ti])um$":"$1a",sis$:"ses","(?:([^f])fe|([lr])f)$":"$1$2ves","(hive)$":"$1s","([^aeiouy]|qu)y$":"$1ies","(x|ch|ss|sh)$":"$1es","(matr|vert|ind)ix|ex$":"$1ices","([m|l])ouse$":"$1ice","(quiz)$":"$1zes",s$:"s",$:"s"},CONJUGATIONS:{was:"were",is:"are",am:"are",has:"have"},pluralize:function(a,b){var c,d,e,f;b==null&&(b=0);if(!a.length||b===1)return a;f=this.PLURALS;for(c in f){e=f[c],d=new RegExp(c,"gi");if(a.match(d)){a=a.replace(d,e);break}}return a},conjugate:function(a,b){return b==null&&(b=0),b===1?a:this.CONJUGATIONS[a]},truncate:function(a,b,c){return c==null&&(c="..."),a==null?"":a.length<b?a:a.substring(0,b)+c},identifierize:function(a){var b;return this._identifiers==null&&(this._identifiers={}),this._identifiers[a]!=null?this._identifiers[a]:(b=a.replace(/(\s|-)/g,"_").replace(/\W/g,"").toLowerCase(),b.match(/^\d/)&&(b="_"+b),this._identifiers[a]=_.uniqueId(b+"_"))},enquote:function(a,b){var c;return b==null&&(b=!0),c=b?"'":'"',c+a+c}}})).call(this);((function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};arcs.utils.Keys=function(){function b(b){b==null&&(b=document),this.delegate=a(this.delegate,this),$(b).on("keydown",this.delegate)}return b.prototype.delegate=function(a){var b,c,d,e,f,g,h;if(a.target.type==="text"||/textarea|select/i.test(a.target.nodeName))return!0;a.ctrlKey||a.shiftKey||a.altKey||a.metaKey?f=!0:f=!1,e=this.get(a.which,f);if(!e.length)return!0;b=!1;for(g=0,h=e.length;g<h;g++)d=e[g],d.bubble&&(b=!0),d.context?c=_.bind(d.callback,d.context):c=d.callback,c(a);return b?!0:(a.preventDefault(),!1)},b.prototype.add=function(a,b,c,d){return d==null&&(d=!1),this.mappings.push({key:a,callback:b,context:c,bubble:d})},b.prototype.map=function(a,b){var c,d,e;e=[];for(d in b)c=b[d],e.push(this.mappings.push({key:d,callback:c,context:a}));return e},b.prototype.get=function(a,b){var c,d,e=this;return b==null&&(b=!1),c=this.humanize(a,b),d=_.filter(this.mappings,function(a){return a.key===c})},b.prototype.mappings=[],b.prototype.humanize=function(a,b){var c;return c=b?"ctrl+":"",this.specialKeys[a]!=null?c+=this.specialKeys[a]:c+=String.fromCharCode(a).toLowerCase()},b.prototype.specialKeys={8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",27:"esc",32:"space",37:"left",38:"up",39:"right",40:"down",187:"+",189:"-",191:"?"},b}(),arcs.keys=arcs.utils.keys=new arcs.utils.Keys})).call(this);((function(){arcs.loader=arcs.utils.loader={show:function(){return $(".loading").length||$("body").append(arcs.tmpl("ui/loader")),$(".loading").show()},hide:function(){return $(".loading").hide()}}})).call(this);((function(){arcs.utils.hash={set:function(a,b){return b==null&&(b=!1),this.history.push(document.location.hash),b&&(a=encodeURIComponent(a)),document.location.hash=a},get:function(a){var b;return a==null&&(a=!1),b=document.location.hash.slice(1),a?decodeURIComponent(b):b},rewind:function(){return this.set(this.history.pop())},history:[]},arcs.utils.params={get:function(a){var b,c,d,e,f;d=document.location.search.slice(1).split("&");for(e=0,f=d.length;e<f;e++){b=d[e],c=b.split("=");if(c[0]===a)return decodeURIComponent(unescape(c[1]))}}}})).call(this);((function(){var a=Array.prototype.indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};arcs.utils.mime=arcs.mime={imageTypes:{"image/png":"png","image/jpeg":"jpeg","image/jpg":"jpg","image/gif":"gif","image/tiff":"tiff"},documentTypes:{"application/pdf":"pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"docx","application/msword":"doc","text/plain":"plaintext","text/richtext":"richtext","text/rtf":"rtf"},videoTypes:{"video/mpeg":"mpeg","video/msvideo":"avi","video/quicktime":"mov","video/mp4":"mp4"},isDocument:function(b){return a.call(_.keys(this.documentTypes),b)>=0},isImage:function(b){return a.call(_.keys(this.imageTypes),b)>=0},isVideo:function(b){return a.call(_.keys(this.videoTypes),b)>=0},types:function(){return _.extend(this.videoTypes,this.documentTypes,this.imageTypes)},getInfo:function(b){var c,d,e,f,g;g={type:"undefined",ext:null},f={image:this.imageTypes,document:this.documentTypes,video:this.videoTypes};for(e in f)c=f[e],a.call(_.keys(f[e]),b)>=0&&(d={type:e,ext:f[e][b]});return d||g}},_.bindAll(arcs.utils.mime)})).call(this);((function(){_.mixin({isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},inverse:function(a){var b,c,d;c={};for(b in a)d=a[b],c[d]=b;return c},twins:function(a){return _.uniq(a).length===1}})})).call(this);((function(){arcs.utils.Modal=function(){function a(a){var b;b={template:"",templateValues:{},draggable:!1,handle:null,backdrop:!0,"class":null,inputs:[],buttons:{}},this.options=_.extend(b,a),this._setEl(),this.options["class"]!=null&&this.el.addClass(this.options["class"]),this.options.draggable&&this.el.draggable({handle:this.options.handle}),this.el.modal({backdrop:this.options.backdrop,keyboard:!0,show:!1}),this.el.attr("data-first")!=="false"&&this.el.attr("data-first","true"),this.show(),this._bindButtons()}return a.prototype._setEl=function(){return $("#modal").length||$("body").append(arcs.tmpl("ui/modal_wrapper")),this.el=$("#modal")},a.prototype.hide=function(){return this.el.modal("hide")},a.prototype.show=function(){this.el.html(arcs.tmpl(this.options.template,this.options.templateValues)),this.el.modal("show");if(this.el.attr("data-first")==="true")return this.el.css("right","-400px").animate({right:"0px"}),this.el.attr("data-first","false")},a.prototype.visible=function(){return this.el.is(":visible")},a.prototype.values=function(){var a,b,c,d,e;b={};if(this.options.inputs.length){e=this.options.inputs;for(c=0,d=e.length;c<d;c++)a=e[c],b[a]=this.el.find("#"+a).val()}return b},a.prototype._bindButtons=function(){var a,b,c,d,e,f=this;d=_.keys(this.options.buttons),e=[];for(b=0,c=d.length;b<c;b++)a=d[b],e.push(this.el.find("a#"+a+", button#"+a).one("click",function(a){var b,c,d,e,g;b=f.options.buttons[a.target.id],_.isFunction(b)?b(f.values()):(g=[b.callback,(e=b.context)!=null?e:null],c=g[0],d=g[1],d!=null&&(c=_.bind(c,d)),c(f.values()));if(!b.keepOpen)return f.hide()}));return e},a}()})).call(this);((function(){arcs.notify=function(a,b,c){var d,e;return b==null&&(b="info"),c==null&&(c=3),$("#notification").length||$("body").append(arcs.tmpl("ui/notification")),d=$("#notification"),d.removeClass(function(a,b){return(b.match(/\balert-\S+/g)||[]).join(" ")}),d.addClass("alert-"+b),d.find("#msg").html(a),d.show(),c&&(e=_.isNumber(c)?c:3,setTimeout(function(){return d.fadeOut(500)},e*1e3)),d}})).call(this);((function(){var a,b=Array.prototype.indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};a=[],arcs.preload=function(c){var d,e,f,g;typeof c=="string"&&(c=[c]),g=[];for(e=0,f=c.length;e<f;e++){d=c[e];if(b.call(a,d)>=0)continue;$("<img />").attr("src",d).hide().appendTo("body"),g.push(a.push(d))}return g}})).call(this);((function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};arcs.utils.Search=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.options={container:null,query:"",loader:!1,order:"modified",direction:"desc",page:1,n:30,add:!1,run:!0,onSearch:function(){},success:function(){},error:function(){}},c.prototype.initialize=function(){var a,b=this;a=[this.options.query,this.options.page],this.query=a[0],this.page=a[1],this.collection=this.results=new arcs.collections.ResultSet,this.vs=VS.init({container:this.options.container,query:this.query,callbacks:{search:function(a,c){return b.query=a,b.options.onSearch(a),b.run(c.toJSON())},facetMatches:function(a){return a(_.keys(b.facets))},valueMatches:function(a,c,d){var e;return e=b.facets[a],typeof e=="function"?(b.facets[a]=e(),d(b.facets[a])):d(e)}}});if(this.options.run)return this.run()},c.prototype.setQuery=function(a){return this.vs.searchBox.setQuery(a)},c.prototype.facets={access:["public","private"],filetype:function(){var a,b,c,d;c=arcs.utils.mime.types(),d=[];for(a in c)b=c[a],d.push({value:a,label:b});return d},filename:[],id:[],sha:[],title:function(){return arcs.complete("resources/complete/title")},user:function(){return arcs.complete("users/complete")},keyword:function(){return arcs.complete("keywords/complete")},collection:function(){return arcs.complete("collections/complete")},created:function(){return arcs.completeDate("resources/complete/created")},uploaded:function(){return arcs.completeDate("resources/complete/created")},modified:function(){return arcs.completeDate("resources/complete/modified")},type:function(){return _.compact(_.keys(arcs.config.types))}},c.prototype.getLast=function(){return this.results.last(this.results.length%this.options.n||this.options.n)},c.prototype.run=function(a,b){var c,d,e,f,g=this;b=_.extend(_.clone(this.options),b),c="?related&n="+b.n+"&page="+b.page+("&order="+b.order+"&direction="+b.direction),a==null&&(a=this.vs.searchQuery.toJSON());for(e=0,f=a.length;e<f;e++)d=a[e],delete d.app;return b.loader&&arcs.loader.show(),this.results.fetch({add:b.add,data:JSON.stringify(a),type:"POST",url:this.results.url()+c,contentType:"application/json",success:function(){b.success();if(b.loader)return arcs.loader.hide()},error:function(){b.error();if(b.loader)return arcs.loader.hide()}}),this.query=this.vs.searchBox.value(),this.page=b.page,this.results},c}(Backbone.View)})).call(this);((function(){$(function(){return $("body").on("focus","input[placeholder]",function(a){var b;b=$(a.currentTarget);if(b.val()===b.attr("placeholder"))return b.val(""),b.removeClass("unfocused")}),$("body").on("blur","input[placeholder]",function(a){var b;b=$(a.currentTarget);if(b.val()==="")return b.val(b.attr("placeholder")),b.addClass("unfocused")}),$("body").tooltip({selector:"[rel=tooltip]"}),$("body").popover({selector:"[rel=popover]"}),$("body").delegate('input[type="text"][id*="date"]',"focus",function(a){return $(a.currentTarget).datepicker({format:"dd/mm/yyyy"})})})})).call(this);((function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};arcs.routers.Search=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.initialize=function(a){return this.search=a.search},c.prototype.routes={"":"root",":query":"doSearch"},c.prototype.root=function(){return this.hasTrailing=this.doSearch()},c.prototype.navigate=function(a,b){return b||(b={}),this.hasTrailing||(b.replace=!0,this.hasTrailing=!0),c.__super__.navigate.call(this,a,b)},c.prototype.doSearch=function(a){return a==null&&(a=""),a==="search"?this.navigate("/",{replace:!0}):(this.search.setQuery(a),this.search.run(),this.navigate(encodeURIComponent(this.search.query)),this.searched=!0)},c}(Backbone.Router)})).call(this);((function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};arcs.routers.Viewer=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.routes={":id":"noIndex",":id/":"noIndex",":id/:index":"indexChange"},c.prototype.noIndex=function(a){return arcs.bus.trigger("indexChange",0,{noNavigate:!0,replace:!0})},c.prototype.indexChange=function(a,b){return _.isNumeric(b)&&(b-=1),arcs.bus.trigger("indexChange",b,{noNavigate:!0})},c}(Backbone.Router)})).call(this);((function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};arcs.models.Annotation=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.url=function(){return this.isNew()?arcs.baseURL+"annotations":arcs.baseURL+("annotations/"+this.id)},c.prototype.setScaled=function(a,b,c){return this.set({x1:a.x1/c,y1:a.y1/b,x2:a.x2/c,y2:a.y2/b})},c.prototype.scaleTo=function(a,b){return{x1:this.get("x1")*b,y1:this.get("y1")*a,x2:this.get("x2")*b,y2:this.get("y2")*a}},c.prototype.getType=function(){if(this.get("relation"))return"Relation";if(this.get("transcript"))return"Transcription";if(this.get("url"))return"URL"},c.prototype.parse=function(a){return a.Annotation!=null&&(a=a.Annotation),a},c}(Backbone.Model)})).call(this);((function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};arcs.models.Bookmark=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.urlRoot=arcs.baseURL+"bookmarks",c}(Backbone.Model)})).call(this);((function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};arcs.models.Collection=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.defaults={id:null,title:"Temporary Collection",description:"","public":!1,members:[]},c.prototype.urlRoot=arcs.baseURL+"collections/add",c}(Backbone.Model)})).call(this);((function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};arcs.models.Comment=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.urlRoot=arcs.baseURL+"comments",c}(Backbone.Model)})).call(this);((function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};arcs.models.Flag=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.urlRoot=arcs.baseURL+"flags",c}(Backbone.Model)})).call(this);((function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};arcs.models.Job=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.urlRoot=arcs.baseURL+"jobs",c}(Backbone.Model)})).call(this);((function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};arcs.models.Keyword=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.urlRoot=arcs.baseURL+"keywords",c}(Backbone.Model)})).call(this);((function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};arcs.models.MetadataContainer=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.url=function(){return arcs.baseURL+"resources/metadata/"+this.id},c}(Backbone.Model)})).call(this);((function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};arcs.models.Resource=function(a){function c(a){c.__super__.constructor.call(this,this.parse(a))}return b(c,a),c.prototype.defaults={title:"",keywords:[],annotations:[],comments:[],metadata:{},mime_type:"unknown",page:0,preview:!1,"public":!1,selected:!1},c.prototype.url=function(){return arcs.baseURL+"resources/"+this.id},c.prototype.urlRoot=arcs.baseURL+"resources",c.prototype.parse=function(a){var b,c,d,e,f,g,h,i,j,k;if(a.Resource!=null){i=a.Resource;for(b in i)d=i[b],a[b]=d;a.User!=null&&(a.user=a.User,delete a.User),a.Keyword!=null&&(a.keywords=function(){var c,d,e,f;e=a.Keyword,f=[];for(c=0,d=e.length;c<d;c++)b=e[c],f.push(b.keyword);return f}(),delete a.Keyword),a.Comment!=null&&(a.comments=a.Comment,delete a.Comment),a.Flag!=null&&(a.flags=a.Flag,delete a.Flag);if(a.Membership!=null){a.memberships={},j=a.Membership;for(e=0,g=j.length;e<g;e++)c=j[e],a.memberships[c.collection_id]=parseInt(c.page);delete a.Membership}a.Annotation!=null&&(a.annotations=a.Annotation,delete a.Annotation);if(a.Metadatum!=null){a.metadata=new arcs.models.MetadataContainer,a.metadata.id=a.id,k=a.Metadatum;for(f=0,h=k.length;f<h;f++)c=k[f],a.metadata.set(c.attribute,c.value);delete a.Metadatum}delete a.Resource}return a.modified===a.created&&(a.modified=!1),a},c}(Backbone.Model)})).call(this);((function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};arcs.models.Upload=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.defaults={name:null,sha:null,identifier:null,progress:0,size:0,error:0,type:"unknown",title:null,lastModifiedDate:null},c}(Backbone.Model)})).call(this);((function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};arcs.models.User=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.ROLES={Admin:0,"Sr. Researcher":1,Researcher:2,Guest:3},c.prototype.urlRoot=arcs.baseURL+"users",c.prototype.is=function(a){return this.get("role")<=this.ROLES[a]},c.prototype.isLoggedIn=function(){return this.id!=null},c.prototype.isAdmin=function(){return this.get("role")===this.ROLES.Admin},c}(Backbone.Model)})).call(this);((function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};arcs.collections.AnnotationList=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.model=arcs.models.Annotation,c.prototype.url=function(){return arcs.baseURL+"resources/annotations/"+arcs.resource.id},c.prototype.parse=function(a){return a.relations!=null&&(this.relations=new arcs.collections.Collection(a.relations)),a.annotations},c}(Backbone.Collection)})).call(this);((function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};arcs.collections.Collection=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.model=arcs.models.Resource,c.prototype.comparator=function(a){return a.get("page")},c}(Backbone.Collection)})).call(this);((function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};arcs.collections.Discussion=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.model=arcs.models.Comment,c.prototype.url=function(){return arcs.baseURL+"resources/comments/"+arcs.resource.id},c.prototype.parse=function(a){var b,c,d,e;e=[];for(c=0,d=a.length;c<d;c++)b=a[c],e.push(_.extend(b.User,b.Comment));return e},c}(Backbone.Collection)})).call(this);((function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};arcs.collections.JobList=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.model=arcs.models.Job,c}(Backbone.Collection)})).call(this);((function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};arcs.collections.KeywordList=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.model=arcs.models.Keyword,c.prototype.url=function(){return arcs.baseURL+"resources/keywords/"+arcs.resource.id},c.prototype.parse=function(a){var b,c,d,e,f;c=function(){var b,c,e;e=[];for(b=0,c=a.length;b<c;b++)d=a[b],e.push(d.Keyword);return e}();for(e=0,f=c.length;e<f;e++)b=c[e],b.link=arcs.baseURL+"search/"+encodeURIComponent("keyword: '"+b.keyword+"'");return c},c}(Backbone.Collection)})).call(this);((function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};arcs.collections.ResultSet=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.model=arcs.models.Resource,c.prototype.url=function(){return arcs.baseURL+"resources/search"},c.prototype.selected=function(){return this.filter(function(a){return a.get("selected")})},c.prototype.notSelected=function(){return this.reject(function(a){return a.get("selected")})},c.prototype.anySelected=function(){return this.any(function(a){return a.get("selected")})},c.prototype.numSelected=function(){return this.selected().length},c.prototype.select=function(a){return this._eachSetSelected(a,function(){return!0})},c.prototype.toggle=function(a){return this._eachSetSelected(a,function(a){return!a.get("selected")})},c.prototype.unselect=function(a){return this._eachSetSelected(a,function(){return!1})},c.prototype.unselectAll=function(){return this.each(function(a){return a.set("selected",!1,{silent:!0})})},c.prototype._eachSetSelected=function(a,b){var c,d,e,f,g;_.isArray(a)||(a=[a]),g=[];for(e=0,f=a.length;e<f;e++){c=a[e],d=this.get(c);if(!d)continue;g.push(d.set("selected",b(d),{silent:!0}))}return g},c.prototype.parse=function(a){return this.metadata=a,a.results},c}(Backbone.Collection)})).call(this);((function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};arcs.collections.UploadSet=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.model=arcs.models.Upload,c.prototype.url=function(){return arcs.baseURL+"uploads"},c}(Backbone.Collection)})).call(this);((function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};arcs.collections.UserList=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.model=arcs.models.User,c}(Backbone.Collection)})).call(this);((function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};arcs.views.Modal=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.options={draggable:!0,backdrop:!0,keyboard:!0,show:!0,"class":"",title:"No Title",subtitle:null,template:"ui/modal",inputs:{},buttons:{}},c.prototype.initialize=function(){var a,b,c,d,e;$("#modal").remove(),$(".modal-backdrop").remove(),$("body").append(arcs.tmpl("ui/modal_wrapper")),this.el=this.$el=$("#modal"),this.options["class"]&&this.$el.addClass(this.options["class"]),this.$el.html(arcs.tmpl(this.options.template,this.options)),d=this.options.inputs;for(b in d)c=d[b],a=this.$("#modal-"+b+"-input"),(c.complete||c.multicomplete)&&arcs.utils.autocomplete({sel:a,multiple:!!c.multicomplete,source:(e=c.multicomplete)!=null?e:c.complete});return this.options.draggable&&(this.$el.draggable({handle:this.$(".modal-header")}),this.$(".modal-header").css("cursor","move")),this.$el.modal({backdrop:this.options.backdrop,keyboard:this.options.keyboard,show:this.options.show}),this.bindButtons()},c.prototype.hide=function(){return this.$el.modal("hide")},c.prototype.show=function(){return this.$el.modal("show")},c.prototype.isOpen=function(){return this.$el.is(":visible")},c.prototype.validate=function(){var a,b,c,d,e,f,g;this.$("#validation-error").hide(),this.$(".error").removeClass("error"),d=this.getValues(),c=[],g=this.options.inputs;for(a in g)b=g[a],b.required&&(d[a].replace(/\s/g,"").length||c.push(a));if(!c.length)return!0;for(e=0,f=c.length;e<f;e++)a=c[e],this.$("#modal-"+a+"-input").addClass("error"),this.$("label[for='modal-"+a+"']").addClass("error");return this.$("#validation-error").show().html("Looks like you missed a required field."),!1},c.prototype.getValues=function(){var a,b;b={};for(a in this.options.inputs)b[a]=this.$("#modal-"+a+"-input").val();return b},c.prototype.bindButtons=function(){var a,b,c=this;b=[];for(a in this.options.buttons)b.push(this.$("button#modal-"+a+"-button").click(function(b){var d,e,f,g,h,i,j,k;a=b.target.id.match(/modal-([\w-]+)-button/)[1],g=c.options.buttons[a],_.isFunction(g)?e=g:(k=[(i=g.callback)!=null?i:function(){},(j=g.context)!=null?j:window],d=k[0],f=k[1],e=_.bind(d,f)),h=g.validate?c.validate():!0,h&&e(c.getValues());if(!(g.close!=null&&g.close||!h))return c.hide()}));return b},c}(Backbone.View)})).call(this);((function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b},c=Array.prototype.indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};arcs.views.BaseActions=function(a){function d(){d.__super__.constructor.apply(this,arguments)}return b(d,a),d.prototype.openResource=function(a){return this._modelFromRef!=null&&(a=this._modelFromRef(a)),window.open(arcs.baseURL+"resource/"+a.id)},d.prototype.keywordResource=function(a,b){var c;return a.set("keywords",a.get("keywords").concat(b)),c=new arcs.models.Keyword({resource_id:a.id,keyword:b}),c.save()},d.prototype.flagResource=function(a,b,c){var d;return d=new arcs.models.Flag({resource_id:a.id,reason:b,explanation:c}),d.save()},d.prototype.editResource=function(a,b){var d,e,f,g,h;e=a.get("metadata"),h=_.clone(a.attributes),g=_.clone(e.attributes);for(d in b)f=b[d],c.call(_.keys(a.attributes),d)>=0?a.set(d,f):(e.get(d)||f)&&e.set(d,f);_.isEqual(a.attributes,h)||a.save();if(!_.isEqual(e.attributes,g))return e.save(),a.trigger("change")},d.prototype.bookmarkResource=function(a,b){var c;return c=new arcs.models.Bookmark({resource_id:a.id,description:b}),c.save()},d.prototype.downloadResource=function(a){var b;return b=this.make("iframe",{style:"display: none",id:"downloader-for-"+a.id}),$("body").append(b),b.src=arcs.baseURL+"resources/download/"+a.id},d.prototype.splitResource=function(a){if(a.get("mime_type")!=="application/pdf")return;return $.post(arcs.baseURL+"resources/split_pdf/"+a.id,function(){return arcs.notify("Resource successfully queued for split.")})},d.prototype.rethumbResource=function(a){return $.post(arcs.baseURL+"resources/rethumb/"+a.id,function(){return arcs.notify("Resource successfully queued for re-thumbnail.")})},d.prototype.repreviewResource=function(a){return $.post(arcs.baseURL+"resources/repreview/"+a.id,function(){return arcs.notify("Resource successfully queued for re-preview.")})},d.prototype.indexResource=function(a){return $.post(arcs.baseURL+"resources/solr/"+a.id,function(){return arcs.notify("Resource successfully queued for SOLR index.")})},d}(Backbone.View)})).call(this);((function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};arcs.views.Home=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.initialize=function(){var a=this;return this.search=new arcs.utils.Search({container:$(".search-wrapper"),run:!1,onSearch:function(){return location.href=arcs.url("search",a.search.query)}}),this.renderDetails($("details:first"))},c.prototype.events={"click summary":"onClick"},c.prototype.onClick=function(a){var b;return b=$(a.currentTarget).parent(),b.toggleAttr("open"),this.renderDetails(b),a.preventDefault(),!1},c.prototype.renderDetails=function(a){var b,c;return c=a.data("type"),b=[{category:"type",value:c}],$.postJSON(arcs.baseURL+"resources/search?n=12",b,function(b){return a.children("div").html(arcs.tmpl("home/details",{resources:b.results}))})},c}(Backbone.View)})).call(this);((function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};arcs.views.Profile=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.events={"click #edit-btn":"editAccount"},c.prototype.editAccount=function(){var a=this;return new arcs.views.Modal({title:"Edit Your Account",subtitle:"If you'd like your password to stay the same, leave the password field blank.",inputs:{name:{value:this.model.get("name")},username:{value:this.model.get("username")},email:{value:this.model.get("email")},password:{type:"password"}},buttons:{save:{validate:!0,"class":"btn btn-success",callback:function(b){return b.password===""&&delete b.password,arcs.loader.show(),a.model.save(b,{success:arcs.loader.hide})}},cancel:function(){}}})},c}(Backbone.View)})).call(this);((function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b},c=Array.prototype.indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};arcs.views.Upload=function(a){function d(){d.__super__.constructor.apply(this,arguments)}return b(d,a),d.prototype.UPLOAD_ERR_OK=0,d.prototype.UPLOAD_ERR_INI_SIZE=1,d.prototype.UPLOAD_ERR_FORM_SIZE=2,d.prototype.UPLOAD_ERR_PARTIAL=3,d.prototype.UPLOAD_ERR_NO_FILE=4,d.prototype.pending=0,d.prototype.progress=0,d.prototype.allDone=!1,d.prototype.initialize=function(){return this.uploads=new arcs.collections.UploadSet,this.setupFileupload(),this.$uploads=this.$el.find("#uploads-container"),this.uploads.on("add remove change",this.render,this)},d.prototype.events={"click #upload-btn":"upload","click .remove":"remove"},d.prototype.setupFileupload=function(){var a=this;return this.fileupload=this.$el.find("#fileupload"),this.fileupload.fileupload({dataType:"json",url:arcs.url("uploads/add_files"),add:function(b,d){var e,f,g,h,i,j,k,l;g=function(){var a,b,c,e;c=d.files,e=[];for(a=0,b=c.length;a<b;a++)f=c[a],e.push(new arcs.models.Upload(f));return e}(),e=a.uploads.pluck("name"),j=_.reject(g,function(a){var b;return b=a.get("name"),c.call(e,b)>=0?(arcs.notify("You tried to add '"+b+"', but a file with that "+"name is already being uploaded, so we couldn't add it. If it is "+"not the same file, change the name or upload it in another "+"batch.","error",!1),!0):!1});if(!j.length)return!1;a.uploads.add(j);for(k=0,l=j.length;k<l;k++)h=j[k],i=h.toJSON(),i.cid=h.cid,a.$uploads.append(arcs.tmpl("upload/list",i));return a.$("span#drop-msg").remove(),a.$("#upload-btn").addClass("disabled"),d.submit(),a.pending+=1},fail:function(a,b){if(b.errorThrown==="Forbidden")return arcs.needsLogin()},progress:function(b,c){var d,e,f,g,h,i;f=parseInt(c.loaded/c.total*100,10),i=c.files;for(g=0,h=i.length;g<h;g++)d=i[g],e=a.uploads.find(function(a){return a.get("name")===d.name}),e.set("progress",f);return a.render()},progressall:function(b,c){return a.progress=c.loaded/c.total*100,a.render()},done:function(b,c){var d,e,f,g,h,i;i=c.files;for(g=0,h=i.length;g<h;g++)d=i[g],e=a.uploads.find(function(a){return a.get("name")===d.name}),f=_.find(c.result,function(a){return a.name===d.name}),e.set("progress",100),e.set("sha",f.sha),e.set("error",f.error);return a.pending-=1,a.pending||(a.$el.find("#upload-btn").removeClass("disabled"),a.allDone=!0),a.checkForErrors()&&a.render()}})},d.prototype.upload=function(){var a=this;return this.pending!==0?arcs.notify("Downloads are still pending.","error"):this.uploads.length?(this.uploads.each(function(b){var c;c=a.$uploads.find(".upload[data-id="+b.cid+"]"),b.set("title",c.find("#upload-title").val()),b.set("identifier",c.find("#upload-identifier").val()),b.set("rtype",c.find("#upload-type").val());if(b.get("identifier")==="Identifier")return b.set("identifier","")}),$.postJSON(arcs.baseURL+"uploads/batch",this.uploads.toJSON(),function(a){return location.href=arcs.url("search/")})):arcs.notify("Choose a file to upload.","error")},d.prototype.checkForErrors=function(){var a,b,c,d,e,f,g;f=this.uploads.models,g=[];for(d=0,e=f.length;d<e;d++){c=f[d],a=c.get("error");if(a===this.UPLOAD_ERR_OK)continue;a===this.UPLOAD_ERR_INI_SIZE||a===this.UPLOAD_ERR_FORM_SIZE?b="The file '"+c.get("name")+"' was too large. If "+"possible, split the file into pieces.":a===this.UPLOAD_ERR_PARTIAL?b="The file '"+c.get("name")+"' was only partially "+"uploaded. Please refresh the page and try again.":b="Something went wrong. Please refresh the page and try again. If the problem persists, contact the system administrator.",b+=" For more information, see our "+("<a href='"+arcs.url("help/uploading")+"'>Uploading ")+"documentation.</a>",arcs.notify(b,"error",!1),g.push(this.disable())}return g},d.prototype.remove=function(a){var b;b=this.$(a.currentTarget).parents(".upload"),this.uploads.remove(this.uploads.getByCid(b.data("id"))),b.remove();if(!this.uploads.length)return this.$("#upload-btn").addClass("disabled")},d.prototype.disable=function(){return this.$el.addClass("disabled"),this.$el.find("a, button").addClass("disabled")},d.prototype.render=function(){var a,b,c,d,e,f;f=this.uploads.models;for(d=0,e=f.length;d<e;d++)c=f[d],a=this.$uploads.find(".upload[data-id="+c.cid+"]"),c.get("progress")<100?a.find(".bar").css("width",c.get("progress")+"%"):(a.find(".progress").hide(),a.find("span#progress-done").show());return this.allDone?b="<i class='icon-ok'></i> All Done":this.progress===100||this.pending===0?b="<i class='icon-time'></i> Waiting on server...":b=""+this.progress.toFixed(2)+"% ("+this.pending+" pending)",this.$("span#progress-all").html(b),this},d}(Backbone.View)})).call(this);((function(){var a,b=Object.prototype.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};(a=arcs.views).admin==null&&(a.admin={}),arcs.views.admin.Jobs=function(a){function b(){b.__super__.constructor.apply(this,arguments)}return c(b,a),b.prototype.JOB_STATUSES={done:0,pending:1,failing:2,failed:3,interrupted:4},b.prototype.options={autoUpdate:!1,updateEvery:15e3},b.prototype.initialize=function(){return this.collection.on("add remove change reset sync",this.render,this),this.collection.url=arcs.baseURL+"jobs",this.filterJobs(),this.lastUpdated=new Date,setInterval(_.bind(this.render,this),5e3),setInterval(_.bind(this.update,this),this.options.updateEvery)},b.prototype.events={"keyup #filter-input":"filterJobs","change #auto-update":"setUpdate","click #retry-btn":"retryJob","click #delete-btn":"deleteJob","click #release-btn":"releaseJob","click #show-btn":"showJob"},b.prototype.showJob=function(a){var b;return b=this.collection.get($(a.currentTarget).data("id")),arcs.prompt("Job "+b.id,arcs.tmpl("admin/show_job",b.toJSON()))},b.prototype.retryJob=function(a){var b,c=this;return b=this.collection.get($(a.currentTarget).data("id")),arcs.confirm("Are you sure you want to retry this job?","Job <b>"+b.id+"</b> will be set to <b>pending</b>.",function(){return b.set({status:"1",failed_at:null,error:null}),arcs.loader.show(),b.save({},{success:function(){return arcs.loader.hide()}})})},b.prototype.deleteJob=function(a){var b,c=this;return b=this.collection.get($(a.currentTarget).data("id")),arcs.confirm("Are you sure you want to delete this job?","Job <b>"+b.id+"</b> will be deleted.",function(){return arcs.loader.show(),b.destroy({success:function(){return arcs.loader.hide()}})})},b.prototype.releaseJob=function(a){var b,c=this;return b=this.collection.get($(a.currentTarget).data("id")),arcs.confirm("Are you sure you want to release this job?","Job <b>"+b.id+"</b> will be released.",function(){return arcs.loader.show(),b.save({locked_by:null,locked_at:null},{success:function(){return arcs.loader.hide()}})})},b.prototype.filterJobs=function(){var a;return a=this.$("#filter-input").val(),this.JOB_STATUSES[a]!=null&&(a=this.JOB_STATUSES[a]),this.filter=new RegExp(a,"i"),this.render()},b.prototype.setUpdate=function(){return this.options.autoUpdate=!this.options.autoUpdate},b.prototype.update=function(){var a=this;if(!this.options.autoUpdate)return;return this.collection.fetch({success:function(){return a.lastUpdated=new Date}})},b.prototype.render=function(){var a,b,c=this;return a=this.collection.filter(function(a){return a.get("status").match(c.filter)||a.get("name").match(c.filter)}),this.$("#jobs").html(arcs.tmpl("admin/jobs",{jobs:function(){var c,d,e;e=[];for(c=0,d=a.length;c<d;c++)b=a[c],e.push(b.toJSON());return e}()})),this.$("#time").html(relativeDate(this.lastUpdated)),$(".popover").hide(),this.$(".has-error").popover(),this},b}(Backbone.View)})).call(this);((function(){var a,b=Object.prototype.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};(a=arcs.views).admin==null&&(a.admin={}),arcs.views.admin.Users=function(a){function b(){b.__super__.constructor.apply(this,arguments)}return c(b,a),b.prototype.USER_ROLES={Researcher:2,"Sr. Researcher":1,Admin:0},b.prototype.initialize=function(){return this.collection.on("add remove change sync",this.render,this),this.render()},b.prototype.events={"click #delete-btn":"deleteUser","click #edit-btn":"editUser","click #new-btn":"newUser","click #invite-btn":"sendInvite"},b.prototype.deleteUser=function(a){var b,c=this;return b=this.collection.get($(a.currentTarget).data("id")),arcs.confirm("Are you sure you want to delete this user?","The account for <b>"+b.get("name")+"</b> will be deleted.",function(){return arcs.loader.show(),b.destroy({success:arcs.loader.hide})})},b.prototype.editUser=function(a){var b,c=this;return b=this.collection.get($(a.currentTarget).data("id")),new arcs.views.Modal({title:"Edit user",inputs:{name:{value:b.get("name")},username:{value:b.get("username")},email:{value:b.get("email")},role:{type:"select",options:this.USER_ROLES}},buttons:{save:{"class":"btn btn-success",callback:function(a){return arcs.loader.show(),b.unset("password"),b.save(a,{success:arcs.loader.hide})}},cancel:function(){}}}),$("#modal-role-input").val(b.get("role"))},b.prototype.newUser=function(){var a=this;return new arcs.views.Modal({title:"Create a new user",inputs:{name:{focused:!0},username:!0,email:!0,password:{type:"password"},role:{type:"select",options:this.USER_ROLES}},buttons:{save:{"class":"btn btn-success",callback:function(b){var c;return c=new arcs.models.User(b),arcs.loader.show(),c.save({},{success:function(b,d){return c.id=d.id,arcs.loader.hide(),a.collection.add(c)}})}},cancel:function(){}}})},b.prototype.sendInvite=function(){var a=this;return new arcs.views.Modal({title:"Invite someone to ARCS",subtitle:"Provide an email address and we'll send them a link that will allow them to create an account.",inputs:{email:{focused:!0},role:{type:"select",options:this.USER_ROLES}},buttons:{send:{"class":"btn btn-success",callback:function(b){return b.email=$.trim(b.email),$.postJSON(arcs.baseURL+"users/invite",b,function(){return a.collection.add(b)})}},cancel:function(){}}})},b.prototype.render=function(){return this.$("#users").html(arcs.tmpl("admin/users",{users:this.collection.toJSON()})),this},b}(Backbone.View)})).call(this);((function(){var a,b=Object.prototype.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a},d=Array.prototype.indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};(a=arcs.views).search==null&&(a.search={}),arcs.views.search.Actions=function(a){function b(){b.__super__.constructor.apply(this,arguments)}return c(b,a),b.prototype.initialize=function(){return this.results=this.collection,this.ctxMenu=new arcs.views.ContextMenu({el:$(document),filter:"img",options:this._getContextOptions(),onShow:function(a){return $(a.currentTarget).parents(".result").addClass("selected"),arcs.bus.trigger("selection")},context:this}),arcs.keys.map(this,{"ctrl+o":this.openSelected,"ctrl+e":this.editSelected,space:this.previewSelected})},b.prototype.events={"dblclick img":"openResource","click #open-btn":"openSelected","click #open-colview-btn":"collectionFromSelected","click #collection-btn":"namedCollectionFromSelected","click #collection-add-btn":"addToCollection","click #attribute-btn":"editSelected","click #flag-btn":"flagSelected","click #delete-btn":"deleteSelected","click #bookmark-btn":"bookmarkSelected","click #keyword-btn":"keywordSelected","click #download-btn":"downloadSelected","click #zipped-btn":"zippedDownloadSelected","click #rethumb-btn":"rethumbSelected","click #repreview-btn":"repreviewSelected","click #split-btn":"splitSelected","click #access-btn":"setAccessForSelected","click #solr-btn":"indexSelected"},b.prototype.deleteSelected=function(){var a,b=this;if(!this.results.anySelected())return;return a=this.results.numSelected(),new arcs.views.Modal({title:"Delete Selected",subtitle:""+a+" "+arcs.inflector.pluralize("resource",a)+" will be "+"permanently deleted.",buttons:{"delete":{"class":"btn btn-danger",callback:function(){var c,d,e,f;f=b.results.selected();for(d=0,e=f.length;d<e;d++)c=f[d],c.destroy();return b._notify("deleted",a)}},cancel:function(){}}})},b.prototype.keywordSelected=function(){var a,b=this;if(!this.results.anySelected())return;return a=this.results.numSelected(),new arcs.views.Modal({title:"Keyword Selected",subtitle:"The keyword will be applied to "+a+" "+(""+arcs.inflector.pluralize("resource",a)+"."),backdrop:!0,inputs:{keyword:{label:!1,complete:arcs.complete("keywords/complete"),focused:!0,required:!0}},buttons:{save:{"class":"btn btn-success",validate:!0,callback:function(a){var c,d,e,f;f=b.results.selected();for(d=0,e=f.length;d<e;d++)c=f[d],b.keywordResource(c,a.keyword);return b._notify("keyworded")}},cancel:function(){}}})},b.prototype.rethumbSelected=function(){var a,b,c,d,e;d=this.results.selected(),e=[];for(b=0,c=d.length;b<c;b++)a=d[b],e.push(this.rethumbResource(a));return e},b.prototype.splitSelected=function(){var a,b,c,d,e;d=this.results.selected(),e=[];for(b=0,c=d.length;b<c;b++)a=d[b],e.push(this.splitResource(a));return e},b.prototype.flagSelected=function(){var a,b=this;if(!this.results.anySelected())return;return a=this.results.numSelected(),new arcs.views.Modal({title:"Flag Selected",subtitle:""+a+" "+arcs.inflector.pluralize("resource",a)+" will be flagged.",inputs:{reason:{type:"select",options:_.inverse(arcs.config.flags)},explain:{type:"textarea"}},buttons:{save:{"class":"btn btn-success",callback:function(a){var c,d,e,f;f=b.results.selected();for(d=0,e=f.length;d<e;d++)c=f[d],b.flagResource(c,a.reason,a.explain);return b._notify("flagged")}},cancel:function(){}}})},b.prototype.editSelected=function(){var a,b,c,d,e,f,g,h=this;if(!this.results.anySelected())return;if(this.results.numSelected()>1)return this.batchEditSelected();f=this.results.selected()[0],d={title:{value:f.get("title")},type:{type:"select",options:_.keys(arcs.config.types),value:f.get("type")}},e=f.get("metadata"),b=arcs.config.metadata;for(a in b)c=b[a],d[a]={value:(g=e.get(a))!=null?g:"",help:c};return new arcs.views.Modal({title:"Edit Info",subtitle:"",template:"ui/modal_columned",inputs:d,buttons:{save:{"class":"btn btn-success",callback:function(a){return h.editResource(f,a)}},cancel:function(){}}})},b.prototype.batchEditSelected=function(){var a,b,c,e,f,g,h,i,j,k=this;f=this.results.selected(),g=_.map(f,function(a){return a.get("type")}),e={type:{type:"select",options:_.keys(arcs.config.types),value:_.twins(g)?f[0].get("type"):"",checkbox:_.twins(g)&&f[0].get("type")}},j=arcs.config.metadata;for(b in j){c=j[b];if(d.call(arcs.config.metadataSingular,b)>=0)continue;i=_.map(f,function(a){return a.get("metadata").get(b)}),a=_.twins(i)&&i[0],h=_.twins(i)&&i[0]?i[0]:void 0,e[b]={checkbox:!!a,value:h!=null?h:"",help:c}}return new arcs.views.BatchEditModal({title:"Edit Info (Multiple)",subtitle:"The values of checked fields will be applied to all of the selected results, even when blank.",template:"ui/modal_columned",inputs:e,buttons:{save:{"class":"btn btn-success",callback:function(a){var b,c,d,e,f;e=k.results.selected(),f=[];for(c=0,d=e.length;c<d;c++)b=e[c],f.push(k.editResource(b,a));return f}},cancel:function(){}}})},b.prototype.namedCollectionFromSelected=function(){var a;if(!this.results.anySelected())return;return a=this.results.numSelected(),new arcs.views.Modal({title:"Create a Collection",subtitle:"A collection with "+a+" "+arcs.inflector.pluralize("resource",a)+" "+"will be created.",inputs:{title:{focused:!0},description:{type:"textarea"}},buttons:{save:{"class":"btn btn-success",callback:this.collectionFromSelected,context:this},cancel:function(){}}})},b.prototype.collectionFromSelected=function(a){var b,c,d,e=this;if(!this.results.anySelected())return;return b=new arcs.models.Collection({title:(c=a.title)!=null?c:"Temporary Collection",description:(d=a.description)!=null?d:"Results from search","public":!1,temporary:!0,members:_.map(this.results.selected(),function(a){return a.get("id")})}),b.save({},{success:function(a){return window.open(arcs.url("collection",a.id))},error:function(){return arcs.notify("An error occurred.","error")}})},b.prototype.addToCollection=function(){var a,b=this;return a=this.results.numSelected(),new arcs.views.Modal({title:"Add to existing collection",subtitle:""+a+" "+arcs.inflector.pluralize("resource",a)+" will be added        to the selected collection.",inputs:{collection:{type:"select",options:this.getCollections()}},buttons:{add:{"class":"btn btn-success",callback:function(a){var c,d;return d=arcs.url("collections/append/",a.collection),c={members:_.map(b.results.selected(),function(a){return a.get("id")})},$.postJSON(d,c,function(){return b._notify("added")})}},cancel:function(){}}})},b.prototype.getCollections=function(){var a;return a=[],$.ajax({url:arcs.baseURL+"collections/titles",async:!1,dataType:"json",success:function(b){return a=b}}),_.inverse(a)},b.prototype.previewSelected=function(){if(!this.results.anySelected())return;return this.preview!=null&&$("#modal").is(":visible")?(this.preview.remove(),this.preview=null):this.preview=new arcs.views.Preview({collection:new arcs.collections.ResultSet(this.results.selected())})},b.prototype.downloadSelected=function(){var a,b,c,d,e;d=this.results.selected(),e=[];for(b=0,c=d.length;b<c;b++)a=d[b],e.push(this.downloadResource(a));return e},b.prototype.zippedDownloadSelected=function(){var a,b=this;return this.results.numSelected()>1?(a={resources:_.pluck(this.results.selected(),"id")},$.postJSON(arcs.baseURL+"resources/zipped",a,function(a){var c;if(a.url!=null)return c=b.make("iframe",{style:"display:none"}),$("body").append(c),c.src=a.url}),arcs.notify("Hold tight. We're building your zipfile. Your download will start in a moment","success")):arcs.notify("To download resources zipped, select at least 2.")},b.prototype.bookmarkSelected=function(){var a,b,c,d;d=this.results.selected();for(b=0,c=d.length;b<c;b++)a=d[b],this.bookmarkResource(a);if(this.results.anySelected())return this._notify("bookmarked")},b.prototype.openSelected=function(){var a,b,c,d;d=this.results.selected();for(b=0,c=d.length;b<c;b++)a=d[b],this.openResource(a);if(this.results.anySelected())return this._notify("opened")},b.prototype.setAccessForSelected=function(){var a,b,c,d=this;return a=this.results.numSelected(),b=_.map(this.results.selected(),function(a){return a.get("public")}),_.twins(b)?c=b[0]?"Public":"Private":c="",new arcs.views.Modal({title:"Set Access",subtitle:"<b>Private</b> resources may only be viewed by ARCS users. <b>Public</b> resources may be viewed by the general public.",inputs:{access:{type:"select",options:["","Public","Private"],value:c}},buttons:{save:{"class":"btn btn-success",callback:function(a){var b,c,e,f,g;if(!a.access)return;f=d.results.selected(),g=[];for(c=0,e=f.length;c<e;c++)b=f[c],b.set("public",a.access==="Public"),g.push(b.save());return g}},cancel:function(){}}})},b.prototype.indexSelected=function(){var a,b,c,d,e;d=this.results.selected(),e=[];for(b=0,c=d.length;b<c;b++)a=d[b],e.push(this.indexResource(a));return e},b.prototype.repreviewSelected=function(){var a,b,c,d,e;d=this.results.selected(),e=[];for(b=0,c=d.length;b<c;b++)a=d[b],e.push(this.repreviewResource(a));return e},b.prototype._notify=function(a,b){var c;return a==null&&(a="affected"),b==null&&(b=this.results.numSelected()),c=""+b+" "+arcs.inflector.pluralize("resource",b)+" "+(""+arcs.inflector.conjugate("was",b)+" "+a+"."),arcs.notify(c,"success")},b.prototype._modelFromRef=function(a){var b;return a instanceof arcs.models.Resource?a:(a instanceof jQuery.Event&&(a.preventDefault(),a=$(a.currentTarget).parents(".result")),b=$(a).data("id"),this.results.get(b))},b.prototype._getContextOptions=function(){var a,b,c;return b={Open:"openSelected",Preview:"previewSelected",Download:"downloadSelected"},c={"Edit...":"editSelected","Flag...":"flagSelected"},a={"Delete...":"deleteSelected"},arcs.user.isAdmin()?_.extend(b,c,a):arcs.user.isLoggedIn()?_.extend(b,c):b},b}(arcs.views.BaseActions)})).call(this);((function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};arcs.views.BatchEditModal=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.initialize=function(){var a=this;return c.__super__.initialize.call(this),this.$("input[type=text][id^=modal]").change(function(b){return a._checkBox($(b.currentTarget))}),this.$("input[type=text][id^=modal]").keyup(function(b){return a._checkBox($(b.currentTarget))}),this.$("select[id^=modal]").change(function(b){return a._checkBox($(b.currentTarget))})},c.prototype._checkBox=function(a){var b,c,d,e;return e=a.attr("id").match(/modal-([\w-]+)-input/),c=e[0],d=e[1],b=$("input#modal-"+d+"-checkbox"),a.val()?b.prop("checked",!0):b.prop("checked",!1)},c.prototype.getValues=function(){var a,b;b={};for(a in this.options.inputs)this.$("input#modal-"+a+"-checkbox").is(":checked")&&(b[a]=this.$("#modal-"+a+"-input").val());return b},c}(arcs.views.Modal)})).call(this);((function(){var a,b=Object.prototype.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};(a=arcs.views).search==null&&(a.search={}),arcs.views.search.Search=function(a){function b(){b.__super__.constructor.apply(this,arguments)}return c(b,a),b.prototype.options={sort:"modified",sortDir:"desc",grid:!0,url:arcs.baseURL+"search/"},b.prototype.initialize=function(){return this.setupSelect(),this.setupSearch(),this.actions=new arcs.views.search.Actions({el:this.$el,collection:this.search.results}),this.router=new arcs.routers.Search({search:this.search}),Backbone.history.start({pushState:!0,root:this.options.url}),this.router.searched||this.search.run(),this.search.results.on("change remove",this.render,this),arcs.bus.on("selection",this.afterSelection,this),arcs.keys.map(this,{"ctrl+a":this.selectAll,"?":this.showHotkeys,t:this.scrollTop})},b.prototype.events={"click img":"toggle","click .result":"maybeUnselectAll","click #search-results":"maybeUnselectAll","click #grid-btn":"toggleView","click #list-btn":"toggleView","click #top-btn":"scrollTop","click .sort-btn":"setSort","click .dir-btn":"setSortDir"},b.prototype.setupSelect=function(){var a=this;return this.$el.find("#search-results").selectable({distance:20,filter:".img-wrapper img",selecting:function(b,c){return $(c.selecting).parents(".result").addClass("selected"),a.afterSelection()},selected:function(b,c){return $(c.selected).parents(".result").addClass("selected"),a.afterSelection()},unselecting:function(b,c){return $(c.unselecting).parents(".result").removeClass("selected"),a.afterSelection()},unselected:function(b,c){return $(c.unselected).parents(".result").removeClass("selected"),a.afterSelection()}})},b.prototype.setupSearch=function(){var a=this;return this.scrollReady=!1,this.search=new arcs.utils.Search({container:$(".search-wrapper"),order:this.options.sort,run:!1,loader:!0,success:function(){return a.router.navigate(encodeURIComponent(a.search.query)),a.scrollReady||a.setupScroll()&&(a.scrollReady=!0),a.render()}})},b.prototype.setupScroll=function(){var a,b,c,d,e,f=this;return e=[this.$("#search-actions"),this.$("#search-results")],a=e[0],b=e[1],c=$(window),d=a.offset().top-10,c.scroll(function(){c.scrollTop()>d?(a.addClass("toolbar-fixed").width(b.width()+22),f.$("#top-btn").show()):(a.removeClass("toolbar-fixed").width("auto"),f.$("#top-btn").hide());if(c.scrollTop()===$(document).height()-c.height()){if(f.search.results.length<f.search.results.metadata.total)return f.search.run(null,{add:!0,page:f.search.page+=1,order:f.options.sort,direction:f.options.sortDir,success:function(){return f.append()}});return}}),c.resize(function(){if(c.scrollTop()>d)return a.width(b.width()+23)})},b.prototype.toggleView=function(){return this.options.grid=!this.options.grid,this.$("#grid-btn").toggleClass("active"),this.$("#list-btn").toggleClass("active"),this.render()},b.prototype.scrollTop=function(){var a;return a=$(window).scrollTop()/$(document).height()*1e3,$("html, body").animate({scrollTop:0},a)},b.prototype.setSort=function(a){return this.options.sort=a.target.id.match(/sort-(\w+)-btn/)[1],this.$(".sort-btn .icon-ok").remove(),this.$(a.target).append(this.make("i",{"class":"icon-ok"})),this.$("#sort-btn span#sort-by").html(this.options.sort),this.search.run(null,{order:this.options.sort,direction:this.options.sortDir})},b.prototype.setSortDir=function(a){return this.options.sortDir=a.target.id.match(/dir-(\w+)-btn/)[1],this.$(".dir-btn .icon-ok").remove(),this.$(a.target).append(this.make("i",{"class":"icon-ok"})),this.search.run(null,{order:this.options.sort,direction:this.options.sortDir})},b.prototype.unselectAll=function(a){a==null&&(a=!0),this.$(".result").removeClass("selected");if(a)return arcs.bus.trigger("selection")},b.prototype.selectAll=function(a){a==null&&(a=!0),this.$(".result").addClass("selected");if(a)return arcs.bus.trigger("selection")},b.prototype.toggle=function(a){return a.ctrlKey||a.shiftKey||a.metaKey||this.unselectAll(!1),$(a.currentTarget).parents(".result").toggleClass("selected"),arcs.bus.trigger("selection")},b.prototype.maybeUnselectAll=function(a){return a instanceof jQuery.Event?a.metaKey||a.ctrlKey||a.shiftKey?!1:$(a.target).attr("src")?!1:this.unselectAll():this.unselectAll()},b.prototype.showHotkeys=function(){return $(".hotkeys-modal").length?$(".hotkeys-modal").remove():new arcs.views.Hotkeys({template:"search/hotkeys"})},b.prototype.afterSelection=function(){var a=this;return _.defer(function(){var b;return b=$(".result.selected").map(function(){return $(this).data("id")}).get(),a.search.results.unselectAll(),b.length&&a.search.results.select(b),a.search.results.anySelected()?($(".btn.needs-resource").removeClass("disabled"),$("#search input").blur()):$(".btn.needs-resource").addClass("disabled")})},b.prototype.append=function(){var a;if(this.search.results.length>this.search.options.n)return a=new arcs.collections.ResultSet(this.search.getLast()),this._render({results:a.toJSON()},!0);return},b.prototype.render=function(){return this._render({results:this.search.results.toJSON()})},b.prototype._render=function(a,b){var c,d;b==null&&(b=!1),c=$("#search-results"),d=this.options.grid?"search/grid":"search/list",c[b?"append":"html"](arcs.tmpl(d,a));if(!this.search.results.length)return c.html(this.make("div",{id:"no-results"},"No Results"))},b}(Backbone.View)})).call(this);((function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};arcs.views.ContextMenu=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.events={"click *":"hide"},c.prototype.options={options:{"Example option":function(){},"Another option":function(){}},context:window,onShow:function(){}},c.prototype.initialize=function(){return $(".context-menu").remove(),$("body").append(arcs.tmpl("ui/context_menu",{options:this.options.options})),this.menu=$(".context-menu"),this.addEvents()},c.prototype.show=function(a){return this.hide(),this.menu.css({position:"absolute",top:a.pageY+"px",left:a.pageX+"px"}),this.menu.show(),this.options.onShow(a),a.preventDefault(),!1},c.prototype.addEvents=function(){var a,b,c,d,e;this.events["contextmenu "+this.options.filter]="show",e=this.options.options;for(d in e){b=e[d];if(this.options.context[b]==null)continue;a=_.bind(this.options.context[b],this.options.context),c=arcs.inflector.identifierize(d),this.events["click #context-menu-option-"+c]=a}return this.delegateEvents()},c.prototype.hide=function(a){return this.menu.hide()},c}(Backbone.View)})).call(this);((function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};arcs.views.Hotkeys=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.initialize=function(){var a;return a=navigator.appVersion.indexOf("Mac")!==-1?"â":"ctrl",$(".hotkeys-modal").length||$("body").append(arcs.tmpl(this.options.template,{ctrl:a})),this.el=this.$el=$(".hotkeys-modal"),$(".hotkeys-modal").modal({backdrop:!1}),this.delegateEvents()},c.prototype.events={"click .hotkeys-close":"close"},c.prototype.close=function(){return this.el.remove()},c}(Backbone.View)})).call(this);((function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};arcs.views.Preview=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.options={index:0,template:"search/preview"},c.prototype.initialize=function(){return $("#modal").length||$("body").append(arcs.tmpl("ui/modal_wrapper")),this.el=this.$el=$("#modal"),this.$el.modal(),arcs.keys.map(this,{left:this.prev,right:this.next}),this.set(this.options.index,!0)},c.prototype.events={"click #prev-btn":"prev","click #next-btn":"next"},c.prototype.prev=function(){return this.set(this.index-1)},c.prototype.next=function(){return this.set(this.index+1)},c.prototype.set=function(a,b){b==null&&(b=!1);if(!(0<=a&&a<this.collection.length||b))return;return this.model=this.collection.at(a),this.index=a,this._preloadNext(),this.render()},c.prototype._preloadNext=function(){if(this.index+1<this.collection.length)return arcs.preload(this.collection.at(this.index+1).get("url"))},c.prototype.remove=function(){return this.$el.modal("hide"),c.__super__.remove.call(this),this.undelegateEvents()},c.prototype.render=function(){var a;return a={page:this.index+1,count:this.collection.length},this.$el.html(arcs.tmpl(this.options.template,_.extend(this.model.toJSON(),a))),this},c}(Backbone.View)})).call(this);((function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};arcs.views.ViewerActions=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.initialize=function(){var a=this;return this.viewer=this.options.viewer,arcs.bus.on("indexChange",function(){return a.updateNav(arguments[0]),a.checkNav()}),this.onNavKeyup=_.debounce(this.setNav,1e3),arcs.keys.map(this,{"ctrl+e":this.edit,"-":this.zoomOut,"+":this.zoomIn,p:this.onNavClick})},c.prototype.events={"click .page-nav input":"onNavClick","keyup .page-nav input":"onNavKeyup","keydown .page-nav input":"onNavKeydown","keydown .collection-search":"search","click #thumbs-btn":"openInSearch","click #mini-next-btn":"next","click #mini-prev-btn":"prev","click #edit-btn":"edit","click #flag-btn":"flag","click #full-screen-btn":"fullScreen","click #delete-btn":"delete","click #delete-col-btn":"deleteCollection","click #split-btn":"split","click #rethumb-btn":"rethumb","click #download-btn":"download","click #annotate-btn":"annotate","click #zoom-in-btn":"zoomIn","click #zoom-out-btn":"zoomOut"},c.prototype.onNavClick=function(){return this.$(".page-nav input").select()},c.prototype.onNavKeyup=function(a){if(a.which!==13)return this.setNav()},c.prototype.onNavKeydown=function(a){if(a.which===13)return this.setNav()},c.prototype.setNav=function(){if(!this.viewer.set(this.$(".page-nav input").val()-1,{trigger:!0})&&this.$(".page-nav input").val()!=="")return this.$(".page-nav input").val(this.viewer.index+1)},c.prototype.updateNav=function(a){return this.$(".page-nav input").val(a+1)},c.prototype.checkNav=function(){return this.viewer.collection.length===this.viewer.index+1?this.$("#mini-next-btn").addClass("disabled"):this.$("#mini-next-btn").removeClass("disabled"),this.viewer.index===0?this.$("#mini-prev-btn").addClass("disabled"):this.$("#mini-prev-btn").removeClass("disabled")},c.prototype.search=function(a){var b,c;if(a.which!==13)return;return c=this.$(".collection-search").val(),b="collection:'"+arcs.collectionModel.get("title")+"' text:'"+c+"'",location.href=arcs.baseURL+"search/"+encodeURIComponent(b)},c.prototype.openInSearch=function(){return location.href=arcs.baseURL+"search/"+encodeURIComponent("collection:'"+arcs.collectionModel.get("title")+"'")},c.prototype.next=function(){return this.viewer.next()},c.prototype.prev=function(){return this.viewer.prev()},c.prototype.flag=function(){var a=this;return new arcs.views.Modal({title:"Flag",inputs:{reason:{type:"select",options:{"Incorrect attributes":"incorrect",Spam:"spam",Duplicate:"duplicate",Other:"other"}},explain:{type:"textarea"}},buttons:{save:{"class":"btn btn-success",callback:function(b){return a.flagResource(a.viewer.model,b.reason,b.explain)}},cancel:function(){}}})},c.prototype.edit=function(){var a,b,c,d,e,f,g=this;d={title:{value:this.viewer.model.get("title")},type:{type:"select",options:_.keys(arcs.config.types),value:this.viewer.model.get("type")}},e=this.viewer.model.get("metadata"),b=arcs.config.metadata;for(a in b)c=b[a],d[a]={value:(f=e.get(a))!=null?f:"",help:c};return new arcs.views.Modal({title:"Edit Info",subtitle:"",template:"ui/modal_columned",inputs:d,buttons:{save:{"class":"btn btn-success",callback:function(a){return g.editResource(g.viewer.model,a)}},cancel:function(){}}})},c.prototype["delete"]=function(){var a=this;return arcs.confirm("Are you sure you want to delete this resource?","<b>"+this.viewer.model.get("title")+"</b> will be permanently deleted.",function(){return a.viewer.model.destroy()})},c.prototype.deleteCollection=function(){var a=this;return arcs.confirm("Are you sure you want to delete this collection?","<p>Collection <b>"+this.viewer.collectionModel.get("title")+"</b> will be "+"deleted. <p><b>N.B.</b> Resources within the collection will not be "+"deleted. They may still be accessed from other collections to which they "+"belong.",function(){return arcs.loader.show(),$.ajax({url:arcs.url("collections","delete",a.viewer.collectionModel.id),type:"DELETE",success:function(){return location.href=arcs.baseURL}})})},c.prototype.rethumb=function(){return this.rethumbResource(this.viewer.model)},c.prototype.split=function(){return this.splitResource(this.viewer.model)},c.prototype.download=function(){return this.downloadResource(this.viewer.model)},c.prototype.annotate=function(){return arcs.bus.trigger("annotate")},c.prototype.fullScreen=function(){var a;if(this.$("#full-screen-btn i").hasClass("icon-resize-small"))document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen();else{a=document.documentElement;if(a.requestFullScreen)a.requestFullScreen();else if(a.mozRequestFullScreen)a.mozRequestFullScreen();else{if(!a.webkitRequestFullScreen)return arcs.notify("We're unable to open screen for you. You can either open it manually, or install the latest version of either Google Chrome or Mozilla Firefox.");a.webkitRequestFullScreen()}}return this.$("#full-screen-btn i").toggleClass("icon-resize-full").toggleClass("icon-resize-small")},c.prototype.zoomIn=function(){var a;return a=$("#resource img").data("zoom"),a<2&&$("#resource img").data("zoom",a+.25),this.viewer.resize(),this._checkZoom(),arcs.bus.trigger("resourceReloaded")},c.prototype.zoomOut=function(){var a;return a=$("#resource img").data("zoom"),a>1&&$("#resource img").data("zoom",a-.25),this.viewer.resize(),this._checkZoom(),arcs.bus.trigger("resourceReloaded")},c.prototype._checkZoom=function(){var a;a=$("#resource img").data("zoom"),a===1&&this.$("#zoom-out-btn").addClass("disabled"),a===2&&this.$("#zoom-in-btn").addClass("disabled"),a>1&&this.$("#zoom-out-btn").removeClass("disabled");if(a<2)return this.$("#zoom-in-btn").removeClass("disabled")},c}(arcs.views.BaseActions)})).call(this);((function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};arcs.views.Annotation=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.initialize=function(){var a=this;return this.collection=new arcs.collections.AnnotationList,this.collection.on("add sync reset remove",this.render,this),arcs.bus.on("resourceLoaded",this.onLoad,this),arcs.bus.on("resourceReloaded",this.render,this),arcs.bus.on("resourceResize",this.render,this),arcs.bus.on("indexChange",this.clear,this),arcs.bus.on("annotate",this.toggleState,this),this.visible=!0,this.active=!1,$("#annotation-vis-btn").on("click",function(){return a.toggleVisibility()}),arcs.keys.map(this,{a:this.toggleVisibility})},c.prototype.events={"click #annotate-new-btn":"newAnnotation","click #annotate-done-btn":"exit","mouseenter .annotation":"onSummaryMouseenter","mouseleave .annotation":"onSummaryMouseleave","mouseenter .hotspot":"onBoxMouseenter","hover .annotation a":"onSummaryMouseenter","click .remove-btn":"removeAnnotation"},c.prototype.onLoad=function(){return this.img=$("#resource img"),this.active&&this.setupSelection(),this.collection.fetch()},c.prototype.toggleState=function(){return this.active?this.exit():this.enter()},c.prototype.enter=function(){return this.$(".annotate-controls").show(),$("#annotate-btn").addClass("disabled"),$(".hotspot i").show(),$("#wrapping").css("cursor","default"),this.setupSelection(),this.active=!0},c.prototype.exit=function(){return this.$(".annotate-controls").hide(),$("#annotate-btn").removeClass("disabled"),$(".hotspot i").hide(),this.removeIas(),this.active=!1},c.prototype.onSummaryMouseenter=function(a){var b,c;return a.target.tagName==="A"?b=$(a.target).parent():b=$(a.target),c=b.data("id"),$(".hotspot").removeClass("active"),$(".hotspot[data-id='"+c+"']").addClass("active")},c.prototype.onSummaryMouseleave=function(){return $(".hotspot").removeClass("active")},c.prototype.onBoxMouseenter=function(a){var b,c;return b=$(a.target),c=this.collection.get(b.data("id")),b.popover({title:arcs.tmpl("viewer/popover_title",{type:c.getType()}),content:arcs.tmpl("viewer/popover",c.toJSON()),placement:this._placePopover(b)}),b.popover("show")},c.prototype._placePopover=function(a){var b,c,d,e,f,g,h,i;h=[$(window).width(),$(window).height()],f=h[0],e=h[1],g={left:a.offset().left,top:a.offset().top,right:f-(a.offset().left+a.width()),bottom:e-(a.offset().top+a.height())},i=["right",g.right],c=i[0],b=i[1];for(d in g)g[d]>b&&(b=g[c=d]);return g.bottom<0&&(c="top"),g.top<0&&(c="bottom"),c},c.prototype.setupSelection=function(a){var b=this;return a==null&&(a=null),this.removeIas(),this.ias=this.img.imgAreaSelect({instance:!0,handles:!0,fadeSpeed:250,parent:this.$(".viewer-well"),onSelectEnd:function(a,c){return arcs.user.get("loggedIn")?b.openAnnotator():arcs.needsLogin()}})},c.prototype.removeIas=function(){this.img.removeData("imgAreaSelect");if(this.ias!=null)return this.ias.remove(),this.ias=null},c.prototype.toggleVisibility=function(){var a,b,c=this;return this.visible=!this.visible,b="Annotations are "+(this.visible?"visible":"hidden"),a=$("#annotation-vis-btn"),a.toggleClass("opaque").attr("data-original-title",b).tooltip("show"),_.delay(function(){return a.tooltip("hide")},1e3),this.visible?this.collection.fetch():$("#hotspots-wrapper").html("")},c.prototype.removeAnnotation=function(a){var b,c,d=this;a.stopPropagation(),b=$(a.target).parent(),b.popover("hide"),c=this.collection.get(b.data("id"));if(!c)return;return arcs.confirm("Are you sure?","This <b>"+c.getType().toLowerCase()+"</b> will be deleted.",function(){return c.destroy()}),!1},c.prototype.newAnnotation=function(){var a,b,c,d,e;return e=[this.img.width(),this.img.height()],b=e[0],a=e[1],c=Math.floor(b/2),d=Math.floor(a/2),this.ias.setOptions({show:!0}),this.ias.setSelection(c-50,d-50,c+50,d+50),this.ias.update()},c.prototype.openAnnotator=function(){var a,b=this;if((a=this.annotator)!=null?a.isOpen():void 0)return;return this.annotator=new arcs.views.Modal({title:"New Annotation",subtitle:arcs.tmpl("viewer/annotator"),backdrop:!1,"class":"annotator",buttons:{save:{"class":"btn btn-success",callback:function(){var a;a={relation:b.annotator.$(".result.selected img").data("id"),transcript:b.annotator.$("textarea#transcript").val(),url:b.annotator.$("input#url").val()};if(!_.any(a))return;return b.create(a),b.ias.cancelSelection(),delete b.annotator}},cancel:function(){return b.ias.cancelSelection(),delete b.annotator}}}),this.annotator.$el.on("click",".result img",function(){return $(".result").removeClass("selected"),$(this).parents(".result").addClass("selected")}),this.annotator.$("input#url").keyup(function(){var a;a=$(this).val();if(a.substring(0,7)==="http://")return $(this).val(a.substring(7))}),this.search=new arcs.utils.Search({container:$(".mini-search"),success:function(){return $(".mini-search-results").html(arcs.tmpl("search/grid",{results:b.search.results.toJSON()}))}})},c.prototype.create=function(a){var b;return b=new arcs.models.Annotation({resource_id:arcs.resource.id}),a.relation?b.set("relation",a.relation):a.transcript?b.set("transcript",a.transcript):b.set("url","http://"+a.url),this.ias!=null&&b.setScaled(this.ias.getSelection(),this.img.height(),this.img.width()),b.save(),b.set("id",_.uniqueId()),this.collection.add(b)},c.prototype.clear=function(){return $("#annotations-wrapper").html(""),$("#hotspots-wrapper").html(""),$(".popover").remove()},c.prototype.render=function(){var a,b=this;return this.clear(),a={annotations:this.collection.map(function(a){var c,d,e;return(c=a.get("relation"))&&a.set("relation",(((d=b.search)!=null?d.results.get(c):void 0)||((e=b.collection.relations)!=null?e.get(c):void 0)).toJSON()),_.extend(a.toJSON(),a.scaleTo(b.img.height(),b.img.width()))}),offset:$("#resource img").offset().left-$("#resource").offset().left},$("#annotations-wrapper").html(arcs.tmpl("viewer/annotations",a)),this.visible&&$("#hotspots-wrapper").html(arcs.tmpl("viewer/hotspots",a)),this.active&&$(".hotspot i").show(),this},c}(Backbone.View)})).call(this);((function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};arcs.views.Carousel=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.options={index:0,nthumbs:30},c.prototype.initialize=function(){var a=this;return arcs.bus.on("indexChange",this.slideTo,this),arcs.bus.on("indexChange",this.setSelected,this),this.render(),this.$el.elastislide({imageW:100,onClick:function(a){return arcs.bus.trigger("indexChange",a.index(),{noSlide:!0})},onSlide:function(b,c){if(!_.isNaN(c)&&c>a.options.nthumbs-10)return a._addThumbs()}}),this.slideTo(this.options.index)},c.prototype.events={"click li":"onClick"},c.prototype.onClick=function(a){return arcs.bus.trigger("indexChange",$(a.target).parent().index(),{noSlide:!0})},c.prototype.slideTo=function(a,b){b==null&&(b={}),this.$("li").length<a&&this._addThumbs(a+1-this.$("li").length);if(!b.noSlide)return this.$el.elastislide("slideToIndex",a)},c.prototype.setSelected=function(a){var b;return this.$(".thumb.selected").removeClass("selected"),b=this.$(".thumb").get(a),$(b).addClass("selected")},c.prototype._addThumbs=function(a){var b,c,d;return a==null&&(a=30),c=this.collection.models.slice(this.options.nthumbs,this.options.nthumbs+a),b=$(this._tmpl({resources:function(){var a,b,e;e=[];for(a=0,b=c.length;a<b;a++)d=c[a],e.push(d.toJSON());return e}(),offset:this.options.nthumbs})),this.$el.elastislide("add",b.filter("li")),this.options.nthumbs+=a,this.delegateEvents()},c.prototype.render=function(){return this.$("ul").html(this._tmpl({resources:_.first(this.collection.toJSON(),this.options.nthumbs),offset:0}))},c.prototype._tmpl=function(a){return arcs.tmpl("viewer/carousel",a)},c}(Backbone.View)})).call(this);((function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};arcs.views.DiscussionTab=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.events={"click #comment-btn":"saveComment"},c.prototype.initialize=function(){var a=this;this.collection=new arcs.collections.Discussion,this.collection.on("add remove reset",this.render,this),this.$tab=$("#discussion-btn"),this.$tab.on("click",function(){return a.update()}),arcs.bus.on("indexChange",function(){if(a.isActive())return a.update()});if(this.isActive())return this.update()},c.prototype.activate=function(){return $("#discussion-btn a").tab("show"),this.collection.fetch()},c.prototype.update=function(){var a=this;return this.$el.parent().css("opacity","0.2"),this.collection.fetch({success:function(){return a.$el.parent().css("opacity","1.0")},error:function(){return arcs.notify("An error occurred while loading comments","error")}})},c.prototype.isActive=function(){return $("#discussion-btn").hasClass("active")},c.prototype.saveComment=function(){var a,b;return a=this.$el.find("textarea#content"),a.val()?(b=new arcs.models.Comment({resource_id:arcs.resource.id,content:a.val()}),a.val(""),b.save(),b.set({created:new Date,username:arcs.user.get("username"),name:arcs.user.get("name")}),this.collection.add(b)):arcs.notify("Enter a comment.")},c.prototype.render=function(){return $("#comment-wrapper").html(arcs.tmpl("viewer/discussion",{comments:this.collection.toJSON()})),this},c}(Backbone.View)})).call(this);((function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};arcs.views.Keyword=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.events={"keydown #keyword-btn":"saveKeyword"},c.prototype.initialize=function(){var a=this;return this.collection=new arcs.collections.KeywordList,arcs.bus.on("indexChange",function(){return a.collection.fetch()}),this.collection.on("add remove reset",this.render,this),arcs.utils.autocomplete({sel:"#keyword-btn",source:arcs.complete("keywords/complete")}),this.collection.fetch()},c.prototype.saveKeyword=function(a){var b,c;if(a.keyCode!==13)return;return a.preventDefault(),b=this.$el.find("input#keyword-btn"),c=new arcs.models.Keyword({resource_id:arcs.resource.id,keyword:b.val()}),b.val(""),c.save(),this.collection.add(c),!1},c.prototype.render=function(){return this.$("#keywords-wrapper").html(arcs.tmpl("viewer/keywords",{keywords:this.collection.toJSON()})),this},c}(Backbone.View)})).call(this);((function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};arcs.views.RelationModal=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.initialize=function(){return c.__super__.initialize.call(this)},c.prototype.miniSearch=function(){},c}(arcs.views.Modal)})).call(this);((function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};arcs.views.Viewer=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.initialize=function(){var a,b=this;return this.collectionModel=this.options.collectionModel,this.orderCollection(),arcs.bus.on("indexChange",this.set,this),arcs.bus.on("all",function(a){return arcs.log(a)}),this.collection.on("add change remove",this.render,this),this.model.on("add change remove",this.render,this),this.throttledResize=_.throttle(this.resize,500),$(window).resize(function(){return arcs.bus.trigger("resourceResize")}),arcs.bus.on("resourceResize",this.throttledResize,this),arcs.keys.map(this,{left:this.prev,right:this.next,"?":this.showHotkeys}),this.actions=new arcs.views.ViewerActions({el:$("#viewer-controls"),collection:this.collection,viewer:this}),this.discussion=new arcs.views.DiscussionTab({el:$("#discussion")}),this.keywords=new arcs.views.Keyword({el:$("#information")}),this.annotations=new arcs.views.Annotation({el:$("#viewer")}),this.carousel=new arcs.views.Carousel({el:$("#carousel-wrapper"),collection:this.collection,index:(a=this.index)!=null?a:0}),this.router=new arcs.routers.Viewer,Backbone.history.start({pushState:!0,root:arcs.baseURL+(this.collection.length?"collection/":"resource/")}),this.model.get("first_req")&&this.splitPrompt(),this.index==null&&(this.index=0),this.resize()},c.prototype.events={"dblclick #resource img":"openFull","click #next-btn":"next","click #prev-btn":"prev"},c.prototype.orderCollection=function(){var a,b=this;if(((a=this.collectionModel)!=null?a.id:void 0)==null)return;return this.collection.each(function(a){return a.set("page",a.get("memberships")[b.collectionModel.id])}),this.collection.sort()},c.prototype.set=function(a,b){var c,d,e,f,g,h;return b==null&&(b={}),b.noSet?!1:(_.isNumeric(a)?(c=parseInt(a),d=this.collection.length?this.collection.at(c):this.model):(d=this.collection.get(a),c=this.collection.models.indexOf(d),b.noNavigate=!1,b.replace=!0),d&&c>=0?(f=[d,d,c],this.model=f[0],arcs.resource=f[1],this.index=f[2],b.trigger&&arcs.bus.trigger("indexChange",c,{noSet:!0}),b.noRender||this.render(),e=""+((g=(h=arcs.collectionModel)!=null?h.id:void 0)!=null?g:this.model.id)+"/"+(this.index+1),b.noNavigate||this.router.navigate(e,{replace:b.replace}),b.noPreload||this._preloadNeighbors(),!0):!1)},c.prototype._preloadNeighbors=function(){this.collection.at(this.index+1)!=null&&arcs.preload(this.collection.at(this.index+1).get("url"));if(this.collection.at(this.index-1)!=null)return arcs.preload(this.collection.at(this.index-1).get("url"))},c.prototype.next=function(){return this.set(this.index+1,{trigger:!0})},c.prototype.prev=function(){return this.set(this.index-1,{trigger:!0})},c.prototype.openFull=function(){return window.open(this.model.get("url"),"_blank","menubar=no")},c.prototype.checkNav=function(){return this.collection.length===this.index+1?this.$("#next-btn").addClass("disabled"):this.$("#next-btn").removeClass("disabled"),this.index===0?this.$("#prev-btn").addClass("disabled"):this.$("#prev-btn").removeClass("disabled")},c.prototype.splitPrompt=function(){var a=this;if(this.model.get("mime_type")!=="application/pdf")return;return new arcs.views.Modal({title:"Split into a PDF?",subtitle:"We noticed you've uploaded a PDF. If you'd like, we can split the PDF into a collection, where it can be annotated and commented on--page by page.",buttons:{yes:{"class":"btn btn-success",callback:function(){return $.post(arcs.baseURL+"resources/split_pdf/"+a.model.id)}},no:function(){}}})},c.prototype.showHotkeys=function(){return $(".hotkeys-modal").length?$(".hotkeys-modal").remove():new arcs.views.Hotkeys({template:"viewer/hotkeys"})},c.prototype.resize=function(){var a,b,c,d,e,f,g;c=128,b=204,d=75,a=this.$("#resource img"),f=$("body").hasClass("standalone")?c:b,e=$(window).height()-f,g=a.data("zoom"),this.$(".viewer-well").height(e),a.height(e*g),this.$("#wrapping").height(e).width(this.$(".viewer-well").width()-36),this.$(".tab-content").height(e-d),this.$("#wrapping").data().kineticSettings!=null&&this.$("#wrapping").kinetic("detach");if(g>1)return this.$("#wrapping").kinetic()},c.prototype.render=function(){var a,b;a=arcs.utils.mime.getInfo(this.model.get("mime_type"));switch(a.type){case"image":b="viewer/image";break;case"document":b="viewer/document";break;case"video":b="viewer/video";break;default:b="viewer/unknown"}return this.$("#resource").html(arcs.tmpl(b,this.model.toJSON())),this.$("#resource img").load(function(){return arcs.bus.trigger("resourceLoaded")}),this.$("#resource-details").html(arcs.tmpl("viewer/table",this.model.toJSON())),this.collectionModel!=null&&this.$("#collection-details").html(arcs.tmpl("viewer/collection_table",this.collectionModel.toJSON())),this.checkNav(),this.resize(),this},c}(Backbone.View)})).call(this);((function(){$(function(){var a;a=function(){return arcs.prompt("Your browser is old and unsupported.","<p>ARCS was designed for modern web browsers. Please upgrade to the newest version of <a href='http://google.com/chrome'>Chrome</a> or <a href='http://mozilla.org/en-US/firefox/new'>Firefox</a>.</p>If you'd like to give it a try anyway, click 'Ok' below.")};if(!(jQuery.support.ajax&&jQuery.support.cors&&history.pushState))return a()})})).call(this);window.JST = window.JST || {};
JST["admin/jobs"] = "<table class=\"table table-striped table-bordered\">  <tr>    <th>Job</th>    <th>Status</th>    <th>Lock</th>    <th>Created</th>    <th>Data</th>    <th>Error</th>    <th>Actions</th>  </tr><% _.each(jobs, function(j, i) { %>  <tr>    <td><%= j.name %></td>    <td>      <% if (j.status == 0) { %>      <span class=\"label label-success\">done</span>      <% } if (j.status == 1) { %>      <span class=\"label label-info\">pending</span>      <% } if (j.status == 2) { %>      <span class=\"label label-warning has-error\" rel=\"popover\" data-original-title=\"Error\"        data-content=\"<%= j.error %>\">failing</span>      <% } if (j.status == 3) { %>      <span class=\"label label-important has-error\" rel=\"popover\" data-original-title=\"Error\"        data-content=\"<%= j.error %>\">failed</span>      <% } if (j.status == 4) { %>      <span class=\"label label-important has-error\" rel=\"popover\" data-original-title=\"Error\"        data-content=\"<%= j.error %>\">interrupted</span>      <% } %>    </td>    <td>    <% if (j.locked_by) { %>      <%= relativeDate(new Date(j.locked_at)) %> by <span class=\"label\"><%= j.locked_by %></span>     <% } %>    </td>    <td><%= relativeDate(new Date(j.created)) %></td>    <td class=\"data\"><%= arcs.inflector.truncate(j.data, 50) %></td>    <td class=\"data\"><%= arcs.inflector.truncate(j.error, 50) %></td>    <td>      <button id=\"show-btn\" class=\"btn btn-mini\"        data-id=\"<%= j.id %>\">Show</button>      <button id=\"retry-btn\" class=\"btn btn-mini\"        data-id=\"<%= j.id %>\">Retry</button>      <button id=\"release-btn\" class=\"btn btn-mini\"        data-id=\"<%= j.id %>\">Release</button>      <button id=\"delete-btn\" class=\"btn btn-danger btn-mini\"        data-id=\"<%= j.id %>\">Delete</button>    </td>  </tr><% }) %></table>"
JST["admin/show_job"] = "<dl>  <dt>Job</dt>  <dd><%= name %></dd>  <dt>Status</dt>  <dd><%= status %></dd>  <dt>Created</dt>  <dd><%= created %></dd>  <dt>Lock</dt>  <dd><%= locked_at %></dd>  <dt>Data</dt>  <dd><pre><%= data %></pre></dd>  <dt>Error</dt>  <dd><pre><%= error %></pre></dd></dl>"
JST["admin/users"] = "<table class=\"table table-striped table-bordered\">  <tr>    <th>Name</th>    <th>Username</th>    <th>Email</th>    <th>Role</th>    <th>Actions</th>  </tr><% _.each(users, function(u, i) { %>  <tr>    <td><%= u.name %></td>    <td><%= u.username %></td>    <td><%= u.email %></td>    <td>      <% if (u.role == 0) print('Admin') %>      <% if (u.role == 1) print('Sr. Researcher') %>      <% if (u.role == 2) print('Researcher') %>    <td>      <button id=\"delete-btn\" class=\"btn btn-danger btn-mini \"        data-id=\"<%= u.id %>\">Delete</button>      <button id=\"edit-btn\" class=\"btn btn-info btn-mini\"        data-id=\"<%= u.id %>\">Edit</button>    </td>  </tr><% }) %></table>"
JST["home/details"] = "<ul class=\"resource-thumbs\"><% _.each(resources, function(r, i) { %>  <li class=\"resource-thumb\">    <a href=\"<%= arcs.baseURL + 'resource/' + r.id %>\">      <img src=\"<%= r.thumb %>\" alt=\"resource\" />    </a>    <a class=\"subtle\" href=\"<%= arcs.baseURL + 'resource/' + r.id %>\"><%= r.title %></a>  </li><% }) %><% if (!resources.length) { %>  <li>    <i class=\"icon-exclamation-sign\"></i> No Results Found  </li><% } else { %>  <li class=\"resource-thumb\">    <a href='<%= arcs.baseURL + 'search/type:\"' + resources[0].type + '\"' %>'>      <i class=\"icon-share-alt\"></i> Show all    </a>  </li><% } %></ul>"
JST["search/grid"] = "<% _.each(results, function(r, i) { %><div class=\"result grid\" data-id=\"<%= r.id %>\">  <div class=\"img-wrapper\">    <img src=\"<%= r.thumb %>\" data-id=\"<%= r.id %>\" />  </div>  <% if (r.title) { %>  <div>    <strong>      <%- r.title.length > 30 ? r.title.substring(0, 30) + '...' : r.title %>    </strong>  </div>  <% } %>  <% if (r.metadata) { %>  <div><%= r.metadata.get('identifier') %></div>  <% } %>  <div>    <% if (r.comments.length) { %>      <%= r.comments.length %> <i class=\"icon-comment\"></i>    <% } if (r.annotations.length) { %>      <%= r.annotations.length %> <i class=\"icon-map-marker\"></i>    <% } if (r.flags.length) { %>      <%= r.flags.length %> <i class=\"icon-flag\"></i>    <% } %> &nbsp;  </div></div><% }) %>"
JST["search/hotkeys"] = "<div class=\"modal hotkeys-modal\">  <div class=\"modal-header\">    <a class=\"hotkeys-close pull-right\">close</a>    <h3>Shortcuts</h3>  </div>  <div class=\"modal-body\">    <table>      <thead>        <tr>          <th>Action</th>          <th>Keys(s)</th>        </tr>      </thead>      <tbody>        <tr>          <td>Select all</td>          <td><%= ctrl %> + A</td>        </tr>        <tr>          <td>Select multiple</td>          <td>click + drag</td>        </tr>        <tr>          <td>Add/remove from selection</td>          <td><%= ctrl %> + click</td>        </tr>        <tr>          <td>Quick preview</td>          <td>spacebar</td>        </tr>        <tr>          <td>Navigate previews</td>          <td>            <i class=\"icon-white icon-arrow-left\"></i>            <i class=\"icon-white icon-arrow-right\"></i>          </td>        <tr>          <td>Edit info (for selected)</td>          <td><%= ctrl %> + E</td>        </tr>        <tr>          <td>Back to top</td>          <td>T</td>        </tr>      </tbody>    </table>  </div></div>"
JST["search/list"] = "<table style=\"width:100%\"><% _.each(results, function(r, i) { %>  <tr class=\"result list\" data-id=\"<%= r.id %>\">    <td class=\"img-wrapper\">      <img src=\"<%= r.thumb %>\" data-id=\"<%= r.id %>\" />    </td>    <td>      <div>        <strong><%= r.title %></strong> &nbsp;        <% if (r.metadata.get('identifier')) { %>          <span class=\"monospace\"><%= r.metadata.get('identifier') %></span> &nbsp;        <% } %>        <a class=\"subtle\" href=\"<%= r.url %>\"><%= r.file_name %></a> &nbsp;        (<em><%= arcs.utils.convertBytes(r.file_size) %></em>)      </div>      <% if (r.type) { %>      <div>        <% if (arcs.mime.isImage(r.mime_type)) { %>          <i class=\"icon-picture\"></i>        <% } else if (arcs.mime.isVideo(r.mime_type)) { %>          <i class=\"icon-film\"></i>        <% } else { %>          <i class=\"icon-file\"></i>        <% } %>        <%= r.type %>      </div>      <% } %>      <div>        Uploaded        <%= relativeDate(new Date(r.created)) %>        by        <a class=\"subtle\" href=\"<%= arcs.url('user', r.user.username) %>\"><%= r.user.name %></a>       </div>      <div>        <% _.each(r.keywords, function(k) { %>          <a class=\"keyword-link subtle\"             href=\"<%= arcs.url('search', 'keyword:' + k) %>\"><%= k %></a>        <% }) %>      </div>      <div>        <% if (r.comments.length) { %>          <%= r.comments.length %> <i class=\"icon-comment\"></i>        <% } if (r.annotations.length) { %>          <%= r.annotations.length %> <i class=\"icon-map-marker\"></i>        <% } if (r.flags.length) { %>          <%= r.flags.length %> <i class=\"icon-flag\"></i>        <% } if (!r.public) { %>          <i class=\"icon-lock\"></i>        <% } %>      </div>    </td>  </tr><% }) %></table>"
JST["search/preview"] = "<div class=\"preview\">  <img class=\"preview-image\" src=\"<%= preview || url %>\" alt=\"preview\"/>  <div class=\"preview-footer\">    <a id=\"title\" href=\"<%= arcs.baseURL + \"resource/\" + id %>\">      <%= title %>    </a>&nbsp;    <% if (mime_type == 'application/pdf') print('(PDF)'); %>    <% if (count > 1) { %>    <span class=\"pull-right\">      <% if (page > 1) { %>        <span id=\"prev-btn\">&larr;</span>      <% } %>      <%= page %> / <%= count %>      <span id=\"next-btn\"         class=\"<%= page < count ? '' : 'invisible' %>\">&rarr;</span>    </span>    <% } %>  </div></div>"
JST["ui/button"] = "<a class=\"btn icon unselectable\" id=\"<%= id %>\"    <%= this.url !== undefined ? 'href=\"' + url + '\"' : '' %>>    <span class=\"<%= this.class %>\"></span>    <%= text %></a>"
JST["ui/context_menu"] = "<ul class=\"nav nav-list context-menu\" style=\"display:none\">  <% for (o in options) { %>  <li><a class=\"context-menu-option\"     id=\"context-menu-option-<%= arcs.inflector.identifierize(o) %>\">    <%= o %></a></li>  <% } %></ul>"
JST["ui/loader"] = "<div class=\"loading\"></div>"
JST["ui/modal"] = "<div class=\"modal-header\">  <a class=\"close\" data-dismiss=\"modal\">Ã</a>  <h3><%= title %></h3></div><div class=\"modal-body\"><% if (subtitle) { %>  <%= subtitle %>  <br><br><% } %>  <div id=\"validation-error\"></div><% _.each(inputs, function(i, name) { %>  <% if (_.isUndefined(i.label) || i.label !== false) { %>    <label for=\"modal-<%= name %>\">      <%= _.isUndefined(i.label) ? name.charAt(0).toUpperCase() + name.substr(1) : i.label %>       <% if (i.help) { %>        <i class=\"icon-info-sign\" rel=\"tooltip\" title=\"<%= i.help %>\"></i>      <% } %>    </label>  <% } %>  <% if (i.type === 'select') { %>    <select class=\"<%= i.class %>\" id=\"modal-<%= name %>-input\"      <%= i.focused ? 'autofocus' : '' %>      name=\"modal-<%= name %>\">    <% _.each(i.options, function(val, key) { %>      <option <%= i.value == val ? 'selected' : '' %> value=\"<%= val %>\"?>        <%= _.isArray(i.options) ? val : key %>      </option>    <% }) %>    </select>  <% } else if (i.type === 'textarea') { %>    <textarea class=\"<%= i.class %>\" id=\"modal-<%= name %>-input\"      name=\"modal-<%= name %>\" <%= i.focused ? 'autofocus' : '' %>><%= i.value || '' %></textarea>  <% } else { %>    <input type=\"<%= i.type ? i.type : 'text' %>\" class=\"<%= i.class %>\"      id=\"modal-<%= name %>-input\" value=\"<%= i.value %>\"      <%= i.focused ? 'autofocus' : '' %>      name=\"modal-<%= name %>\" placeholder=\"<%= i.placeholder %>\" />  <% } %><% }) %></div><div class=\"modal-footer\"><% _.each(buttons, function(b, name) { %>  <button class=\"<%= b.class ? b.class : 'btn' %>\"     id=\"modal-<%= name %>-button\">    <%= name.substr(0, 1).toUpperCase() + name.substr(1) %>   </button><% }) %></div>"
JST["ui/modal_columned"] = "<div class=\"modal-header\">  <a class=\"close\" data-dismiss=\"modal\">Ã</a>  <h3><%= title %></h3></div><div class=\"modal-body\"><% if (subtitle) { %>  <%= subtitle %>  <br><br><% } %><% var left = true %><% _.each(inputs, function(i, name) { %>  <% if (left) { %>  <div class=\"row\">  <% } %>  <span class=\"span-6\">  <% if (_.isUndefined(i.label) || i.label !== false) { %>    <label for=\"modal-<%= name %>\">      <%= _.isUndefined(i.label) ? name.substr(0, 1).toUpperCase() + name.substr(1) : i.label %>       <% if (i.help) { %>        <i class=\"icon-info-sign\" rel=\"tooltip\" title=\"<%= i.help %>\"></i>      <% } %>    </label>  <% } %>  <% if (i.type === 'select') { %>    <select class=\"<%= i.class %>\" id=\"modal-<%= name %>-input\"      <%= i.focused ? 'autofocus' : '' %>      name=\"modal-<%= name %>\">    <% _.each(i.options, function(val, key) { %>      <option <%= i.value == val ? 'selected' : '' %> value=\"<%= val %>\">        <%= _.isArray(i.options) ? val : key %>      </option>    <% }) %>    </select>  <% } else if (i.type === 'textarea') { %>    <textarea class=\"<%= i.class %>\" id=\"modal-<%= name %>-input\"      name=\"modal-<%= name %>\" <%= i.focused ? 'autofocus' : '' %>></textarea>  <% } else { %>    <input type=\"<%= i.type ? i.type : 'text' %>\" class=\"<%= i.class %>\"      id=\"modal-<%= name %>-input\" value=\"<%= i.value %>\"      <%= i.focused ? 'autofocus' : '' %>      name=\"modal-<%= name %>\" placeholder=\"<%= i.placeholder %>\" />  <% } %>  <% if (!_.isUndefined(i.checkbox)) { %>    <input class=\"checkbox inline\" id=\"modal-<%= name %>-checkbox\"       type=\"checkbox\" <%= (i.checkbox) ? 'checked' : '' %> />  <% } %>  </span>  <% if (!left) { %>  </div>  <% } %>  <% left = !left %><% }) %><% if (!left) { %>  </div><% } %></div><div class=\"modal-footer\"><% _.each(buttons, function(b, name) { %>  <button class=\"<%= b.class ? b.class : 'btn' %>\"     id=\"modal-<%= name %>-button\">    <%= name.substr(0, 1).toUpperCase() + name.substr(1) %>   </button><% }) %></div>"
JST["ui/modal_wrapper"] = "<div id=\"modal\" class=\"modal\" style=\"display:none; max-height:none;\"></div>"
JST["ui/notification"] = "<div id=\"notification\" class=\"alert notification\" style=\"display:none\">    <a class=\"close\" data-dismiss=\"alert\" href=\"#\">Ã</a>    <span id=\"msg\"></span></div>"
JST["ui/progress"] = "<span class=\"progress\">  <div class=\"bar\" style=\"width: <%= progress %>%\"></div></span>"
JST["upload/list"] = "<div class=\"accordion-group upload\" data-id=\"<%= cid %>\">  <div class=\"accordion-heading\">    <div class=\"accordion-toggle\">      <% if (arcs.mime.isImage(type)) { %>        <i class=\"icon-picture\"></i>      <% } else if (arcs.mime.isVideo(type)) { %>        <i class=\"icon-film\"></i>      <% } else { %>        <i class=\"icon-file\"></i>      <% } %>      <%= name %> &nbsp;&nbsp;      <em><%= arcs.utils.convertBytes(size) %></em> &nbsp;&nbsp;      <div class=\"remove\"></div>      <span class=\"progress\">        <div class=\"bar\" style=\"width: <%= progress %>%\"></div>      </span>      <span id=\"progress-done\" class=\"pull-right\" style=\"display:none\">        <i class=\"icon-ok\"></i> Done      </span>    </div>  </div>  <div class=\"accordion-body collapse in\">    <div class=\"accordion-inner\">      <input type=\"text\" id=\"upload-title\" placeholder=\"Title\" />      <input type=\"text\" id=\"upload-identifier\" placeholder=\"Identifier\" />      <select id=\"upload-type\" style=\"display:inline-block\">        <option disabled selected>Choose Type...</option>      <% _.each(arcs.config.types, function(help, type) { %>        <option><%= type %></option>      <% }) %>      </select>    </div>  </div></div>"
JST["viewer/annotations"] = "<ul class=\"annotations\"><% _.each(annotations, function(a) { %>  <li class=\"annotation\" data-id=\"<%= a.id %>\">  <% if (a.relation) { %>    <i class=\"icon-magnet\"></i>    <a href=\"<%= arcs.url('resource', a.relation.id) %>\"      class=\"subtle\"><%= a.relation.title %></a>  <% } else if (a.transcript) { %>    <i class=\"icon-align-justify\"></i>    <%= arcs.inflector.truncate(a.transcript, 200) %>  <% } else if (a.url) { %>    <i class=\"icon-share\"></i>    <a class=\"subtle\" href=\"<%= a.url %>\"><%= a.url %></a>  <% } %>  </li><% }) %></ul>"
JST["viewer/annotator"] = "<div class=\"annotator-tabs tabbable\">  <ul class=\"nav nav-tabs\">    <li class=\"active\">      <a href=\"#relation-tab\" data-toggle=\"tab\">Relation</a>    </li>    <li>      <a href=\"#transcription-tab\" data-toggle=\"tab\">Transcription</a>    </li>    <li>      <a href=\"#url-tab\" data-toggle=\"tab\">URL</a>    </li>  </ul>  <div class=\"tab-content\">    <div id=\"relation-tab\" class=\"tab-pane active\">      <div class=\"mini-search\"></div>      <div class=\"mini-search-results\">        <div class=\"loading-squares\" style=\"margin-top:40px\"></div>      </div>    </div>    <div id=\"transcription-tab\" class=\"tab-pane\">      <textarea class=\"transcription\" id=\"transcript\"         placeholder=\"Transcribe text within the resource...\"></textarea>    </div>    <div id=\"url-tab\" class=\"tab-pane\">      <div class=\"input-prepend\">        <span class=\"add-on\">http://</span>        <input id=\"url\" class=\"span2\" type=\"text\"           placeholder=\"google.com\"/>      </div>    </div>  </div></div>"
JST["viewer/carousel"] = "<% _.each(resources, function(r, i) { %>  <li>    <img class=\"thumb\" src=\"<%= r.thumb %>\" alt=\"thumbnail\"      style=\"width:100px; height:90px;\" data-id=\"<%= r.id %>\"/>    <div class=\"overlay\">      <span><%= i + 1 + offset %></span>    </div>  </li><% }) %>"
JST["viewer/collection_table"] = "<tr>  <td>Title</td>  <td><%= title %></td></tr><tr>  <td>Description</td>  <td><%= description %></td></tr><% if (pdf) { %><tr>  <td>Original PDF</td>  <td><a href=\"<%= arcs.baseURL + 'resource/' + pdf %>\">Link</a></td></tr><% } %>"
JST["viewer/discussion"] = "<% _.each(comments, function(c) { %><div class=\"comment-wrapper\" id=\"comment-<%= c.id %>\">  <div class=\"comment-voice thumbnail\">    <img class=\"user-thmb\" src=\"http://gravatar.com/avatar/<%= c.gravatar %>?s=40\"/>  </div>  <div class=\"comment-header\">    <a class=\"name subtle\" href=\"<%= arcs.baseURL + 'user/' + c.username %>\">      <%= c.name %>    </a>    commented     <span class=\"time\"><%= relativeDate(new Date(c.created)) %></span>  </div>  <div class=\"comment\"><%- c.content %></div></div><% }) %>"
JST["viewer/document"] = "<iframe src=\"http://docs.google.com/gview?url=<%= url %>&embedded=true\"    style=\"width: 100%; height: 100%; float:left;\" frameborder=\"0\"></iframe>"
JST["viewer/hotkeys"] = "<div class=\"modal hotkeys-modal\">  <div class=\"modal-header\">    <a class=\"hotkeys-close pull-right\">close</a>    <h3>Shortcuts</h3>  </div>  <div class=\"modal-body\">    <table>      <thead>        <tr>          <th>Action</th>          <th>Keys(s)</th>        </tr>      </thead>      <tbody>        <tr>          <td>Navigate pages</td>          <td>            <i class=\"icon-white icon-arrow-left\"></i>            <i class=\"icon-white icon-arrow-right\"></i>          </td>        </tr>        <tr>          <td>Annotate</td>          <td>            <i class=\"icon-white icon-screenshot\"></i>          </td>        </tr>        <tr>          <td>Edit info</td>          <td><%= ctrl %> + E</td>        </tr>        <tr>          <td>Enter page number</td>          <td>P</td>        </tr>        <tr>          <td>Toggle annotation visibility</td>          <td>A</td>        </tr>        <tr>          <td>Zoom in</td>          <td>            <i class=\"icon-white icon-plus\"></i>          </td>        </tr>        <tr>          <td>Zoom out</td>          <td>            <i class=\"icon-white icon-minus\"></i>          </td>        </tr>      </tbody>    </table>  </div></div>"
JST["viewer/hotspots"] = "<% _.each(annotations, function(a) { %>  <% a.url = a.url || '#' %>  <a class=\"hotspot\" style=\"left:<%= a.x1 + offset %>px; top:<%= a.y1 %>px;     width:<%= a.x2 - a.x1 %>px; height:<%= a.y2 - a.y1 %>px;\" data-id=\"<%= a.id %>\"     href=\"<%= a.relation ? arcs.url('resource', a.relation.id) : a.url %>\">    <% if (arcs.user.is('Sr. Researcher') || a.user_id == arcs.user.id) { %>      <i class=\"remove-btn icon-remove\"></i>    <% } %>  </a><% }) %>"
JST["viewer/image"] = "<img src=\"<%= preview || url %>\" alt=\"resource\" data-zoom=\"1\" data-id=\"<%= id %>\">"
JST["viewer/keywords"] = "<ul class=\"keyword-list\"><% _.each(keywords, function(k) { %>  <li><a class=\"keyword-link subtle\" id=\"keyword-<%= k.id %>\" href=\"<%= k.link %>\">    <%- k.keyword %>  </a></li><% }) %></ul>"
JST["viewer/popover"] = "<% if (relation) { %>  <h3>  <% if (arcs.mime.isImage(relation.mime_type)) { %>    <i class=\"icon-picture\"></i>  <% } else if (arcs.mime.isVideo(relation.mime_type)) { %>    <i class=\"icon-film\"></i>  <% } else { %>    <i class=\"icon-file\"></i>  <% } %>  <%= relation.title %>  </h3>  <h4><%= relation.type %></h4>  <br><img class=\"thumb\" src=\"<%= relation.thumb %>\"/><% } else if (transcript) { %>  <p><%= arcs.inflector.truncate(transcript, 500) %></p><% } else { %>  <a href=\"<%= url %>\"><%= url %></a><% } %>"
JST["viewer/popover_title"] = "<% if (type == 'Relation') { %>Relation <i class=\"icon-magnet\"></i> <% } if (type == 'Transcription') { %>Transcription <i class=\"icon-align-justify\"></i> <% } if (type == 'URL') { %>URL <i class=\"icon-share\"></i><% } %>"
JST["viewer/table"] = "<tr>  <td>Title</td>  <td>    <%- title %>  </td></tr><tr>  <td>Access</td>  <td>    <a class=\"subtle\" href=\"<%= arcs.url('search', 'access:' + (public ? 'public' : 'private')) %>\">      <%= public ? \"public\" : \"private\" %>    </a>  </td></tr><tr>  <td>Type</td>  <td>    <a class=\"subtle\" href=\"<%= arcs.url('search', 'type:' + arcs.inflector.enquote(type)) %>\">      <%- type || '' %>    </a>  </td></tr><tr>  <td>Created</td>  <td><%= created %></td></tr><% if (modified) { %><tr>  <td>Modified</td>  <td><%= modified %></td></tr><% } %><tr>  <td>File-name</td>  <td><a href=\"<%= url %>\"><%= file_name %></a></td></tr><tr>  <td>File-type</td>  <td>    <a class=\"subtle\" href=\"<%= arcs.url('search', 'filetype:' + mime_type) %>\">      <%= mime_type %>    </a>  </td></tr><% _.each(metadata.attributes, function(v, k) { %>  <% if (v) { %>  <tr>    <td><%- k.charAt(0).toUpperCase() + k.substr(1) %></td>    <td><%- v %></td>  </tr>  <% } %><% }) %>"
